var pageWidth = document.documentElement.clientWidth
  , pageHeight = document.documentElement.clientHeight;
function arrayDeepCopy(b) {
  return JSON.parse(JSON.stringify(b))
}
Array.prototype.remove = function (b) {
  b = this.indexOf(b);
  -1 < b && this.splice(b, 1)
}
  ;
var TOTAL_READING_TIME = 0
  , TOTAL_WRITING_TIME = 0
  , _valid_review_interval = 3600;
function StudyPanel(b) {
  this.bookName = b.bookName;
  this.moduleCode = b.moduleCode;
  this.unitNbr = b.unitNbr;
  this.totalUnitNbr = b.totalUnitNbr;
  var a = this.timeTicket = this.nextPointOfStartToSpellCorrect = this.lastPointOfSpellingTimeout = this.lastGapOfTotalAndSuccess = this.successWritingOfTry = this.totalWritingTry = this.currentTotalWritingNbr = this.correctWritingVocNbr = this.totalWritingTime = this.rememberNbr = this.totalReadingNbr = this.totalReadingTry = this.readingFailTimes = this.totalReadingTime = 0
    , c = 0
    , d = 0
    , e = null
    , k = null
    , f = null;
  this.isForcePause = this.isPause = !1;
  var g = function () {
    a += 1;
    0 < a && 0 == a % 60 && (c += 1,
      a = 0);
    0 < c && 0 == c % 60 && (d += 1,
      c = 0);
    var b = d + ":" + c + ":" + a;
    document.getElementById("readingTime").value = b
  }
    , h = function (b) {
      a += 1;
      0 < a && 0 == a % 60 && (c += 1,
        a = 0);
      0 < c && 0 == c % 60 && (d += 1,
        c = 0);
      b = d + ":" + c + ":" + a;
      document.getElementById("writingTime").value = b
    };
  StudyPanel.prototype.startReadingClock = function (b) {
    clearInterval(e);
    void 0 != b && null != b ? (d = parseInt(b / 3600),
      c = parseInt((b - 3600 * d) / 60),
      a = b % 60) : c = d = a = 0;
    k = "readingClock";
    f = g;
    e = setInterval(f, 1E3)
  }
    ;
  StudyPanel.prototype.startWritingTimer = function (b) {
    clearInterval(e);
    void 0 != b && null != b ? (d = parseInt(b / 3600),
      c = parseInt((b - 3600 * d) / 60),
      a = b % 60) : c = d = a = 0;
    k = "writingClock";
    f = h;
    e = setInterval(f, 1E3)
  }
    ;
  StudyPanel.prototype.pauseClock = function () {
    this.isPause = !0;
    this.saveTime();
    clearInterval(e)
  }
    ;
  StudyPanel.prototype.restartClock = function () {
    clearInterval(e);
    c = d = a = this.totalWritingTime = this.totalReadingTime = 0;
    null != f && (e = setInterval(f, 1E3))
  }
    ;
  StudyPanel.prototype.continueClock = function () {
    null != f && this.isPause && !this.isForcePause && (this.isPause = !1,
      e = setInterval(f, 1E3))
  }
    ;
  StudyPanel.prototype.saveTime = function () {
    "readingClock" == k ? TOTAL_READING_TIME = this.totalReadingTime = 3600 * d + 60 * c + a : "writingClock" == k && (TOTAL_WRITING_TIME = this.totalWritingTime = 3600 * d + 60 * c + a)
  }
    ;
  StudyPanel.prototype.getReadingTime = function () {
    "readingClock" == k && (TOTAL_READING_TIME = this.totalReadingTime = 3600 * d + 60 * c + a);
    return this.totalReadingTime
  }
    ;
  StudyPanel.prototype.getWritingTime = function () {
    "writingClock" == k && (TOTAL_WRITING_TIME = this.totalWritingTime = 3600 * d + 60 * c + a);
    return this.totalWritingTime
  }
}
function AlphaMusic(b, a) {
  this.autostart = b;
  this.state = a
}
function ClickHandler() {
  this.timeTicket = this.lastClickTicket = -1
}
function SingletonTimeoutHandler() {
  this.handlerCode = null;
  this.handlerCount = 0
}
function setHideMenuInLocalStorage(b) {
  var a = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userinfo) : {};
  a.setting_hideMenu = b;
  window.localStorage.userinfo = JSON.stringify(a)
}
function setUserTagInLocalStorage(b) {
  var a = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userinfo) : {};
  a.userTag = b;
  window.localStorage.userinfo = JSON.stringify(a)
}
function setUserReviewVocInfoInLocalStorage(b, a) {
  var c = {};
  c.vocCount = b;
  c.date = a;
  if (isSameUserInLocalStorage()) {
    var d = JSON.parse(window.localStorage.userinfo);
    null != d.reviewVocInfo && (c.date.getTime() - (new Date(d.reviewVocInfo.date)).getTime()) / 1E3 < _valid_review_interval && (c.vocCount = d.reviewVocInfo.vocCount + b)
  } else
    d = {};
  d.reviewVocInfo = c;
  window.localStorage.userinfo = JSON.stringify(d)
}
function setVocBookOrderTypeInLocalStorage(b) {
  var a = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userinfo) : {};
  a.orderType = b;
  window.localStorage.userinfo = JSON.stringify(a)
}
function setVocBookPageNbrInLocalStorage(b) {
  var a = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userinfo) : {};
  a.pageNbr = b;
  window.localStorage.userinfo = JSON.stringify(a)
}
function setVocBookVocPerPageInLocalStorage(b) {
  var a = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userinfo) : {};
  a.vocPerPage = b;
  window.localStorage.userinfo = JSON.stringify(a)
}
function addReviewVocListInLocalStorage(b) {
  if (isSameUserInLocalStorage()) {
    var a = JSON.parse(window.localStorage.userinfo);
    if (null != a.reviewVocList && "" != a.reviewVocList) {
      var c = JSON.parse(a.reviewVocList)
        , c = c.concat(JSON.parse(b));
      a.reviewVocList = JSON.stringify(c)
    } else
      a.reviewVocList = b
  } else
    a = {},
      a.reviewVocList = b;
  window.localStorage.userinfo = JSON.stringify(a)
}
function addUnitVocListInLocalStorage(b, a, c, d, e, k, f) {
  var g = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userdata) : {};
  g.UnitVocList = f;
  g.moduleCode = b;
  g.unit = a;
  g.studytoken = d;
  g.vocCode = c;
  g.totalReadingTime = e;
  g.totalWritingTime = k;
  window.localStorage.userdata = JSON.stringify(g)
}
function addUnitVocFinishListInLocalStorage(b, a, c, d, e, k, f, g) {
  var h = isSameUserInLocalStorage() ? JSON.parse(window.localStorage.userfinishdata) : {};
  h.UnitVocList = f;
  h.moduleCode = b;
  h.unit = a;
  h.studytoken = d;
  h.seconds4SpellingLetter = c;
  h.totalReadingTime = e;
  h.totalWritingTime = k;
  h.isContinue = g;
  window.localStorage.userfinishdata = JSON.stringify(h)
}
function initialThemeMenu() {
  $("#preOverlayPage").remove();
  if (window.localStorage) {
    var b = $("#UserId").val()
      , a = $("#UserId").val()
      , c = $("#UserLoginTimes").val();
    window.localStorage && (isSameUserInLocalStorage() ? (c = JSON.parse(window.localStorage.userinfo),
      $("#UserTag").html(c.userTag),
      1 == c.setting_hideMenu && (0 < $("#line").size() && $("#line").remove(),
        $("#theme-menu").hide(),
        $("#hideMenu").parent().before('\x3cdiv id\x3d"line" class\x3d"radius" style\x3d"cursor:pointer; width:15px;height:140px;background-color:#fcfcfc;border:solid 1px #ccc;float:left;writing-mode:lr-tb;font-size:14px;padding:6px;font-family:\u5fae\u8f6f\u96c5\u9ed1;color:#999999;"\x3e\u4e2a\u4eba\u4fe1\u606f\x3cbr/\x3e--\x3cbr/\x3e\u8ba2\u9605\x3c/div\x3e'),
        $("#theme-slide").css({
          "margin-right": "148px"
        }, "500"),
        $("#hideMenu").css({
          "background-position": "-10px 0",
          "margin-left": "-6px"
        }).attr("title", "\u5c55\u5f00"))) : ($("#UserTag").html(a),
          $("#tdUserId").html(a),
          $("#tdLoginTimes").html(c),
          c = {},
          c.userTag = b,
          c.userId = a,
          window.localStorage.userinfo = JSON.stringify(c)))
  }
}
function hideThemeMenu() {
  0 < $("#line").size() && $("#line").remove();
  $("#theme-menu").hide();
  $("#hideMenu").parent().before('\x3cdiv id\x3d"line" class\x3d"radius" style\x3d"cursor:pointer; width:15px;height:140px;background-color:#fcfcfc;border:solid 1px #ccc;float:left;writing-mode:lr-tb;font-size:14px;padding:6px;font-family:\u5fae\u8f6f\u96c5\u9ed1;color:#999999;"\x3e\u4e2a\u4eba\u4fe1\u606f\x3cbr/\x3e--\x3cbr/\x3e\u8ba2\u9605\x3c/div\x3e');
  $("#theme-slide").animate({
    "margin-right": "148px"
  }, "500");
  $("#hideMenu").css({
    "background-position": "-10px 0",
    "margin-left": "-6px"
  }).attr("title", "\u5c55\u5f00")
}
function showThemeMenu() {
  $("#theme-slide").animate({
    "margin-right": "0px"
  }, 500, function () { });
  $("#line").fadeOut(300, function () {
    $("#line").remove()
  });
  $("#hideMenu").fadeOut(300).delay(300).fadeIn(500);
  $("#theme-menu").delay(500).fadeIn(500);
  $("#hideMenu").css({
    "background-position": "0 0",
    "margin-left": "0px"
  }).attr("title", "\u6536\u8d77")
}
;