$(document).ready(function() {
    function Ha() {
        M = parseInt($("#vocRecTime_setting").val()) + 1;
        ta = 1E3 * parseInt($("#vocPromptTime_setting").val());
        Ia = parseInt($("#reverseOn_setting").val()) - 1;
        ua = $("#unitReviewOn_setting").is(":checked") ? !0 : !1;
        q && h == N ? ($("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        })), $("#studyBox").omDialog("open"), $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxHeartBeat",
            data: {},
            dataType: "json",
            cache: !1,
            success: function(a) {
                $("#unit_study_slide").find(".loading0").remove();
                a.success ? ($("#startUnitStudy").css("display", "inline"), $.browser.msie && 9 > $.browser.version || L || (L = L = !0)) : Ja()
            },
            error: function() {
                $("#unit_study_slide").find(".loading0").remove();
                Ja()
            }
        })) : ($("#finishSection").hide(), $("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        })), q = !1, h = N, $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxGetErrorUnit",
            data: {
                moduleCode: "00000000-0000-0000-0000-000000000000",
                unit: 1
            },
            dataType: "json",
            cache: !1,
            success: function(a) {
                $("#finishSection").hide();
                $("#panelTitleInfo").html("\u9519\u8bcd\u5b66\u4e60...");
                $("#unit_study_slide").find(".loading0").remove();
                $("#startInfo").css("display", "inline").html("\u5373\u5c06\u5f00\u59cb\u4eca\u65e5\u9519\u8bcd\u672c\u5b66\u4e60\uff0clet's go!!!");
                f.length = 0;
                l.length = 0;
                if (a.success) {
                    I = a.studytoken;
                    w = [];
                    u = [];
                    n = ab = $("#vocNbrByGroup_setting").val();
                    "" != a.bookInfo && (null != d && d.pauseClock(), d = new StudyPanel(a.bookInfo));
                    void 0 != a.data && $(a.data).each(function(a, b) {
                        var c = new Slide(b, a);
                        l.push(c)
                    });
                    var b = 0;
                    if (0 < l.length) {
                        if (null != a.studyPos && 1 != a.studyPos.isFinished) for (var c = 0; c < l.length; c++) if (l[c].spelling == a.studyPos.spelling) {
                            b = l[c].vocIndex;
                            break
                        }
                        0 != b && $("#startInfo").css("display", "inline").html("\u8fdb\u5165\u4e0b\u4e00\u7ec4\u9519\u8bcd\uff0c\u7ee7\u7eed\u5b66\u4e60\uff0cgo! go! go!");
                        x = parseInt(b / n);
                        f = l.slice(x * n, (x + 1) * n);
                        g = f[b % n];
                        Y(g);
                        q = !0;
                        $("#current_module_unit").val(1);
                        null != a.studyPos ? $("#current_module_unit").attr("isfinished", a.studyPos.isFinished) : $("#current_module_unit").attr("isfinished", !1);
                        $("#current_module_unit").attr("latestVocIndex", b);
                        $("#startUnitStudy").css("display", "inline")
                    }
                } else 1 == a.condition ? $("#startInfo").html("\u9519\u8bcd\u4eca\u65e5\u90fd\u5df2\u7ecf\u5b66\u4e60\uff0c\u8bf7\u660e\u5929\u91cd\u65b0\u5f00\u59cb...").css("display", "block") : $("#startInfo").html('\x3cfont style\x3d"color:red"\x3e' + a.msg + "\x3c/font\x3e").css("display", "block"),
                $("#cancelUnitStudy").css("display", "inline"),
                $("#panelTitleInfo").html("\u9519\u8bcd\u5b66\u4e60...")
            },
            error: function() {
                m("\u60a8\u7684\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u540e\u518d\u8bd5\u8bd5")
            }
        }), $("#studyBox").omDialog("open"))
    }
    function Ka(a, b) {
        var c = a.substr(0, 36),
        e = a.substr(37);
        M = parseInt($("#vocRecTime_setting").val()) + 1;
        ta = 1E3 * parseInt($("#vocPromptTime_setting").val());
        Ia = parseInt($("#reverseOn_setting").val()) - 1;
        ua = $("#unitReviewOn_setting").is(":checked") ? !0 : !1;
        bb && $.browser.webkit ? ($("#btnOfShaddowCover").show(), cb()) : bb = !1;
        q && $("#current_module_unit").val() == a && h == D ? ($("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        })), $("#studyBox").omDialog("open"), $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxHeartBeat",
            data: {},
            dataType: "json",
            cache: !1,
            success: function(a) {
                $("#unit_study_slide").find(".loading0").remove();
                a.success ? ($("#startUnitStudy").css("display", "inline"), $.browser.msie && 9 > $.browser.version || L || (L = L = !0)) : Ja()
            },
            error: function() {
                $("#unit_study_slide").find(".loading0").remove();
                Ja()
            }
        })) : (R(), $("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        })), q = !1, h = D, $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxGetUnit",
            data: {
                unit: e,
                moduleCode: c
            },
            dataType: "json",
            cache: !1,
            success: function(k) {
                $("#unit_study_slide").find(".loading0").remove();
                $("#startInfo").css("display", "inline").html("\u2022 \u5373\u5c06\u5f00\u59cb\u672c\u5355\u5143\u5b66\u4e60\uff0clet's go!!!");
                f.length = 0;
                l.length = 0;
                if (k.success) {
                    I = k.studytoken;
                    w = [];
                    u = [];
                    n = ab = $("#vocNbrByGroup_setting").val();
                    "" != k.bookInfo && (null != d && d.pauseClock(), d = new StudyPanel(k.bookInfo));
                    void 0 != k.data && $(k.data).each(function(a, b) {
                        var c = new Slide(b, a);
                        l.push(c)
                    });
                    var r = 0;
                    if (0 < l.length) {
                        if (void 0 != b && null != b) {
                            if (!b) for (var G = 0; G < l.length; G++) if (l[G].spelling == k.studyPos.spelling) {
                                r = l[G].vocIndex;
                                break
                            }
                        } else if (null != k.studyPos && 1 != k.studyPos.isFinished) for (G = 0; G < l.length; G++) if (l[G].spelling == k.studyPos.spelling) {
                            r = l[G].vocIndex;
                            break
                        }
                        0 != r && $("#startInfo").css("display", "inline").html("\u2022 \u8fdb\u5165\u4e0b\u4e00\u7ec4\uff0c\u7ee7\u7eed\u5b66\u4e60\uff0cgo! go! go!");
                        x = parseInt(r / n);
                        f = l.slice(x * n, (x + 1) * n);
                        g = f[r % n];
                        Y(g);
                        q = !0;
                        $("#current_module_unit").val(a);
                        null != k.studyPos ? $("#current_module_unit").attr("isfinished", k.studyPos.isFinished) : $("#current_module_unit").attr("isfinished", !1);
                        $("#current_module_unit").attr("latestVocIndex", r);
                        $("#startUnitStudy").css("display", "inline")
                    }
                } else 1 == k.condition ? ($("#startInfo").html("\u2022 \u672c\u5355\u5143\u6ca1\u6709\u5355\u8bcd\uff0c\u8bf7\u6362\u4e2a\u5355\u5143...").css("display", "block"), $("#cancelUnitStudy").css("display", "inline"), r = $("#handle-title").html(), $("#panelTitleInfo").html(r + " - Unit " + e), La(c, e, k.studyPos)) : (2 == k.condition ? $("#startInfo").html(k.msg).css("display", "block") : $("#startInfo").html('\x3cfont style\x3d"color:red"\x3e' + k.msg + "\x3c/font\x3e").css("display", "block"), $("#cancelUnitStudy").css("display", "inline"), r = $("#handle-title").html(), $("#panelTitleInfo").html(r + " - Unit " + e))
            },
            error: function() {
                m("\u60a8\u7684\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u540e\u518d\u8bd5\u8bd5")
            }
        }), $("#studyBox").omDialog("open"))
    }
    function Cb(a, b) {
        var c = a.substr(3, 36),
        e = a.substr(40);
        q && $("#current_module_unit").val() == a && h == V ? ($("#studyBox").omDialog("open"), null != p && p.startTimer(), $.browser.msie && 9 > $.browser.version || L || (L = L = !0), $("#startUnitStudy").css("display", "inline")) : (R(), $("#panelTitleInfo").html("\u6570\u636e\u53d6\u4e2d..."), $("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        })), q = !1, h = V, Z = 1, $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxGetUnit",
            data: {
                unit: e,
                moduleCode: c
            },
            dataType: "json",
            cache: !1,
            success: function(b) {
                $("#unit_study_slide").find(".loading0").remove();
                $("#current_module_unit").val(a);
                if (b.success) I = b.studytoken,
                w = [],
                u = [],
                f.length = 0,
                l.length = 0,
                "" != b.bookInfo && (null != d && d.pauseClock(), d = new StudyPanel(b.bookInfo)),
                void 0 != b.data && ($(b.data).each(function(a, b) {
                    f.push(new Slide(b, a))
                }), n = f.length),
                0 < f.length && ($("#startInfo").css("display", "inline").html('\u2022 \u5373\u5c06\u5f00\u59cb\u672c\u5355\u5143\u7684\x3cfont style\x3d"font-size:26px; color:#05ad78;"\x3e\u542c\u8bfb\u8bad\u7ec3\x3c/font\x3e\uff0c go, go, go!'), g = f[0], Y(g), q = !0, $("#startVocSpeak").css("display", "inline"));
                else if (1 == b.condition) {
                    $("#startInfo").html("\u2022 \u672c\u5355\u5143\u6ca1\u6709\u5355\u8bcd\uff0c\u8bf7\u6362\u4e2a\u5355\u5143...").css("display", "block");
                    $("#cancelUnitStudy").css("display", "inline");
                    var k = $("#handle-title").html();
                    $("#panelTitleInfo").html(k + " - Unit " + e);
                    La(c, e, b.studyPos)
                } else 2 == b.condition ? $("#startInfo").html(b.msg).css("display", "block") : $("#startInfo").html('\x3cfont style\x3d"color:red"\x3e' + b.msg + "\x3c/font\x3e").css("display", "block"),
                $("#cancelUnitStudy").css("display", "inline"),
                k = $("#handle-title").html(),
                $("#panelTitleInfo").html(k + " - Unit " + e)
            },
            error: function() {
                m("\u60a8\u7684\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u540e\u518d\u8bd5\u8bd5")
            }
        }), $("#studyBox").omDialog("open"), $("#showMeaning_speakSection").hover(function() {
            $("#meaning_speakSection").fadeIn()
        },
        function() {
            $("#meaning_speakSection").fadeOut()
        }), $("#audio_word_or_sen_symbol_speakSection").click(function() {
            var a = $("#wordAudio_content_speakSection").find("audio").get(0);
            void 0 != a && a.load();
            if ($.browser.msie) if (9 <= $.browser.version) 1 == Z && $("#wordAudio_content_speakSection").find("audio").get(0).play();
            else try {
                1 == Z && document.getElementById("speak_word_audio_embed").play()
            } catch(r) {
                $("#speak_word_audio_embed").attr("autostart", !0)
            } else 1 == Z && $("#wordAudio_content_speakSection").find("audio").get(0).play()
        }), $("#showtip_speakSection").hover(function() {
            $("#tip_speakSection").fadeIn()
        },
        function() {
            $("#tip_speakSection").fadeOut()
        }))
    }
    function Db(a) {
        26 > a.spelling.length ? $("#spelling").css("font-size", "30px").html(a.spelling) : $("#spelling").css("font-size", "20px").html(a.spelling);
        $("#soundMarkUs").html(a.soundMarkUs);
        $("#meaning").html(a.meaning);
        a.isCollected ? $("#wordDel_symbol").attr("src", "/content/image/study_collect_over.png") : $("#wordDel_symbol").attr("src", "/content/image/study_collect.png");
        Ma(a, $("#wordAudio_content"), "word_audio_embed_v2");
        xc(a);
        $("#wordAudio_symbol").click();
        null != p && p.stopTimer();
        p = new aa(M);
        p.startTimer();
        bb && h == D && ($("#btnOfShaddowCover").show(), Na || cb(), db = 10, O.onaudioprocess = null, O.onaudioprocess = function(a) {
            J.getByteFrequencyData(va);
            a = 0;
            for (var b = va.length,
            e = 0; e < b; e++) a += va[e];
            db = a / b
        },
        null != Oa && window.clearInterval(Oa), Oa = window.setInterval(function() {
            60 < db && (window.clearInterval(Oa), $("#btnOfShaddowCover").fadeOut())
        },
        3 < a.spelling.length ? 700 : 400))
    }
    function xc(a) {
        var b = null;
        if (0 == l.length) try {
            b = f[a.slideSeqNbr + 1]
        } catch(c) {
            console.log("no next words in _slide_array")
        } else try {
            b = l[a.slideSeqNbr + 1]
        } catch(c) {
            console.log("no next words in _slide_all")
        }
        null != b ? (a = "/soundfile/" + b.spelling.substr(0, 1).toUpperCase() + "/" + $.trim(clearSpellingForAudio(b.spelling)) + ".mp3", $("#nextWordAudio_content").find("source").eq(0).attr("src", a).siblings("embed").eq(0).attr("src", a), $("#nextWordAudio_content").find("audio").get(0).load()) : $("#nextWordAudio_content").html("")
    }
    function yc() {
        O.onaudioprocess = function(a) {
            a = a.inputBuffer.getChannelData(0);
            if (null == S) S = a;
            else {
                newlen = S.length + a.length;
                var b = new Float32Array(newlen);
                b.set(S, 0);
                b.set(a, S.length);
                S = b
            }
            J.getByteFrequencyData(va)
        }
    }
    function Eb() {
        Pa && (_audio_buffer_node.stop(), window.clearTimeout(Fb));
        null != S && (Pa = !0, _audio_buffer = C.createBuffer(1, S.length, C.sampleRate), _audio_buffer.getChannelData(0).set(S, 0), _audio_buffer_node = C.createBufferSource(), _audio_buffer_node.buffer = _audio_buffer, _audio_buffer_node.connect(C.destination), _audio_buffer_node.start(), 1 < _audio_buffer.duration ? Fb = setTimeout(function() {
            $("#audio_word_or_sen_symbol_speakSection").click();
            Pa = !1
        },
        1E3 * _audio_buffer.duration) : Pa = !1)
    }
    function Gb(a) {
        $("#voc_mark_reverse").hide();
        $("#spelling_reverse").html(a.spelling);
        $("#soundMarkUs_reverse").html(a.soundMarkUs);
        $("#explainInfo_reverse").find(".translation").eq(0).show();
        $("#meaning_reverse").hide().html(a.meaning).fadeIn();
        Ma(a, $("#wordAudio_content"), "word_audio_embed_v2");
        $("#wordAudio_symbol").click()
    }
    function Ma(a, b, c) {
        var e = a.spelling,
        d = $('\x3caudio id\x3d"' + a.vocCode + '_audio"\x3e\x3csource src\x3d"/soundfile/' + e.substr(0, 1).toUpperCase() + "/" + $.trim(clearSpellingForAudio(e)) + '.mp3" type\x3d"audio/mpeg"\x3e\x3cembed id\x3d "' + c + '" src\x3d"/soundfile/' + e.substr(0, 1).toUpperCase() + "/" + $.trim(clearSpellingForAudio(e)) + '.mp3" autostart\x3dfalse loop\x3dfalse hidden\x3dtrue  /\x3e\x3c/audio\x3e');
        $(b).html(d);
        e = "/soundfile/" + e.substr(0, 1).toUpperCase() + "/" + $.trim(clearSpellingForAudio(e)) + ".mp3";
        $(b).find("audio").eq(0).attr("id", a.vocCode + "_audio").find("source").eq(0).attr("id", a.vocCode + "_audio").attr({
            id: a.vocCode + "_audio",
            src: e
        }).siblings("embed").eq(0).attr({
            id: c,
            src: e
        })
    }
    function eb() {
        $("#wordAudio_content").find("audio").get(0);
        if ($.browser.msie) if (9 <= $.browser.version) $("#wordAudio_content").find("audio").get(0).play();
        else try {
            document.getElementById("word_audio_embed_v2").play()
        } catch(a) {
            $("#word_audio_embed_v2").attr("autostart", !0)
        } else $("#wordAudio_content").find("audio").get(0).play()
    }
    function Y(a, b) {
        $("#totalVocNbr").html(f.length);
        if (h == D) {
            $("#panelTitleInfo").html(d.bookName + " - Unit " + f[0].unitNbr);
            d.rememberNbr = a.vocIndex % n;
            d.totalReadingNbr = d.rememberNbr;
            d.readingFailTimes = 0;
            null == d && (d.totalReadingTry = 0);
            $("#unRememberNbr").val(d.totalReadingNbr - d.rememberNbr);
            $("#totalReadingTry").val(d.totalReadingTry);
            d.correctWritingVocNbr = 0;
            d.currentTotalWritingNbr = d.correctWritingVocNbr;
            d.successWritingOfTry = 0;
            null == d && (d.totalWritingTry = 0);
            $("#totalWritingTry").val(d.totalWritingTry);
            $("#errorWritingVocNbr").val(d.currentTotalWritingNbr - d.correctWritingVocNbr);
            var c;
            c = b == ka ? d.correctWritingVocNbr / f.length * 100 + "%": d.rememberNbr / f.length * 100 + "%";
            $("#studyScrollProgress").animate({
                width: c
            }).attr("title", "\u7b2c " + d.rememberNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd");
            $("#vocSeq").html(d.rememberNbr)
        } else h == A ? ($("#panelTitleInfo").html(d.bookName + " - Unit " + f[0].unitNbr + " - \u8bb0\u5fc6\u66f2\u7ebf\u590d\u4e60"), d.rememberNbr = a.slideSeqNbr, d.totalReadingNbr = d.rememberNbr, d.readingFailTimes = 0, null == d && (d.totalReadingTry = 0), $("#unRememberNbr").val(d.totalReadingNbr - d.rememberNbr), $("#totalReadingTry").val(d.totalReadingTry), c = d.rememberNbr / f.length * 100 + "%", $("#studyScrollProgress").css({
            width: c
        }), $("#vocSeq").html(d.rememberNbr)) : 3 == h ? ($("#panelTitleInfo").html(d.bookName + " - Unit " + f[0].unitNbr + " - \u667a\u80fd\u542c\u5199"), d.correctWritingVocNbr = a.slideSeqNbr % n, d.currentTotalWritingNbr = d.correctWritingVocNbr, d.successWritingOfTry = 0, null == d && (d.totalWritingTry = 0), $("#totalWritingTry").val(d.totalWritingTry), $("#errorWritingVocNbr").val(d.currentTotalWritingNbr - d.correctWritingVocNbr), c = d.correctWritingVocNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: c
        }).attr("title", "\u7b2c " + d.correctWritingVocNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.correctWritingVocNbr)) : h == V ? ($("#panelTitleInfo").html(d.bookName + " - Unit " + f[0].unitNbr + " - \u542c\u8bfb\u8bad\u7ec3"), 1 == Z ? (d.rememberNbr = a.slideSeqNbr, d.totalReadingNbr = d.rememberNbr, d.readingFailTimes = 0, null == d && (d.totalReadingTry = 0), $("#unRememberNbr").val(d.totalReadingNbr - d.rememberNbr), $("#totalReadingTry").val(d.totalReadingTry), c = d.rememberNbr / f.length * 100 + "%", $("#studyScrollProgress").css({
            width: c
        }), $("#vocSeq").html(d.rememberNbr)) : (d.correctWritingVocNbr = a.slideSeqNbr, d.currentTotalWritingNbr = d.correctWritingVocNbr, d.successWritingOfTry = 0, null == d && (d.totalWritingTry = 0), $("#totalWritingTry").val(d.totalWritingTry), $("#errorWritingVocNbr").val(d.currentTotalWritingNbr - d.correctWritingVocNbr), c = d.correctWritingVocNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: c
        }).attr("title", "\u7b2c " + d.correctWritingVocNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.correctWritingVocNbr))) : h == N && ($("#panelTitleInfo").html(d.bookName), null != a && null != a.vocIndex && (d.rememberNbr = a.vocIndex % n, d.totalReadingNbr = d.rememberNbr, d.readingFailTimes = 0, null == d && (d.totalReadingTry = 0), $("#unRememberNbr").val(d.totalReadingNbr - d.rememberNbr), $("#totalReadingTry").val(d.totalReadingTry)), d.correctWritingVocNbr = 0, d.currentTotalWritingNbr = d.correctWritingVocNbr, d.successWritingOfTry = 0, null == d && (d.totalWritingTry = 0), $("#totalWritingTry").val(d.totalWritingTry), $("#errorWritingVocNbr").val(d.currentTotalWritingNbr - d.correctWritingVocNbr), c = b == ka ? d.correctWritingVocNbr / f.length * 100 + "%": d.rememberNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: c
        }).attr("title", "\u7b2c " + d.rememberNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.rememberNbr));
        var e, k = 0;
        e = void 0 != $("#current_module_unit").attr("latestVocIndex") ? $("#current_module_unit").attr("latestVocIndex") : 0;
        if (h == A) {
            c = f.length;
            for (var r = 0; r < f.length; r++)(f[r].isRead && f[r].isSpelled && y || f[r].isRead && !y) && k++
        } else for (c = l.length, r = 0; r < l.length; r++)(l[r].isRead && l[r].isSpelled && y || l[r].isRead && !y) && k++;
        e = c - e - k;
        $("#vocSeqUnFinish").html(e);
        $("#totalUnitVocNbr").html(c);
        $("#vocUnitProgress").css("display", "block")
    }
    function Hb() {
        var a = !1;
        if (null != d) {
            d.saveTime();
            var b = d.getReadingTime(),
            c = d.getWritingTime();
            36E3 <= b + c && (a = !0)
        }
        return a
    }
    function Ib() {
        null == la && (la = (new Date).getTime());
        return 36E3 <= ((new Date).getTime() - la) / 1E3
    }
    function zc() {
        Qa = setInterval(function() {
            fb += 1;
            Hb() ? ($("#door_exitUnitStudy").click(), gb(), ma()) : 30 < ((new Date).getTime() - la) / 1E3 ? ($("#door_exitUnitStudy").click(), Ib() && (gb(), ma())) : 0 == (fb + 1) % 10 && Jb()
        },
        6E4)
    }
    function ma() {
        clearInterval(Qa);
        Qa = null;
        fb = 0;
        document.onkeydown = null;
        la = document.onmousedown = null
    }
    function Jb() {
        try {
            $.ajax({
                type: "post",
                url: "/api/Ajax/AjaxHeartBeat",
                data: {},
                dataType: "json",
                cache: !1,
                success: function(a) {
                    a.success || ma()
                },
                error: function() {
                    m("\u597d\u50cf\u6389\u7ebf\u4e86\uff0c\u5237\u4e00\u4e0b\u7f51\u9875\u5427~", 3E3)
                }
            })
        } catch(a) {}
    }
    function Kb() {
        var a = Lb();
        $("#halfRememberNbr").html(a.halfReadNbr);
        $("#halfWritingNbr").html(a.halfSpellNbr);
        $("#continueReadFailNbr").html(a.continueReadFailNbr);
        $("#continueWriteFailNbr").html(a.continueSpellFailNbr)
    }
    function Mb() {
        $("#goNextArea").fadeIn();
        $("#wordConfirmArea").css("display", "none")
    }
    function ba(a) {
        var b, c, e = 0;
        c = void 0 != $("#current_module_unit").attr("latestVocIndex") ? $("#current_module_unit").attr("latestVocIndex") : 0;
        if (h == A) {
            b = f.length;
            for (var k = 0; k < f.length; k++)(f[k].isRead && f[k].isSpelled && y || f[k].isRead && !y) && e++
        } else for (b = l.length, k = 0; k < l.length; k++)(l[k].isRead && l[k].isSpelled && y || l[k].isRead && !y) && e++;
        c = b - c - e;
        $("#vocSeqUnFinish").html(c);
        $("#totalUnitVocNbr").html(b);
        a == na ? ($("#unRememberNbr").val(d.totalReadingNbr - d.rememberNbr), $("#totalReadingTry").val(d.totalReadingTry), a = d.rememberNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: a
        }).attr("title", "\u7b2c " + d.rememberNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.rememberNbr)) : a == ka ? ($("#totalWritingTry").val(d.totalWritingTry), $("#errorWritingVocNbr").val(d.currentTotalWritingNbr - d.correctWritingVocNbr), a = d.correctWritingVocNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: a
        }).attr("title", "\u7b2c " + d.correctWritingVocNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.correctWritingVocNbr)) : a == Ac && (Z ? ($("#unRememberNbr").val(d.totalReadingNbr - d.rememberNbr), $("#totalReadingTry").val(d.totalReadingTry), a = d.rememberNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: a
        }).attr("title", "\u7b2c " + d.rememberNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.rememberNbr)) : ($("#totalWritingTry").val(d.totalWritingTry), $("#errorWritingVocNbr").val(d.currentTotalWritingNbr - d.correctWritingVocNbr), a = d.correctWritingVocNbr / f.length * 100 + "%", $("#studyScrollProgress").animate({
            width: a
        }).attr("title", "\u7b2c " + d.correctWritingVocNbr + " \u4e2a\u5355\u8bcd / \u5171 " + f.length + " \u4e2a\u5355\u8bcd"), $("#vocSeq").html(d.correctWritingVocNbr)))
    }
    function Nb() {
        g.isRead = !0;
        g.finishReadingTime = null != g.finishReadingTime ? g.finishReadingTime + M - 1 - p.getReadingTime() : M - 1 - p.getReadingTime();
        d.totalReadingTry++;
        g.readFailTimeCount--;
        if (0 >= g.readFailTimeCount) {
            g.readFailTimeCount = 0;
            g.isReadSuccess = !0;
            d.rememberNbr < f.length && d.rememberNbr++;
            for (var a = !1,
            b = 0; b < w.length; b++) if (w[b] == g.slideSeqNbr) {
                w.splice(b, 1);
                a = !0;
                break
            }
            a || d.totalReadingNbr < f.length && d.totalReadingNbr++
        }
        null == g.isFstReadSuccess && (g.isFstReadSuccess = !0);
        g.isLastReadSuccess = !0
    }
    function hb() {
        g.isRead = !0;
        d.totalReadingTry++;
        g.finishReadingTime = null != g.finishReadingTime ? g.finishReadingTime + M - 1 - p.getReadingTime() : M - 1 - p.getReadingTime();
        for (var a = !1,
        b = 0; b < w.length; b++) if (w[b] == g.slideSeqNbr) {
            a = !0;
            break
        }
        a || (w.push(g.slideSeqNbr), d.totalReadingNbr < f.length && d.totalReadingNbr++);
        null == g.isFstReadSuccess && (g.isFstReadSuccess = !1);
        null == g.isLastReadSuccess || g.isLastReadSuccess || (g.continueReadFailTimes++, 3 > g.readFailTimeCount && g.readFailTimeCount++);
        g.readFailTimes++;
        3 > g.readFailTimeCount && g.readFailTimeCount++;
        d.readingFailTimes++;
        g.isLastReadSuccess = !1
    }
    function Ob() {
        g.isSpelled = !0;
        g.spellTimes++;
        null == g.isFstSpellSuccess && (g.isFstSpellSuccess = !0);
        null == g.isLastSpellSuccess || g.isLastSpellSuccess || (g.isHalfSpelling = !0);
        d.totalWritingTry++;
        d.successWritingOfTry++;
        g.spellFailTimeCount--;
        if (0 > g.spellFailTimeCount) {
            g.spellFailTimeCount = 0;
            g.isSpellSuccess = !0;
            d.correctWritingVocNbr < f.length && d.correctWritingVocNbr++;
            for (var a = !1,
            b = 0; b < u.length; b++) if (u[b] == g.slideSeqNbr) {
                u.splice(b, 1);
                a = !0;
                break
            }
            a || d.currentTotalWritingNbr < f.length && d.currentTotalWritingNbr++
        }
        g.isLastSpellSuccess = !0;
        g.isContinueSpellFail = !1;
        10 < d.totalWritingTry - d.nextPointOfStartToSpellCorrect && (a = P - 200, P = 1E3 > a ? 1E3: a, d.nextPointOfStartToSpellCorrect = d.totalWritingTry);
        return ! 1
    }
    function Pb(a, b) {
        $("#wsWriting").attr("readonly", !0);
        g = f[b % n];
        if (a.isLastSpellSuccess) 0 == W.handlerCount && (W.handlerCode = setTimeout(function() {
            ib(g)
        },
        500), W.handlerCount++);
        else {
            var c = ta;
            4 > a.spelling.length && (c /= 2);
            0 == W.handlerCount && (W.handlerCode = setTimeout(function() {
                ib(g)
            },
            c), W.handlerCount++)
        }
    }
    function jb() {
        var a = !1;
        f[f.length - 1].isSpelled && 0 == u.length && (a = !0);
        if (!a) {
            var b = !1;
            do
            if (0 != Math.floor(10 * Math.random() % 2)) {
                if (0 < f.length && null != g && null != f[f.length - 1] && !f[f.length - 1].isSpelled) {
                    for (var c = g.slideSeqNbr,
                    b = g; f[c % n].isSpelled;) c++;
                    Pb(b, c);
                    b = !0
                }
            } else if (c = 0, 0 < u.length) {
                do {
                    var e = u[Math.floor(Math.random() * u.length)];
                    if (8 > f[e % n].spellTimes) {
                        b = g;
                        Pb(b, e);
                        b = !0;
                        break
                    }
                    c++
                } while ( 8 > c );
                8 <= c && (a = b = !0, u.length = 0)
            }
            while (!b)
        }
        a && (wa(), Math.ceil(l.length / n) > ++x ? (E = E.concat(f), f = l.slice(x * n, (x + 1) * n), w = [], u = [], g = f[0], Y(g), d.pauseClock(), $("#writingSection").css("display", "none"), $("#writingSectionStatics").css("display", "none"), $("#startSection").fadeIn(), $("#startUnitStudy").focus(), 0 != g.vocIndex && $("#startInfo").css("display", "inline").html("\u2022 \u8fdb\u5165\u4e0b\u4e00\u7ec4\uff0c\u7ee7\u7eed\u5b66\u4e60\uff0cgo! go! go!")) : (a = Lb(), d.pauseClock(), $("#halfRememberNbr").html(a.halfReadNbr), $("#halfWritingNbr").html(a.halfSpellNbr), $("#continueReadFailNbr").html(a.continueReadFailNbr), $("#continueWriteFailNbr").html(a.continueSpellFailNbr), Bc()))
    }
    function Lb() {
        var a = {},
        b = [];
        h == A ? b = arrayDeepCopy(f) : h == N ? b = arrayDeepCopy(f) : h == D && (b = arrayDeepCopy(l));
        if (null != b && 0 < b.length) {
            for (var c = 0,
            e = 0,
            d = 0,
            r = 0,
            g = 0; g < b.length; g++) b[g].isHalfReading && c++,
            b[g].isHalfSpelling && e++,
            0 < b[g].continueReadFailTimes && d++,
            0 < b[g].continueSpellFailTimes && r++;
            a.halfReadNbr = c;
            a.halfSpellNbr = e;
            a.continueReadFailNbr = d;
            a.continueSpellFailNbr = r
        } else a.halfReadNbr = 0,
        a.halfSpellNbr = 0,
        a.continueReadFailNbr = 0,
        a.continueSpellFailNbr = 0;
        return a
    }
    function Qb() {
        $("#checkWriting").children("img").eq(0).fadeIn()
    }
    function kb() {
        if (0 < z.length && K < z.length) {
            var a = z[K].width(),
            b = 0,
            c = 0,
            b = .5 < Math.random() ? 280 + Math.floor(Math.random() * (380 - a)) : Math.floor(Math.random() * (580 - a)),
            c = Math.floor(Math.random() * (385 - z[K].height()));
            K != z.length - 1 ? z[K].fadeIn(800).delay(2E3).animate({
                left: b,
                top: "-350px",
                opacity: "0.1"
            },
            1500, "linear", kb).delay(2E3).fadeOut().animate({
                left: b,
                top: c,
                opacity: "1"
            }) : z[K].fadeIn(800).delay(2E3).animate({
                left: b,
                top: "-350px",
                opacity: "0.1"
            },
            1500, "linear", kb).animate({
                left: b,
                top: c,
                opacity: "1"
            });
            z[K].omDraggable({
                containment: "#cardContainer"
            });
            ca || $.getScript("/content/js/jquery.flippy.min.js",
            function() {
                ca = !0
            });
            lb(z[K]);
            xa(z[K]);
            mb(z[K]);
            K++
        } else for (a = K = 0; a < z.length; a++) z[a].removeClass("card-normal-n"),
        z[a].removeClass("card-small-n"),
        z[a].removeClass("card-large-n"),
        z[a].fadeIn()
    }
    function Cc() {
        if (null != l && 0 < l.length) for (var a = 0; a < l.length; a++) l[a].isFstReadSuccess || (l[a].unitReviewLevel += 3),
        l[a].isFstSpellSuccess || (l[a].unitReviewLevel += 3),
        l[a].unitReviewLevel = l[a].unitReviewLevel + l[a].continueReadFailTimes + 2 * l[a].continueSpellFailTimes;
        var b = [],
        b = arrayDeepCopy(l);
        b.sort(Dc);
        30 < b.length && (b = b.slice(0, 30));
        var c = $('\x3cdiv name\x3d"smallVocCard" style\x3d"display:none; position:absolute; z-index:2;"  title\x3d"" spelling\x3d""  flip\x3d"0"\x3e\x3cdiv class\x3d"card-shape cardGray" mark\x3d"" style\x3d"overflow: hidden;" title\x3d""\x3e\x3ca \x3e\x3cspan class\x3d"f24-orange1 word"\x3e\x3c/span\x3e\x3cspan class\x3d"f14-w yinbiao"\x3e\x3c/span\x3e \x3c/a\x3e\x3cdiv class\x3d"vocSound" style\x3d"display:none;height: 21px;position: absolute;right:0px; bottom:0px; padding: 3px;"\x3e\x3cimg src\x3d"/content/image/volume-small-green.png" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
        e = $('\x3cdiv name\x3d"normalVocCard" style\x3d"display:none; position:absolute; z-index:2;"  title\x3d"" spelling\x3d""  flip\x3d"0"\x3e\x3cdiv class\x3d"card-shape cardGray" mark\x3d"" style\x3d"overflow: hidden;"title\x3d""\x3e\x3ca \x3e\x3cspan class\x3d"f24-orange1 word"\x3e\x3c/span\x3e\x3cspan class\x3d"f14-w yinbiao" \x3e\x3c/span\x3e \x3c/a\x3e\x3cdiv class\x3d"vocSound" style\x3d"display:none;height: 21px;position: absolute;right:0px; bottom:0px; padding: 3px;"\x3e\x3cimg src\x3d"/content/image/volume-small-green.png" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
        d = $('\x3cdiv name\x3d"largeVocCard" style\x3d"display:none; position:absolute; z-index:2; "  title\x3d"" spelling\x3d""  flip\x3d"0"\x3e\x3cdiv class\x3d"card-shape cardGray" mark\x3d"" style\x3d"overflow: hidden;"title\x3d""\x3e\x3ca  \x3e\x3cspan class\x3d"f24-orange1 word"\x3e\x3c/span\x3e\x3cspan class\x3d"f14-w yinbiao" \x3e\x3c/span\x3e \x3c/a\x3e\x3cdiv class\x3d"vocSound" style\x3d"display:none;height: 21px;position: absolute;right:0px; bottom:0px; padding: 3px;"\x3e\x3cimg src\x3d"/content/image/volume-small-green.png" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
        f = b.length;
        if (null != b && 0 < b.length) {
            var g = 0,
            ja = 0,
            h = $("#cardContainer").width(),
            n = $("#cardContainer").height();
            z = [];
            for (a = K = 0; a < b.length; a++) {
                var m = {};
                0 < b[a].unitReviewLevel ? 0 == a ? (m = $(d).clone(), $(m).addClass("card-large-n")) : 0 < a && a < .5 * f ? (m = $(e).clone(), $(m).addClass("card-normal-n")) : (m = $(c).clone(), $(m).addClass("card-small-n")) : (m = $(e).clone(), $(m).addClass("card-normal-n"));
                var g = b[a].spelling,
                ja = b[a].meaning,
                q = b[a].soundMarkUs;
                null != ja && $(m).attr("title", ja);
                null != q && $(m).attr("mark", q);
                null != g && $(m).attr("spelling", g);
                13 < g.length ? "largeVocCard" == $(m).attr("name") ? $(m).find("span").eq(0).css("font-size", "20px").html(g) : "normalVocCard" == $(m).attr("name") ? $(m).find("span").eq(0).css("font-size", "14px").html(g) : $(m).find("span").eq(0).css("font-size", "12px").html(g) : $(m).find("span").eq(0).html(g);
                g = (h - $(m).width()) / 2;
                ja = (n - $(m).height()) / 2;
                $(m).css({
                    left: g,
                    top: ja
                });
                $(m).appendTo($("#cardMiddleContainer"));
                z.push($(m))
            }
            z.sort(function() {
                return.5 < Math.random() ? -1 : 1
            })
        }
        $("#seperateSectionTwo").css("display", "none");
        $("#unitReview").fadeIn();
        kb()
    }
    function Dc(a, b) {
        return b.unitReviewLevel - a.unitReviewLevel
    }
    function Rb() {
        0 < f.length && (g = f[0], ib(g));
        $("#studyScrollProgress").css("width", 0);
        $("#vocSeq").html(0);
        $("#seperateSectionOne").css("display", "none");
        $("#writingSection").fadeIn();
        $("#readingSectionStatics").hide();
        $("#writingSectionStatics").show();
        $("#wsMeaning").fadeIn();
        $("#showWsMeaning").html("\u8bcd\u4e49\u9690\u85cf");
        $("#showWsMeaning").attr("on", 0);
        $("#wsWriting").focus();
        oa = !1;
        d.startWritingTimer(TOTAL_WRITING_TIME)
    }
    function Ec(a) {
        if (!ya && null != a) {
            var b = (5 > a.length ? 5 : a.length) * P;
            "A" > a.charAt(0) || "Z" < a.charAt(0) || b++;
            null == X && (X = new SingletonTimeoutHandler);
            0 == X.handlerCount && (X.handlerCode = setTimeout(function() {
                X.handlerCount++;
                $("#wsNext").click();
                var a = d.totalWritingTry,
                b = d.successWritingOfTry;
                if (a - b > d.lastGapOfTotalAndSuccess) {
                    var k = a - d.lastPointOfSpellingTimeout;
                    1 == k || 2 == k ? (Ra++, 1 < Ra && (k = P + 200, P = 5E3 < k ? 5E3: k, Ra = 0)) : Ra = 1;
                    d.lastPointOfSpellingTimeout = d.totalWritingTry
                }
                d.lastGapOfTotalAndSuccess = a - b
            },
            b))
        }
    }
    function wa() {
        null != X && null != X.handlerCode && (window.clearTimeout(X.handlerCode), X.handlerCount = 0)
    }
    function ib(a) {
        0 < W.handlerCount && (window.clearTimeout(W.handlerCode), W.handlerCount = 0);
        $("#wsWriting").attr("readonly", !1);
        $("#wsWriting").focus();
        if (oa && 0 < a.readFailTimes) var b = setTimeout(function() {
            "" == $("#wsWriting").val() && $("#wsMeaning").fadeIn().delay(2E3).fadeOut();
            window.clearTimeout(b)
        },
        1500);
        $("#checkWriting").children("img").hide();
        a.isContinueSpellFail ? (ya = !0, $("#wsStardardVocShowing").show()) : (ya = !1, $("#wsStardardVocShowing").hide());
        var c = $.trim(clearNonEnglishSymbolForString(a.spelling));
        $("#wsStardardVoc").val(c);
        $("#wsStardardVocShowing").html(c);
        $("#wsWriting").val("");
        $("#wsNext").show();
        null == c || "" == c || "A" > c.charAt(0) || "Z" < c.charAt(0) ? $("#wsMeaning").html(a.meaning) : oa ? $("#wsMeaning").html('\x3cfont style\x3d"color:#FF0000"\x3e\u63d0\u793a\uff1a\u9996\u5b57\u6bcd\u5927\u5199 \uff5e\uff5e\x3c/font\x3e').fadeIn().delay(1E3).fadeOut(function() {
            $(this).html(a.meaning)
        }) : $("#wsMeaning").html('\x3cfont style\x3d"color:#FF0000"\x3e\u63d0\u793a\uff1a\u9996\u5b57\u6bcd\u5927\u5199 \uff5e\uff5e\x3c/font\x3e').fadeIn().delay(1E3).fadeOut(function() {
            $("#wsMeaning").html(a.meaning).fadeIn()
        });
        Ma(a, $("#wordAudio_ws_content"), "word_audio_ws_embed_v2");
        $("#wordAudio_ws_symbol").click();
        wa();
        Ec(c)
    }
    function nb() {
        initialThemeMenu();
        $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxGetUserBook",
            data: {},
            dataType: "json",
            cache: !1,
            success: function(a) {
                Sa && (Sa = !1, $("#pbar").omProgressbar("value", 100), setTimeout(Sb, 300));
                if (a.success) {
                    var b = new String,
                    c = new String,
                    e = new String,
                    d = !1; (new Date).getTime();
                    for (var f = 0; f < a.books.length; f++) {
                        var g = $("\x3cspan\x3e\x3cspan\x3e\x3ca class\x3d'bookitem' code\x3d'" + a.books[f].moduleCode + "'\x3e" + a.books[f].bookName + "\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e");
                        a.books[f].outDate ? (g.find("a").css("color", "rgb(185, 181, 181)"), !d && a.books[f].currentStudyBook ? (T = a.books[f], d = !0, c = $(g).html() + c) : c += $(g).html(), e += "\x3cspan\x3e\x3clabel class\x3d'outDateBookLabel'\x3e" + a.books[f].bookName + "\x3c/label\x3e\x3ca code\x3d'" + a.books[f].moduleCode + "' style\x3d'color:#30c0f5; cursor:pointer;'\x3e+\u7eed\u8ba2\x3c/a\x3e\x3c/span\x3e") : !d && a.books[f].currentStudyBook ? (T = a.books[f], d = !0, a.books[f].currentPosition.isAllFinished ? g.find("a").css("color", "#67B239") : g.find("a").css("color", "#fe9400"), b = $(g).html() + b) : (null != a.books[f].currentPosition ? a.books[f].currentPosition.isAllFinished ? g.find("a").css("color", "#67B239") : g.find("a").css("color", "#fe9400") : g.find("a").css("color", "#737373"), b += $(g).html())
                    }
                    d ? Ta(T) : Ta(null);
                    b += c;
                    "" == e && (e = "\x3cspan style\x3d'width:230px;'\x3e\u3010\u6ca1\u6709\u8bfe\u7a0b\u9700\u8981\u7eed\u8ba2\u3011\x3c/span\x3e");
                    $("#allcourses").html(e);
                    $("#allcourses a").unbind("click").bind("click",
                    function() {
                        $("#bookcode_registerBookBox").val($(this).attr("code"));
                        var a = $(this).siblings("label").html();
                        $("#registerBookBox").find(".study-theme").html("\u4f7f\u7528\u5b66\u4e60\u5361\u5f00\u901a\u8bfe\u7a0b(" + a + ")");
                        a = $("#overlayPage");
                        null != a && 0 < a.length || (a = $('\x3cdiv id\x3d"overlayPage" class\x3d"new-overlay" style\x3d"display:none; z-index: 1001;"\x3e\x3c/div\x3e'), $(a).appendTo("body"));
                        $(a).fadeIn();
                        var b = $("#registerBookBox").width(),
                        a = $("#registerBookBox").height(),
                        b = (pageWidth - b) / 2,
                        a = (pageHeight - a) / 2;
                        $("#registerBookBox").css({
                            left: b,
                            top: a
                        }).fadeIn()
                    });
                    "" == b && (b = "\x3cspan id\x3d'nocourse_mycourse'\x3e\x3ca href\x3d'/UserCenter/Subscribe'\x3e\u3010\u8fd8\u672a\u6fc0\u6d3b\u8bfe\u7a0b\uff0c\u73b0\u5728\u53bb\u6fc0\u6d3b\u3011\x3c/a\x3e\x3c/span\x3e");
                    $("#mycourse").html(b);
                    $("#nocourse_mycourse").unbind("click").bind("click",
                    function() {
                        $("#courseIntroduceLink").click()
                    });
                    $("#mycourse span[id!\x3dnocourse_mycourse] a").unbind("click").bind("click",
                    function() {
                        var a = $(this).attr("code"),
                        b = $(this);
                        if (null != v && 0 < v.length) {
                            var c = !1;
                            $(v).each(function(e, d) {
                                a == d.moduleCode && (Tb(b, d), c = !0)
                            });
                            c || ea(b)
                        } else ea(b)
                    })
                } else Ub();
                Fc()
            },
            error: function() {
                Ub()
            }
        })
    }
    function Ub() {
        $("#nocourse_mycourse").html("").append(za('\x3ca style\x3d"color:red;"\x3e\u2299\ufe4f\u2299\uff0c\u2192\u70b9\u6211\uff0c\u91cd\u65b0\u83b7\u53d6\u8bfe\u7a0b\x3c/a\x3e', nb));
        $("#handler-content").html($("#handerPromptInfo").html());
        $("#handler-content").find("div [name\x3dhanderPromptInfoDetail]").html("\u7cdf\u7cd5\uff0c\u7f51\u7edc\u51fa\u95ee\u9898\u4e86 ").append(za('\x3ca style\x3d"color:green;"\x3e\u3010\u70b9\u6211\u3011\uff0c\u4fee\u590d\u9519\u8bef~\x3c/a\x3e', nb))
    }
    function za(a, b, c) {
        a = $(a);
        void 0 == c || null == c ? $(a).click(function() {
            b();
            $(this).unbind()
        }) : $(a).click(function() {
            b(c);
            $(this).unbind()
        });
        return $(a)
    }
    function Vb(a) {
        return "unit" == a.toLowerCase() ? "Unit": "module" == a.toLowerCase() ? "Module": "day" == a.toLowerCase() ? "Day": "lesson" == a.toLowerCase() ? "Lesson": "Unit"
    }
    function Ta(a) {
        $("#handle-title").html("\u5355\u8bcd\u57fa\u7840");
        $("#sub-handle-title").html("");
        if (null != a && null != a.currentPosition) {
            var b = Vb(a.unitType);
            $("#handler-content").html($("#content_studytrace").html()).hide().fadeIn(800);
            $("#handler-content div[name\x3dcenterUnit_studytrace]").attr("bookcode", a.moduleCode + "-" + a.currentPosition.unitNbr);
            $("#handler-content div[name\x3dcenterUnit_studytrace]").find("span").html(b + " " + a.currentPosition.unitNbr);
            a.currentPosition.unitNbr < a.totalUnitNbr ? ($("#handler-content div[name\x3dnextUnit_studytrace]").find("span").html(b + " " + (a.currentPosition.unitNbr + 1)), $("#handler-content div[name\x3dnextUnit_studytrace]").attr("bookcode", a.moduleCode + "-" + (a.currentPosition.unitNbr + 1))) : ($("#handler-content div[name\x3dnextUnit_studytrace]").find("span").html("\u8be5" + b + "\u4e3a\u672c\u4e66Last " + b), $("#handler-content div[name\x3dnextUnit_studytrace]").find("img").remove(), $("#handler-content div[name\x3dnextUnit_studytrace]").removeClass("unstudy-orange").addClass("solid-gray2"));
            var c = a.bookName,
            c = 8 < c.length ? c.substr(0, 8) + "..": c;
            $("#handler-content div[name\x3dbook_studytrace]").attr("title", a.bookName).find("span").html(c);
            $("#handler-content div[name\x3dbook_studytrace]").attr("code", a.moduleCode);
            100 > $("#handler-content div[name\x3dspelling_studytrace]").width() && $("#handler-content div[name\x3dspelling_studytrace]").css("width", "100px");
            $("#handler-content div[name\x3dspelling_studytrace]").find("span").html(a.currentPosition.spelling);
            c = "";
            c = 1 == a.currentPosition.isFinished ? "\u5df2\u5b8c\u6210": "\u672a\u5b8c\u6210";
            $("#handler-content div[name\x3disFinished_studytrace]").find("span").html(c);
            $("#handler-content div[name\x3dspeak_studytrace]").find("span").html(b + " " + a.currentPosition.unitNbr);
            $("#handler-content div[name\x3dspeak_studytrace]").attr("bookcode", "sp-" + a.moduleCode + "-" + a.currentPosition.unitNbr);
            $("#handler-content div[name\x3dcenterUnit_studytrace]").unbind("click").bind("click",
            function() {
                Ka($(this).attr("bookcode"))
            });
            $("#handler-content div[name\x3dbook_studytrace]").unbind("click").bind("click",
            function() {
                var a = $(this).attr("code"),
                b = $(this);
                if (null != v && 0 < v.length) {
                    var c = !1;
                    $(v).each(function(e, d) {
                        a == d.moduleCode && (Tb(b, d), c = !0)
                    });
                    c || ea(b)
                } else ea(b)
            });
            $("#handler-content div[name\x3dspeak_studytrace]").click(function() {
                Cb($(this).attr("bookcode"))
            });
            if ($.browser.msie && 9 >= $.browser.version) return ! 1;
            $("#handler-content div[name\x3dcenterUnit_studytrace]").position();
            $("#handler-content div[name\x3dcenterUnit_studytrace]").width();
            $("#handler-content div[name\x3dcenterUnit_studytrace]").height();
            $("#handler-content div[name\x3dspelling_studytrace]").position();
            $("#handler-content div[name\x3dspelling_studytrace]").width();
            $("#handler-content div[name\x3dspelling_studytrace]").height();
            $("#handler-content div[name\x3dbook_studytrace]").position();
            $("#handler-content div[name\x3dbook_studytrace]").height();
            $("#handler-content div[name\x3dnextUnit_studytrace]").position();
            $("#handler-content div[name\x3disFinished_studytrace]").position();
            $("#handler-content div[name\x3disFinished_studytrace]").width();
            $("#handler-content div[name\x3dspeak_studytrace]").position()
        } else $("#handler-content").html('\x3cdiv class\x3d"book-unit radius"\x3e\u5355\u8bcd\u57fa\u7840\uff1a\u4ee5\u5355\u8bcd\u4e3a\u6838\u5fc3\uff0c\u5bf9\u5355\u8bcd\uff0c\u53e5\u5b50\u7b49\u8fdb\u884c\u57fa\u7840\u4e0e\u63d0\u9ad8\u5b66\u4e60\uff0c\u5e76\u4e14\u53ef\u5c31\u5168\u4e66\u8303\u56f4\u8fdb\u884c\u667a\u80fd\u542c\u5199\u3002\x3c/div\x3e'),
        $("#handler-content").append('\x3cdiv style\x3d"text-align:center;margin-top:30px;"\x3e\x3cimg style\x3d"height:280px; padding-top:50px;" src\x3d"/content/image/children_playing.png" alt\x3d"\u6ca1\u6709\u4e0a\u4e00\u6b21\u7684\u5b66\u4e60\u8bb0\u5f55\u3002" /\x3e\x3c/div\x3e').hide().fadeIn(),
        $("#handler-content").append('\x3cdiv style\x3d"color:#FF6600; text-align:center;font-size:20px; padding-top:20px"\x3e\u6682\u65f6\u6ca1\u6709\u4e0a\u4e00\u6b21\u7684\u5b66\u4e60\u8bb0\u5f55\x3c/div\x3e')
    }
    function Gc(a) {
        if (!q || $("#current_module_unit").val() != a || 3 != h) {
            R();
            $("#unit_study_slide").append($($("#loading0").html()).css({
                position: "absolute",
                width: "100%",
                "margin-top": "10px"
            }));
            q = !1;
            h = 3;
            var b = {
                bookName: "intelligentDication",
                moduleCode: a,
                unitNbr: 1,
                totalUnitNbr: 1
            };
            null != d && d.pauseClock();
            d = new StudyPanel(b);
            $.ajax({
                type: "post",
                url: "/api/Ajax/AjaxGetIntelligentDictation",
                data: {
                    moduleCode: a
                },
                dataType: "json",
                cache: !1,
                success: function(b) {
                    $("#unit_study_slide").find(".loading0").remove();
                    f.length = 0;
                    l.length = 0;
                    if (b.success) {
                        I = b.studytoken;
                        $("#current_module_unit").val(a);
                        w = [];
                        u = [];
                        if (void 0 != b.data) {
                            $(b.data).each(function(a, b) {
                                var c = new Slide(b, a);
                                f.push(c)
                            });
                            f.sort(function() {
                                return.5 < Math.random() ? -1 : 1
                            });
                            for (b = 0; b < f.length; b++) f[b].slideSeqNbr = b;
                            n = f.length
                        }
                        0 < f.length ? (g = f[0], Y(g), q = !0, $("#panelTitleInfo").html("\u667a\u80fd\u542c\u5199"), $("#startSection").css("display", "none"), $("#readingSectionStatics").css("display", "none"), $("#seperateSectionOne").find("label").eq(0).html('\u2022 \u667a\u80fd\u542c\u5199\uff1a\u542c\u5199\u8fd1\u671f\x3cfont style\x3d"font-size:26px; color:#05ad78;"\x3e\u62fc\u5199\x3c/font\x3e\u51fa\u9519\u9891\u7387\u8f83\u9ad8\u7684\u5355\u8bcd\u3002'), $("#toNextStep_NonOrder").hide(), $("#toNextStep").attr("title", ""), $("#toNextStep").val("\u5f00\u59cb\u542c\u5199"), $("#seperateSectionOne").fadeIn()) : ($("#startInfo").html("\u2022 \u76ee\u524d\u6682\u65f6\u6ca1\u6709\u5355\u8bcd\u9700\u8981\u542c\u5199...").css("display", "block"), $("#cancelUnitStudy").css("display", "inline"), $("#wsWriting").blur())
                    } else 1 == b.condition ? ($("#cancelUnitStudy").css("display", "inline"), $("#panelTitleInfo").html("\u5355\u8bcd\u542c\u5199\u4e2d...")) : m(b.msg)
                },
                error: function() {
                    d = null
                }
            })
        }
        $("#studyBox").omDialog("open")
    }
    function Wb(a) {
        var b = $('\x3cdiv name\x3d"book" style\x3d"display:none; padding-bottom:20px;"\x3e\x3c/div\x3e');
        $(b).attr("id", a.moduleCode + "_book");
        var c = "",
        e = !1;
        $.browser.webkit && (e = !0, c = '\x26nbsp;|\x26nbsp;\x3clabel name\x3d"btnSpeakStudy" on\x3d"0" class\x3d"study-change gray-text" value\x3d"\u542c\u8bfb\u8bad\u7ec3"\x3e\u542c\u8bfb\u8bad\u7ec3\x3c/label\x3e');
        var d = '\x3cdiv name\x3d"BasicStudy"\x3e\x3cdiv name\x3d"basicStudySubDiv" style\x3d"padding-top: 7px; padding-bottom: 7px; max-height: 400px;" class\x3d"book-unit2 radius"\x3e',
        f = '\x3cdiv name\x3d"UnitTestStudy" style\x3d"display:none;"\x3e\x3cdiv name\x3d"unitTestStudySubDiv" style\x3d"padding-top: 7px; padding-bottom: 7px; max-height: 400px;" class\x3d"book-unit2 radius"\x3e',
        g = '\x3cdiv name\x3d"SpeakStudy" style\x3d"display:none;"\x3e\x3cdiv name\x3d"speakStudySubDiv" style\x3d"padding-top: 7px; padding-bottom: 7px; max-height: 400px;" class\x3d"book-unit2 radius"\x3e',
        l = "",
        h = '\x3cdiv name\x3d"SentenceStudy" style\x3d"display:none;"\x3e\x3cdiv name\x3d"sentenceStudySubDiv" style\x3d"padding-top: 7px; padding-bottom: 7px; max-height: 400px;" class\x3d"book-unit2 radius"\x3e',
        n = 0;
        if (0 < a.CourseUnits.length) {
            $(b).attr("totalUnitNbr", a.CourseUnits.length);
            $(b).attr("startFrom", a.startFrom);
            var q = Vb(a.unitType),
            p = a.startFrom,
            v = a.studyMode,
            Hc = a.CourseUnits.length;
            $(a.CourseUnits).each(function(b, c) {
                var e = "unstudy-gray";
                1 == v && 1 == $("#UserState").val() && (e = "solid-gray2");
                var k = "solid-gray2",
                r = "solid-gray2"; - 1 == c.IsFinished ? e = "unstudy-gray": 2 == c.IsFinished ? (e = "studied-green-over", k = r = "unstudy-gray", n++) : 0 == c.IsFinished && (e = "studing-orange", n++);
                1 == c.IsTested ? k = "studied-green-over": 2 == c.IsTested ? k = "studing-orange": -1 == c.IsTested && (k = "studynopass-orange");
                var G = "s-" + a.moduleCode + "-" + (b + p),
                m = "t-" + a.moduleCode + "-" + (b + p),
                ob = store.get(a.moduleCode + "-" + (b + p)),
                G = store.get(G),
                m = store.get(m);
                null != ob && "undefined" != ob && (e = ob);
                null != G && "undefined" != G && (r = G);
                null != m && "undefined" != m && (k = m);
                d += '\x3cdiv id\x3d"' + a.moduleCode + "-" + (b + p) + '" isfinished\x3d"' + c.IsFinished + '" name\x3d"vocUnit" class\x3d"tile-bt-large unit-showitem ' + e + ' " style\x3d"display: block;"\x3e\x3ca class\x3d"gradient"\x3e \x3cspan class\x3d"font16_6"\x3e' + q + " " + (b + p) + "\x3c/span\x3e \x3c/a\x3e\x3c/div\x3e";
                l += '\x3cdiv unitnbr\x3d"' + (b + p) + '" name\x3d"vocSmallUnit" ontest\x3d"0" class\x3d"tile-bt-small unit-showitem unstudy-orange" style\x3d"display: block;"\x3e\x3ca class\x3d"gradient"\x3e \x3cspan class\x3d"light-text"\x3e' + q + " " + (b + p) + "\x3c/span\x3e \x3c/a\x3e\x3c/div\x3e";
                f += '\x3cdiv id\x3d"t-' + a.moduleCode + "-" + (b + p) + '" isFinished\x3d"' + c.IsTested + '" name\x3d"unitTest" class\x3d"tile-bt-large shadow-gray unit-showitem ' + k + ' " style\x3d"display: block; position:relative"\x3e\x3ca class\x3d"gradient"\x3e \x3cspan class\x3d"light-text"\x3e' + q + " " + (b + p) + "\x3c/span\x3e \x3c/a\x3e\x3c/div\x3e";
                g += '\x3cdiv id\x3d"sp-' + a.moduleCode + "-" + (b + p) + '" isFinished\x3d"' + c.IsFinished + '" name\x3d"unitSpeak" class\x3d"tile-bt-large shadow-gray unit-showitem ' + r + ' " style\x3d"display: block;"\x3e\x3ca class\x3d"gradient"\x3e \x3cspan class\x3d"light-text"\x3e' + q + " " + (b + p) + "\x3c/span\x3e \x3c/a\x3e\x3c/div\x3e";
                h += '\x3cdiv id\x3d"s-' + a.moduleCode + "-" + (b + p) + '" isfinished\x3d"' + c.IsFinished + '" name\x3d"sentenceTest" class\x3d"tile-bt-large unit-showitem ' + r + ' " style\x3d"display: block;"\x3e\x3ca class\x3d"gradient"\x3e \x3cspan class\x3d"font16_6"\x3e' + q + " " + (b + p) + "\x3c/span\x3e \x3c/a\x3e\x3c/div\x3e"
            })
        } else u = "",
        d = '\x3cdiv style\x3d"text-align: center;font-size: 20px;padding-top: 20px;"\x3e\u672c\u4e66\u6682\u65f6\u6ca1\u6709\u53ef\u5b66\u4e60\u7684\u5355\u5143\uff0c\u4e0d\u597d\u610f\u601d\u3002\x3c/div\x3e',
        $("#handler-content").html('\x3cdiv style\x3d"text-align:center;margin-top:30px;"\x3e\x3cimg style\x3d"height:280px; padding-top:50px;" src\x3d"/content/image/children_playing.png" alt\x3d"\u672c\u4e66\u6682\u65f6\u6ca1\u6709\u53ef\u5b66\u4e60\u7684\u5355\u5143" /\x3e\x3c/div\x3e').hide().fadeIn();
        d += "\x3c/div\x3e\x3c/div\x3e";
        f += "\x3c/div\x3e\x3c/div\x3e";
        g += "\x3c/div\x3e\x3c/div\x3e";
        h += "\x3c/div\x3e\x3c/div\x3e";
        e && (d += g);
        var d = d + f,
        d = d + h,
        u;
        u = '\x3cdiv class\x3d"book-intro"\x3e\x3clabel class\x3d"gray-text" style\x3d"font-family:\u5fae\u8f6f\u96c5\u9ed1;font-size:14px;"\x3e\x3clabel name\x3d"btnBasicStudy" on\x3d"1" class\x3d"study-change study-change-active" value\x3d"\u5355\u8bcd\u5b66\u4e60"\x3e\u5355\u8bcd\u5b66\u4e60\x3c/label\x3e' + c + '\x26nbsp;|\x26nbsp;\x3clabel name\x3d"btnUnitTestStudy" on\x3d"0" class\x3d"study-change gray-text" value\x3d"\u5355\u5143\u6d4b\u8bd5"\x3e\u5355\u5143\u6d4b\u8bd5\x3c/label\x3e|\x26nbsp;\x3clabel name\x3d"btnSentenceStudy" on\x3d"0" class\x3d"study-change gray-text" value\x3d"\u8bcd\u6c47\u8fd0\u7528"\x3e\u8bcd\u6c47\u8fd0\u7528\x3c/label\x3e\x3cselect id\x3d"selDifficult" style\x3d"display:inline-block"\x3e\x3coption selected\x3d"selected" value\x3d"1"\x3e\u5bb9\u6613\x3c/option\x3e\x3coption value\x3d"2"\x3e\u9002\u4e2d\x3c/option\x3e\x3coption value\x3d"3"\x3e\u8f83\u96be\x3c/option\x3e\x3c/select\x3e\x3c/label\x3e\x3c/div\x3e' + d;
        $(b).html(u);
        $("#smallUnit").html(l);
        var t = $($("#templateOfCompareTest").html());
        $(t).attr("id", a.moduleCode + "_compareTest");
        $("#handler-content").append($(t));
        $("#handler-content").append($(b));
        16 < a.CourseUnits.length && ($("#smallUnit").omScrollbar(), $("#handler-content div[name\x3dbasicStudySubDiv]").eq(0).omScrollbar(), $("#handler-content div[name\x3dunitTestStudySubDiv]").eq(0).omScrollbar(), $("#handler-content div[name\x3dspeakStudySubDiv]").eq(0).omScrollbar(), $("#handler-content div[name\x3dsentenceStudySubDiv]").eq(0).omScrollbar());
        $("#handler-content input[name\x3dbtnCompareTest]").unbind("click").bind("click",
        function() {
            $("#handler-content div[name\x3dbook]").animate({
                "margin-top": "500px"
            },
            1E3,
            function() {
                $(t).fadeIn(1E3);
                $(this).hide()
            });
            var a = $(t).attr("id").substr(0, 36);
            Ic(a)
        });
        n == Hc ? ($("#handler-content input[name\x3dbtnTestToEnd]").eq(0).css("color", "#4d4d4d"), $("#handler-content input[name\x3dbtnTestToEnd]").eq(0).unbind("click").bind("click",
        function() {
            window.open("/MutiTest?method\x3dtestToEnd\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + $(this).attr("code"))
        })) : $("#handler-content input[name\x3dbtnTestToEnd]").eq(0).unbind("click").bind("click",
        function() {
            var a = $(this).eq(0).offset();
            $("#payToTestToEndDiv").css({
                left: a.left + 82,
                top: a.top + 12
            }).fadeIn(function() {
                setTimeout(function() {
                    $("#payToTestToEndDiv").fadeOut()
                },
                5E3)
            });
            $("#closePayToTestToEnd").unbind("click").bind("click",
            function() {
                $("#payToTestToEndDiv").fadeOut()
            });
            2 == Aa ? ($("#content_payToTestToEnd").show(), $("#preTestToEnd").unbind("click").bind("click",
            function() {
                var a = $("#handler-content input[name\x3dbtnTestToEnd]").eq(0).attr("code");
                window.open("/MutiTest?method\x3dpayToTestToEnd\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a)
            })) : ($("#content_payToTestToEnd").hide(), $("#msg_payToTestToEnd").html("\u4e0d\u597d\u610f\u601d\uff0c\u975e\u4ed8\u8d39\u7528\u6237\uff0c\u6682\u65f6\u4e0d\u80fd\u63d0\u524d\u6d4b\u8bd5..."))
        });
        $(b).fadeIn(400);
        $("#handler-content input[name\x3dbtnStartTestBeforeStudy]").unbind("click").bind("click",
        function() {
            m("\u8bf7\u6ce8\u610f\uff1a\u5bf9\u6bd4\u6d4b\u8bd5\u9009\u5b9a\u5355\u5143\u540e\uff0c\u5c31\u4e0d\u53ef\u66f4\u6362\u4e86\uff08\u5b66\u524d\u9009\u7684\u4ec0\u4e48\uff0c\u5b66\u540e\u5c31\u5bf9\u6bd4\u4ec0\u4e48");
            var a = [];
            $("#handler-content div[name\x3dvocSmallUnit]").each(function(b, c) {
                "1" == $(c).attr("ontest") && a.push($(c).attr("unitnbr"))
            });
            if (0 < a.length) {
                var b = $(t).attr("id").substr(0, 36);
                $.browser.msie ? (b = encodeURI("/MutiTest?method\x3dmultiUnitTest\x26testType\x3d2\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + b + "\x26multiunit\x3d" + a + "\x26withTestBeforeStudy\x3d0"), window.showModalDialog(b, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight)) : window.open("/MutiTest?method\x3dmultiUnitTest\x26testType\x3d2\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + b + "\x26multiunit\x3d" + a + "\x26withTestBeforeStudy\x3d0")
            } else m("\u8bf7\u9009\u62e9\u8981\u8fdb\u884c\u6d4b\u8bd5\u7684\u5355\u5143\u3002")
        });
        $("#handler-content input[name\x3dbtnStartTestAfterStudy]").unbind("click").bind("click",
        function() {
            var a = $(t).attr("id").substr(0, 36),
            b = $("#handler-content input[name\x3dbtnStartTestBeforeStudy]").attr("testedunits");
            if (null != b && "" != b) $.browser.msie ? (a = encodeURI("/MutiTest?method\x3dmultiUnitTest\x26testType\x3d3\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a + "\x26multiunit\x3d" + b + "\x26withTestBeforeStudy\x3d1"), window.showModalDialog(a, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight)) : window.open("/MutiTest?method\x3dmultiUnitTest\x26testType\x3d3\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a + "\x26multiunit\x3d" + b + "\x26withTestBeforeStudy\x3d1");
            else {
                var c = [];
                $("#handler-content div[name\x3dvocSmallUnit]").each(function(a, b) {
                    "1" == $(b).attr("ontest") && c.push($(b).attr("unitNbr"))
                });
                confirm("\u786e\u8ba4\u6ca1\u6709\u8fdb\u884c\u3010\u5b66\u524d\u6d4b\u8bd5\u3011\u800c\u76f4\u63a5\u8fdb\u884c\u3010\u5b66\u540e\u6d4b\u8bd5\u3011\uff1f") && (0 < c.length ? $.browser.msie ? (a = encodeURI("/MutiTest?method\x3dmultiUnitTest\x26testType\x3d3\x26withTestBeforeStudy\x3d1\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a + "\x26multiunit\x3d" + c), window.showModalDialog(a, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight)) : window.open("/MutiTest?method\x3dmultiUnitTest\x26testType\x3d3\x26withTestBeforeStudy\x3d1\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a + "\x26multiunit\x3d" + c) : m("\u8bf7\u9009\u62e9\u8981\u8fdb\u884c\u6d4b\u8bd5\u7684\u5355\u5143!"))
            }
        });
        $("#handler-content input[name\x3dbtnCancelTestBeforeStudy]").unbind("click").bind("click",
        function() {
            $(t).fadeOut(1E3,
            function() {
                $("#handler-content div[name\x3dbook]").show().animate({
                    "margin-top": "0px"
                },
                1E3)
            })
        });
        $("#handler-content label[name\x3dbtnSpeakStudy]").unbind("click").bind("click",
        function() {
            $(this).attr("on", 1);
            var a = null;
            $(this).siblings("label").each(function(b, c) {
                "1" == $(c).attr("on") && ($(c).attr("on", 0), a = $(c).attr("name"))
            });
            a = a.replace(/btn/, "");
            $("#handler-content div[name\x3d" + a + "]").fadeOut(100,
            function() {
                $("#handler-content div[name\x3dSpeakStudy]").fadeIn()
            })
        });
        $("#handler-content label[name\x3dbtnBasicStudy]").unbind("click").bind("click",
        function() {
            $(this).attr("on", 1);
            var a = null;
            $(this).siblings("label").each(function(b, c) {
                "1" == $(c).attr("on") && ($(c).attr("on", 0), a = $(c).attr("name"))
            });
            a = a.replace(/btn/, "");
            $("#handler-content div[name\x3d" + a + "]").fadeOut(100,
            function() {
                $("#handler-content div[name\x3dBasicStudy]").fadeIn()
            })
        });
        $("#handler-content label[name\x3dbtnUnitTestStudy]").unbind("click").bind("click",
        function() {
            $(this).attr("on", 1);
            var a = null;
            $(this).siblings("label").each(function(b, c) {
                "1" == $(c).attr("on") && ($(c).attr("on", 0), a = $(c).attr("name"))
            });
            a = a.replace(/btn/, "");
            $("#handler-content div[name\x3d" + a + "]").fadeOut(100,
            function() {
                $("#handler-content div[name\x3dUnitTestStudy]").fadeIn()
            })
        });
        $("#handler-content label[name\x3dbtnSentenceStudy]").unbind("click").bind("click",
        function() {
            $(this).attr("on", 1);
            var a = null;
            $(this).siblings("label").each(function(b, c) {
                "1" == $(c).attr("on") && ($(c).attr("on", 0), a = $(c).attr("name"))
            });
            a = a.replace(/btn/, "");
            $("#handler-content div[name\x3d" + a + "]").fadeOut(100,
            function() {
                $("#handler-content div[name\x3dSentenceStudy]").fadeIn()
            })
        });
        $("#handler-content div[name\x3dvocUnit]").unbind("click").bind("click",
        function() {
            $(this).hasClass("solid-gray2") || Ka($(this).attr("id"))
        });
        $("#handler-content div[name\x3dsentenceTest]").unbind("click").bind("click",
        function() {
            if (!$(this).hasClass("solid-gray2")) {
                var a = $(this).attr("id"),
                b = a.substr(2, 36),
                a = a.substr(39);
                R();
                var c = $("#selDifficult").val(),
                b = "/Reading/Sentence?moduleCode\x3d" + b + "\x26unit\x3d" + a + "\x26level\x3d" + c;
                $("#studyBox").html("\x3ciframe runat\x3d'server' src\x3d'" + b + "' width\x3d'800' height\x3d'400' frameborder\x3d'no' border\x3d'0' marginwidth\x3d'0' marginheight\x3d'0' scrolling\x3d'no' allowtransparency\x3d'yes'\x3e\x3c/iframe\x3e");
                $("#studyBox").omDialog("open")
            }
        });
        $("#handler-content div[name\x3dunitSpeak]").unbind("click").bind("click",
        function() {
            $(this).hasClass("solid-gray2") || Cb($(this).attr("id"))
        });
        $("#handler-content div[name\x3dvocSmallUnit]").unbind("click").bind("click",
        function() {
            "0" == $(this).attr("ontest") ? ($(this).attr("ontest", 1), $(this).addClass("onTest")) : ($(this).attr("ontest", 0), $(this).removeClass("onTest"))
        });
        $("#handler-content div[name\x3dunitTest]").unbind("click").bind("click",
        function() {
            if ($(this).hasClass("solid-gray2")) m('\x3cfont color\x3d"red"\x3e\u672c\u5355\u5143\u8fd8\u6ca1\u6709\u5b8c\u6210\u5b66\u4e60\uff0c\u6682\u65f6\u4e0d\u80fd\u6d4b\u8bd5\u3002\x3c/font\x3e');
            else {
                var a = $(this).attr("id");
                if (null != a && "" != a) {
                    $("#studyBox").omDialog("close");
                    var b = a.substr(2, 36),
                    a = a.substr(39);
                    $.browser.msie ? (b = encodeURI("/UnitTest?bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + b + "\x26unit\x3d" + a), window.showModalDialog(b, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight)) : window.open("/UnitTest?bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + b + "\x26unit\x3d" + a)
                } else m("Sorry\uff0c\u7cfb\u7edf\u9519\u8bef\uff1b\u5efa\u8bae\u5237\u65b0\u9875\u9762\u518d\u8bd5\u4e00\u4e0b:)")
            }
        });
        $("#handler-content input[name\x3dbtnIntelligentDictation]").eq(0).unbind("click").bind("click",
        function() {
            Gc($(this).attr("code"))
        })
    }
    function fa(a, b, c) {
        $.ajax({
            url: "/api/Ajax/AjaxGetErrorBook",
            type: "get",
            data: {
                orderType: c,
                start: a - 1,
                limit: b
            },
            dataType: "json",
            cache: !1,
            success: function(a) {
                $("#handler-content").find(".loading0").remove();
                var b = $('\x3cdiv name\x3d"smallVocCard" style\x3d"position:absolute;"  title\x3d"" spelling\x3d""  flip\x3d"0"\x3e\x3cdiv class\x3d"card-shape" mark\x3d"" style\x3d"overflow: hidden;" title\x3d""\x3e\x3ca class\x3d""\x3e\x3cspan class\x3d"f24-w word"\x3e\x3c/span\x3e\x3cspan class\x3d"f14-w yingbiao"\x3e\x3c/span\x3e \x3c/a\x3e\x3cdiv class\x3d"vocSound" style\x3d"display:none;height: 21px;position: absolute;right:8px; bottom:10px;"\x3e\x3cimg src\x3d"/content/image/volume-small-green.png" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
                if (a.success) {
                    $("#content_errorVocabularyBook").empty();
                    var c, e, d = a.data.length,
                    f = 25 + (350 - d / 4 * 100) / 2,
                    g = $("#content_errorVocabularyBook").width(),
                    l = $("#content_errorVocabularyBook").height(),
                    m = [];
                    if (0 < d) for (var h = 0; h < d; h++) {
                        var n;
                        n = $(b).clone();
                        $(n).children("div").eq(0).addClass("cardGray");
                        $(n).attr("title", a.data[h].spelling);
                        $(n).attr("mark", a.data[h].soundMarkUs);
                        $(n).attr("spelling", a.data[h].spelling);
                        $(n).find("span").eq(0).html(a.data[h].meaning);
                        $(n).omDraggable({
                            containment: "#content_errorVocabularyBook"
                        });
                        lb(n, null, 4);
                        xa(n);
                        mb(n);
                        $(n).appendTo($("#content_errorVocabularyBook"));
                        1 == d ? (c = (g - $(n).children("div").eq(0).width()) / 2, e = l / 2 - .8 * $(n).children("div").eq(0).height()) : (c = 10 + h % 4 * 174, e = f + 100 * parseInt(h / 4));
                        $(n).css({
                            left: c,
                            top: e
                        });
                        m.push($(n))
                    } else $("#content_errorVocabularyBook").hide().html('\x3cdiv style\x3d"color:#FF6600; font-weight:bold; font-size:20px;text-align:center;line-height:400px;"\x3e\u6240\u9009\u7c7b\u578b\u6682\u65e0\u5355\u8bcd\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\x3c/div\x3e').fadeIn();
                    $("#content_errorVocabularyBook").hide().fadeIn()
                } else $("#content_errorVocabularyBook").html('\x3cdiv style\x3d"color:#FF6600; font-weight:bold; font-size:20px;text-align:center;line-height:400px;"\x3e' + a.msg + "\x3c/div\x3e")
            },
            error: function() {
                $("#content_errorVocabularyBook").html('\x3cdiv style\x3d"color:#FF6600; font-weight:bold; font-size:20px;text-align:center;line-height:400px;"\x3e\u7cdf\u7cd5\uff0c\u7f51\u7edc\u51fa\u95ee\u9898\u4e86 \x3c/div\x3e')
            }
        })
    }
    function Ic(a) {
        $.ajax({
            url: "/api/Ajax/AjaxGettestResult",
            dataType: "json",
            type: "get",
            data: {
                moduleCode: a
            },
            success: function(a) {
                Bas;
                if (a.success) for (var b = [], e = [], d = 0; d < a.data.length; d++) {
                    if (2 == a.data[d].testTpye) {
                        var f = "0",
                        g = "\u5b66\u524d\u6d4b\u8bd5\u7684\u5355\u5143\u4e3a:\u3010 " + a.data[d].remark.split(",") + " \u3011";
                        "-1" != a.data[d].resultScore ? f = a.data[d].resultScore: (f = '\x3cimg src\x3d"source/images/stop.png" /\x3e', g = "\u672a\u8fdb\u884c\u5b66\u524d\u6d4b\u8bd5\uff01");
                        $("#handler-content td[name\x3dresultBefore]").html(f);
                        $("#handler-content td[name\x3dresultBefore]").attr("title", g);
                        $("#handler-content input[name\x3dbtnStartTestBeforeStudy]").hide();
                        $("#handler-content input[name\x3dbtnStartTestBeforeStudy]").attr("testedunits", a.data[d].remark);
                        b = a.data[d].remark.split(",")
                    } else 3 == a.data[d].testTpye && ($("#handler-content td[name\x3dresultAfter]").html(a.data[d].resultScore), g = "\u5b66\u540e\u6d4b\u8bd5\u7684\u5355\u5143\u4e3a:\u3010 " + a.data[d].remark.split(",") + " \u3011", $("#handler-content td[name\x3dresultAfter]").attr("title", g), $("#handler-content input[name\x3dbtnStartTestAfterStudy]").attr("testedunits", a.data[d].remark), f = "100", a.data[d].resultScore != f ? (f = a.data[d].resultScore, $("#handler-content input[name\x3dbtnStartTestAfterStudy]").css("width", 102).val("\u5237\u65b0\u6210\u7ee9")) : $("#handler-content input[name\x3dbtnStartTestAfterStudy]").hide(), e = a.data[d].remark.split(","));
                    canTestedUnits = 0 < e.length ? e: b;
                    $("#handler-content div[name\x3dvocSmallUnit]").each(function(a, b) {
                        0 > $.inArray($(b).attr("unitnbr"), canTestedUnits) ? ($(b).removeClass("unstudy-gray"), $(b).addClass("solid-gray2")) : ($(b).attr("ontest", 1), $(b).addClass("onTest"))
                    })
                }
            },
            error: function() {
                $("#handler-content").html($("#handerPromptInfo").html());
                $("#handler-content").find("div [name\x3dhanderPromptInfoDetail]").html("\u7cdf\u7cd5\uff0c\u7f51\u7edc\u51fa\u95ee\u9898\u4e86 ")
            }
        })
    }
    function Tb(a, b) {
        Xb();
        $("#handle-title").html(a.text());
        $("#sub-handle-title").html();
        $("#handler-content").html('\x3cdiv class\x3d"book-unit radius"\x3e\u5355\u8bcd\u57fa\u7840\uff1a\u4ee5\u5355\u8bcd\u4e3a\u6838\u5fc3\uff0c\u5bf9\u5355\u8bcd\uff0c\u53e5\u5b50\u7b49\u8fdb\u884c\u57fa\u7840\u4e0e\u63d0\u9ad8\u5b66\u4e60\uff0c\u5e76\u4e14\u53ef\u5c31\u5168\u4e66\u8303\u56f4\u8fdb\u884c\u667a\u80fd\u542c\u5199\u3002\x3c/div\x3e');
        Wb(b)
    }
    function ea(a) {
        Xb();
        $("#handler-content").html($($("#loading0").html()).css({
            "margin-top": "100px"
        }));
        $("#handle-title").html(a.text());
        $("#sub-handle-title").html("");
        $.ajax({
            type: "get",
            url: "/api/Ajax/AjaxLoadCourse",
            dataType: "json",
            data: {
                moduleCode: a.attr("code")
            },
            cache: !1,
            success: function(b) {
                $("#handler-content").find(".loading0").remove();
                $("#handler-content").html('\x3cdiv class\x3d"book-unit radius"\x3e\u5355\u8bcd\u57fa\u7840\uff1a\u4ee5\u5355\u8bcd\u4e3a\u6838\u5fc3\uff0c\u5bf9\u5355\u8bcd\uff0c\u53e5\u5b50\u7b49\u8fdb\u884c\u57fa\u7840\u4e0e\u63d0\u9ad8\u5b66\u4e60\uff0c\u5e76\u4e14\u53ef\u5c31\u5168\u4e66\u8303\u56f4\u8fdb\u884c\u667a\u80fd\u542c\u5199\u3002\x3c/div\x3e');
                if (b.success) {
                    var c = {};
                    $(b.books).each(function(a, b) {
                        0 == a && (c = b)
                    });
                    b = a.attr("code");
                    c.moduleCode == b && Wb(c);
                    var e = !1;
                    $(v).each(function(a, b) {
                        c.moduleCode == b.moduleCode && (e = !0)
                    });
                    e || v.push(c)
                } else $("#handler-content").html($("#handerPromptInfo").html()),
                $("#handler-content").find("div [name\x3dhanderPromptInfoDetail]").html(b.msg);
                $("#handler-content").append("\x3cdiv class\x3d'book-unit radius'\x3e\x3ca id\x3d'retryPost' href\x3d'javascript:;'\x3e\u5982\u679c\u6570\u636e\u5f02\u5e38\uff0c\u70b9\u6b64\u8bf7\u91cd\u65b0\u63d0\u4ea4\x3c/a\x3e\x3c/div\x3e")
            },
            error: function() {
                $("#handler-content").html($("#handerPromptInfo").html());
                $("#handler-content").find("div [name\x3dhanderPromptInfoDetail]").html("").append(za('\x3ca style\x3d"color:green;"\x3e\u2299\ufe4f\u2299\uff0c\u7f51\u7edc\u6302\u4e86\uff0c\u3010\u70b9\u6211\u3011\uff0c\u5c1d\u8bd5\u4fee\u590d~\x3c/a\x3e', ea, a))
            }
        })
    }
    function Yb(a) {
        la = (new Date).getTime();
        h == V && (70 == a.keyCode && null != O && $("#speakMicInSpeakSection").mousedown(), 74 == a.keyCode && $("#playRecordInSpeakSection").click(), 75 == a.keyCode && $("#audio_word_or_sen_symbol_speakSection").click(), 76 != a.keyCode || $("#go_next_speakSection").is(":hidden") || $("#go_next_speakSection").click())
    }
    function Jc(a) {
        h == V && 70 == a.keyCode && $("#speakMicInSpeakSection").mouseup()
    }
    function Ua(a) {
        R();
        q = !1;
        w = [];
        u = [];
        h = A;
        $("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        }));
        a || ($("#door_exitUnitStudy").show(), $("#studyBox").omDialog("open"));
        var b = 50;
        if (a) {
            if (b = 50, isSameUserInLocalStorage()) {
                var c = JSON.parse(window.localStorage.userinfo);
                if (null != c && null != c.reviewVocInfo && null != c.reviewVocInfo.date) {
                    var e = (new Date).getTime(),
                    k = (new Date(c.reviewVocInfo.date)).getTime(); (e - k) / 1E3 < _valid_review_interval && (c = 50 - c.reviewVocInfo.vocCount, b = 0 < c ? c: 50)
                }
            }
        } else b = $("#vocNbrByReview_setting").val();
        try {
            $.ajax({
                type: "post",
                url: "/api/Ajax/AjaxGetReview",
                dataType: "json",
                data: {
                    reviewVocLimitNbr: b
                },
                cache: !1,
                success: function(c) {
                    f.length = 0;
                    l.length = 0;
                    M = parseInt($("#vocRecTime_setting").val()) + 1;
                    ta = 1E3 * parseInt($("#vocPromptTime_setting").val());
                    $("#unit_study_slide").find(".loading0").remove();
                    $("#startInfo").fadeIn().html('\u2022 \u5355\u8bcd\u662f\u6839\u636e\x3cfont style\x3d"font-size:26px; color:#05ad78;"\x3e\u8bb0\u5fc6\u66f2\u7ebf\x3c/font\x3e\u8ba1\u7b97\u5f97\u51fa\uff0c\u8bf7\u53ca\u65f6\u590d\u4e60... \x3cbr\x3e\x3cfont style\x3d"font-size: 13px; color:gray;font-weight: normal;padding-left: 87px;"\x3e[ \u6ce8\u610f\uff1a\u672a\u590d\u4e60\u5355\u8bcd\u79ef\u7d2f\u8d85\u8fc750\u4e2a\u540e\u5c06\u4f1a\u88ab\u7cfb\u7edf\u5f3a\u5236\u590d\u4e60 ]\x3c/font\x3e');
                    Sa && (Sa = !1, $("#pbar").omProgressbar("value", 100), setTimeout(Sb, 100));
                    if (c.success) {
                        I = c.studytoken;
                        null != d && d.pauseClock();
                        d = new StudyPanel({
                            bookName: "reviewBook",
                            moduleCode: null,
                            unitNbr: 1,
                            totalUnitNbr: 1
                        });
                        var e = c.data.length;
                        if (void 0 != c.data) {
                            $(c.data).each(function(a, b) {
                                var c = new Slide(b, a);
                                l.push(c)
                            });
                            var k = [];
                            50 <= e ? (k = arrayDeepCopy(c.data), $("#studyBox").omDialog("open")) : k = c.data.slice(0, b);
                            var r = [];
                            if (window.localStorage && window.localStorage.userinfo) {
                                var h = JSON.parse(window.localStorage.userinfo);
                                void 0 != h.reviewVocList && null != h.reviewVocList && "" != h.reviewVocList && (r = JSON.parse(h.reviewVocList))
                            }
                            Kc(r, k);
                            0 < k.length ? k.sort(Lc) : 0 < c.data.length && (k = c.data.slice(0, 1));
                            for (h = 0; h < k.length; h++) f.push(new Slide(k[h], h));
                            n = f.length
                        }
                        0 < f.length && (k = !0, isSameUserInLocalStorage() && (h = JSON.parse(window.localStorage.userinfo), null != h && null != h.reviewVocInfo && null != h.reviewVocInfo.date && (c = (new Date).getTime(), r = (new Date(h.reviewVocInfo.date)).getTime(), 50 <= h.reviewVocInfo.vocCount && (c - r) / 1E3 < _valid_review_interval && (k = !1))), a ? k ? 50 == e ? $("#startInfo").fadeIn().html('\u2022 \u4f60\u6709\u8d85\u8fc7\x3cfont style\x3d"font-size:39px; color:#05ad78;"\x3e50\x3c/font\x3e\u4e2a\u5355\u8bcd\u6ca1\u6709\u8fdb\u884c\u590d\u4e60\u4e86...\x3cbr/\x3e\x3cfont style\x3d"font-size: 13px; color:gray;font-weight: normal;padding-left: 87px;"\x3e[ \u6240\u4ee5\uff0c\u4e0d\u597d\u610f\u601d\uff0c\u4f60\u88ab\u7cfb\u7edf\u5f3a\u5236\u8fdb\u884c\u590d\u4e60\u4e86... ]\x3c/font\x3e') : 50 > e && $("#startInfo").fadeIn().html('\u2022 \u4e0a\u6b21\u590d\u4e60\u672a\u5b8c\u6210\uff0c\u4f60\u8fd8\u6709\x3cfont style\x3d"font-size:36px; color:#d2191f;"\x3e' + e + '\x3c/font\x3e\u4e2a\u5355\u8bcd\u9700\u8981\u590d\u4e60...\x3cbr/\x3e\x3cfont style\x3d"font-size: 13px; color:gray;font-weight: normal;padding-left: 270px;"\x3e[ \u7cfb\u7edf\u5f3a\u5236\u590d\u4e60\u4e2d... ]\x3c/font\x3e') : ($("#startInfo").fadeIn().html('\u2022 \u4e0d\u9519\uff0c\u4f60\u521a\u521a\u5df2\u7ecf\u590d\u4e60\u4e86\x3cfont style\x3d"font-size:39px; color:#05ad78;"\x3e50\x3c/font\x3e\u4e2a\u5355\u8bcd\u4e86...\x3cbr/\x3e\x3cfont style\x3d"font-size: 13px; color:gray;font-weight: normal;padding-left: 200px;"\x3e[ \u53ef\u4ee5\u9009\u62e9\u4e0d\u8fdb\u884c\u590d\u4e60\u4e86... ]\x3c/font\x3e'), $("#door_exitUnitStudy").show()) : $("#startInfo").css("display", "inline").html('\u2022 \u5355\u8bcd\u662f\u6839\u636e\x3cfont style\x3d"font-size:26px; color:#05ad78;"\x3e\u8bb0\u5fc6\u66f2\u7ebf\x3c/font\x3e\u8ba1\u7b97\u5f97\u51fa\uff0c\u8bf7\u53ca\u65f6\u590d\u4e60... \x3cbr\x3e\x3cfont style\x3d"font-size: 13px; color:gray;font-weight: normal;padding-left: 87px;"\x3e[ \u6ce8\u610f\uff1a\u672a\u590d\u4e60\u5355\u8bcd\u79ef\u7d2f\u8d85\u8fc750\u4e2a\u540e\u5c06\u4f1a\u88ab\u7cfb\u7edf\u5f3a\u5236\u590d\u4e60 ]\x3c/font\x3e'), g = f[0], Y(g), q = !0, $("#startUnitStudy").css("display", "inline"), $("#panelTitleInfo").html("\u667a\u80fd\u590d\u4e60\u4e2d..."), H = arrayDeepCopy(f))
                    } else 1 == c.condition ? ($("#startInfo").html(c.msg).css("display", "block"), $("#cancelUnitStudy").css("display", "inline"), $("#panelTitleInfo").html("\u667a\u80fd\u590d\u4e60\u4e2d..."), Q = 0, $("#handler-content").find(".btnStartReview").val("\u518d\u8bd5\u8bd5"), $("#handler-content").find(".reviewNbr").fadeOut(function() {
                        $(this).html(Q).fadeIn()
                    })) : ($("#startInfo").html('\x3cfont style\x3d"color:red"\x3e\u667a\u80fd\u590d\u4e60\u63d0\u793a\uff1a' + c.msg + "\x3c/font\x3e").css("display", "block"), $("#cancelUnitStudy").css("display", "inline"))
                },
                error: function() {
                    m("\u60a8\u7684\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u540e\u518d\u8bd5\u8bd5")
                }
            })
        } catch(r) {}
    }
    function Zb() {
        ma();
        $("#panelTitleInfo").html('\x3cfont title\x3d"\u79bb\u7ebf\u5b66\u4e60\u5b8c\u6210\uff0c\u4e0b\u6b21\u767b\u9646\u65f6\u53ef\u5728\u3010\u8bb0\u5fc6\u66f2\u7ebf\u3011-\x3e \u91cd\u65b0\u4fdd\u5b58\uff08\u9700\u8981\u539f\u7535\u8111\u4e0a\uff09\u3002" style\x3d"color:red;"\x3e\u6ce8\u610f\uff1a\u767b\u9646\u8d85\u65f6\uff0c\u73b0\u5728\u5904\u4e8e\u79bb\u7ebf\u590d\u4e60\u4e2d...\x3c/font\x3e')
    }
    function Ja() {
        ma();
        R();
        $("#startInfo").html('\x3cfont style\x3d"color:red"\x3e\u5355\u5143\u5b66\u4e60\u63d0\u793a\uff1a\u767b\u9646\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u9646~~~\x3c/font\x3e').css("display", "block");
        $("#cancelUnitStudy").css("display", "inline")
    }
    function $b() {
        try {
            if ($.ajax({
                type: "post",
                url: "/api/ajax/AjaxHeartBeat",
                data: {},
                dataType: "json",
                cache: !1,
                success: function(a) {
                    a.success || Zb()
                },
                error: function() {
                    Zb()
                }
            }), M = parseInt($("#vocRecTime_setting").val()) + 1, ta = 1E3 * parseInt($("#vocPromptTime_setting").val()), 0 < H.length) {
                if (q && h == A) g.isRead || (p = new aa(M), p.startTimer());
                else {
                    R();
                    q = !1;
                    a || $("#door_exitUnitStudy").show();
                    h = A;
                    $("#startInfo").css("display", "inline").html('\u2022 \u5355\u8bcd\u662f\u6839\u636e\x3cfont style\x3d"font-size:26px; color:#05ad78;"\x3e\u8bb0\u5fc6\u66f2\u7ebf\x3c/font\x3e\u8ba1\u7b97\u5f97\u51fa\uff0c\u8bf7\u53ca\u65f6\u590d\u4e60... \x3cbr\x3e\x3cfont style\x3d"font-size: 13px; color:gray;font-weight: normal;padding-left: 87px;"\x3e[ \u6ce8\u610f\uff1a\u672a\u590d\u4e60\u5355\u8bcd\u79ef\u7d2f\u8d85\u8fc750\u4e2a\u540e\u5c06\u4f1a\u88ab\u7cfb\u7edf\u5f3a\u5236\u590d\u4e60 ]\x3c/font\x3e');
                    w = [];
                    u = [];
                    null != d && d.pauseClock();
                    d = new StudyPanel({
                        bookName: "reviewBook",
                        moduleCode: null,
                        unitNbr: 1,
                        totalUnitNbr: 1
                    });
                    f.length = 0;
                    f = arrayDeepCopy(H);
                    for (a = l.length = 0; a < f.length; a++) f[a].slideSeqNbr = a;
                    n = f.length;
                    g = f[0];
                    Y(g);
                    q = !0;
                    $("#startUnitStudy").css("display", "inline");
                    $("#panelTitleInfo").html("\u667a\u80fd\u590d\u4e60\u4e2d...")
                }
                $("#studyBox").omDialog("open")
            } else {
                var a;
                Ua(!1)
            }
        } catch(b) {
            Ua(!1)
        }
    }
    function Lc(a, b) {
        if (null != a.userVocCurrent && null != b.userVocCurrent) {
            var c = a.userVocCurrent,
            e = b.userVocCurrent;
            return (c.readFailTimes + c.spellFailTimes + c.continueReadFailTimes + c.continueSpellFailTimes) / (c.reviewTimes + 1) > (e.readFailTimes + e.spellFailTimes + e.continueReadFailTimes + e.continueSpellFailTimes) / (e.reviewTimes + 1)
        }
        return ! 1
    }
    function Bc() {
        $("#writingSection").css("display", "none");
        $("#writingSectionStatics").css("display", "none");
        $("#studyProgressDiv").hide();
        Va();
        ua && h == D || h == N ? ($("#door_exitUnitStudy").fadeOut(), $("#seperateSectionTwo").fadeIn(function() {
            $("#btnStartUnitReview").focus()
        })) : $("#finishSection").fadeIn()
    }
    function ac() {
        $("#readingSection").css("display", "none");
        $("#startSection").css("display", "none");
        $("#speakSection").hide();
        $("#readingSectionStatics").css("display", "none");
        $("#seperateSectionOne").css("display", "none");
        $("#writingSection").hide();
        $("#writingSectionStatics").css("display", "none");
        $("#seperateSectionZero").css("display", "none");
        $("#reverseSection").hide();
        $("#singleReadingTime").hide();
        $("#door_exitUnitStudy").fadeOut();
        $("#seperateSectionTwo").fadeIn(function() {
            $("#btnStartUnitReview").focus()
        })
    }
    function Va() {
        if (h == A) {
            $("#wsWriting").blur();
            $("#btnOfUnitFinish").hide();
            $("#msgOfFinish").parent("div").hide();
            var a = $('\x3cdiv\x3e\x3cinput type\x3d"button" class\x3d"btn-keepstudy" style\x3d"width:100px; margin-top: 20px; margin-left: -50px;" value\x3d"\u4fdd\u5b58\u9000\u51fa"\x3e\x3c/div\x3e');
            $(a).appendTo($("#btnOfFinish")).unbind("click").bind("click",
            function() {
                $("#studyBox").omDialog("close");
                $("#msgOfFinish").html("");
                q = !1;
                $(a).remove();
                var b = Ba(f);
                Ca(b, null)
            })
        } else if (h == D) {
            $("#msgOfFinish").parent("div").hide();
            var b = $("#current_module_unit").val(),
            c = b.substr(0, 32);
            b.substr(33) == $("#" + c + "_book").attr("totalunitnbr") && $("#toNextUnit").css("visibility", "hidden");
            $("#btnOfUnitFinish").show();
            $("#toUnitTest").bind("mouseover",
            function() {
                bc("\u2022 \u5b8c\u6210\u5355\u5143\u6d4b\u8bd5\u518d\u5f97 ", 10)
            });
            $("#exitUnitStudy").bind("mouseover",
            function() {
                bc("\u2022 \u5b8c\u6210\u5355\u5143\u6d4b\u8bd5\u518d\u5f97 ", 10)
            })
        } else h == N ? ($("#msgOfFinish").parent("div").hide(), $("#toUnitTest").attr({
            title: "\u4e0b\u4e00\u7ec4"
        }), $("#toUnitTest").val("\u4e0b\u4e00\u7ec4"), $("#btnOfUnitFinish").show()) : 3 == h ? ($("#studyProgressDiv").show(), $("#wsWriting").blur(), $("#btnOfUnitFinish").hide(), $("#staticArea").css("display", "none"), $("#dynamicAfterFinish").find("div").eq(0).html('\x3ctable style\x3d"width: 215px; margin: 0 auto;"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e\x3cimg style\x3d"width:50px; padding-right: 10px;" src\x3d"source/images/dictation.png"\x3e\x3c/td\x3e\x3ctd\x3e\x3clabel style\x3d"line-height: 171px;font-weight: bold;"\x3e\u5df2\u5b8c\u6210\u667a\u80fd\u542c\u5199\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e'), a = $('\x3cinput type\x3d"button" class\x3d"btn-green" style\x3d"width:100px;" value\x3d"\u9000\u51fa"/\x3e'), $(a).appendTo($("#btnOfFinish")).unbind("click").bind("click",
        function() {
            $("#studyBox").omDialog("close");
            q = !1;
            $(a).remove()
        })) : h == V ? ($("#staticArea").hide(), $("#msgOfFinish").html("\u2022 \u606d\u559c\uff0c\u5df2\u5b8c\u6210\u672c\u5355\u5143\u542c\u8bfb\u8bad\u7ec3~").css("margin-top", "60px"), a = $('\x3cdiv\x3e\x3cinput type\x3d"button" class\x3d"btn-green" style\x3d"width:100px;" value\x3d"\u9000\u51fa"/\x3e\x3c/div\x3e'), $(a).appendTo($("#btnOfFinish")), $(a).click(function() {
            $("#studyBox").omDialog("close");
            $("#msgOfFinish").html("");
            q = !1;
            $(a).remove()
        })) : m("\u51fa\u4e86\u70b9\u610f\u5916\uff0c\u5237\u65b0\u4e00\u4e0b\u9875\u9762\u8bd5\u8bd5~")
    }
    function pb() {
        $("#explainCover").find(".eqtitle").fadeOut(function() {
            $("#explainInfo").find(".translation").hide();
            $("#explainCover").hide();
            $("#explainInfo").show();
            $("#explainInfo").find(".translation").fadeIn();
            $("#explainCover").find(".eqtitle").show();
            $("#btnOfCover").show()
        })
    }
    function cc() {
        $("#explainInfo").hide();
        $("#explainCover").find(".eqtitle").hide().fadeIn(800);
        $("#explainCover").show();
        $("#explainInfo").find(".translation").show()
    }
    function dc() {
        $("#readingSection").css("display", "none");
        $("#readingSectionStatics").css("display", "none");
        $("#singleReadingTime").css("display", "none")
    }
    function ec() {
        $("#reverseSection").css("display", "none");
        $("#writingSection").css("display", "none");
        $("#writingSectionStatics").css("display", "none");
        $("#readingSection").show();
        $("#singleReadingTime").css("display", "block");
        $("#readingSectionStatics").css("display", "block");
        E = E.concat(f);
        x++;
        f = l.slice(x * n, (x + 1) * n);
        w = [];
        u = [];
        g = f[0];
        Y(g);
        null != d && d.continueClock();
        y ? ($("#writingSection").css("display", "none"), $("#writingSectionStatics").css("display", "none"), $("#startSection").fadeIn(), $("#startUnitStudy").focus(), 0 != g.vocIndex && $("#startInfo").css("display", "inline").html("\u2022 \u8fdb\u5165\u4e0b\u4e00\u7ec4\uff0c\u8d70\u8d77......!")) : $("#go_next").click()
    }
    function fc() {
        $("#seperateSectionZero").fadeIn()
    }
    function Mc() {
        $("#startVocSpeak").hide();
        $("#saveVocSpeak").show();
        $("#startInfo").html("\u606d\u559c\uff01\u4f60\u5df2\u5b8c\u6210\u4e86\u672c\u5355\u5143\u7684\u542c\u8bfb\u8bad\u7ec3\uff01");
        if ($.browser.webkit) {
            var a = new SpeechSynthesisUtterance("Congratulation, you have finished all the words.");
            a.voice = window.speechSynthesis.getVoices().filter(function(a) {
                return "Google UK English Male" == a.name
            })[0];
            speechSynthesis.speak(a)
        }
        $("#speakSection").hide();
        $("#startSection").fadeIn();
        pa()
    }
    function gc() {
        $("#readingSection").css("display", "none");
        $("#startSection").css("display", "none");
        $("#speakSection").hide();
        $("#readingSectionStatics").css("display", "none");
        $("#seperateSectionOne").css("display", "none");
        $("#writingSection").hide();
        $("#writingSectionStatics").css("display", "none");
        $("#seperateSectionZero").css("display", "none");
        $("#reverseSection").hide();
        $("#singleReadingTime").hide();
        $("#finishSection").fadeIn()
    }
    function ga() {
        var a = f.length,
        b = E.length;
        0 < b ? f[a - 1].vocCode != E[b - 1].vocCode && (E = E.concat(f)) : E = E.concat(f);
        return Ba(E)
    }
    function La(a, b, c) {
        c = $("#" + a + "-" + b);
        $(c).removeClass("unstudy-gray").removeClass("studing-orange").addClass("studied-green-over");
        $("#s-" + a + "-" + b).removeClass("solid-gray2").addClass("unstudy-gray");
        $("#t-" + a + "-" + b).removeClass("solid-gray2").addClass("unstudy-gray");
        $("#sp-" + a + "-" + b).removeClass("solid-gray2").addClass("unstudy-gray");
        store.remove(a + "-" + b);
        store.remove("s-" + a + "-" + b);
        store.remove("t-" + a + "-" + b);
        store.remove("sp-" + a + "-" + b);
        store(a + "-" + b, "studied-green-over");
        store("s-" + a + "-" + b, "unstudy-gray");
        store("t-" + a + "-" + b, "unstudy-gray");
        store("sp-" + a + "-" + b, "unstudy-gray");
        $("#current_module_unit").attr("isfinished", 1);
        b = $(c).siblings(".solid-gray2").eq(0);
        var e = !0,
        d = !0;
        $(c).siblings().each(function(a, b) {
            e && ($(b).hasClass("studing-orange") || $(b).hasClass("unstudy-gray")) && (e = !1);
            $(b).hasClass("studied-green-over") || (d = !1)
        });
        c = null;
        e && 0 < $(b).length && ($(b).removeClass("solid-gray2").addClass("unstudy-gray"), c = $(b).attr("id").substr(33), $("#s-" + a + "-" + c).removeClass("solid-gray2").addClass("unstudy-gray"));
        d && ($("#handler-content input[name\x3dbtnTestToEnd]").eq(0).css("color", "#4d4d4d"), $("#handler-content input[name\x3dbtnTestToEnd]").eq(0).unbind("click").bind("click",
        function() {
            window.open("/Test?method\x3dtestToEnd\x26bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + $(this).attr("code"))
        }))
    }
    function bc(a, b) {
        ca || $.getScript("/content/js/jquery.flippy.js",
        function() {
            ca = !0
        });
        var c = $("#rewardDiv").clone();
        $(c).find("#rewardInfo").html(a);
        $(c).find("#rewardPointNbr").css("width", "50px").html('\x3cfont style\x3d"font-size:25px; color:rgb(255, 39, 56);"\x3e' + b + "\x3c/font\x3e");
        "0" == $("#rewardDiv").attr("flip") ? $("#rewardDiv").flippy({
            direction: "left",
            duration: "750",
            isApplyLight: !1,
            noCSS: !0,
            verso: $(c).html(),
            onFinish: function() {
                $("#rewardDiv").attr("flip", "1")
            },
            onReverseFinish: function() {}
        }) : $("#rewardDiv").flippyReverse()
    }
    function qb(a) {
        if ("on" == a) {
            a = 0;
            var b, c = b = 0;
            if (h == A || 3 == h) {
                $("#reportFiniImage").attr("src", "/content/images/nothing.png");
                $("#reportDiv3").html('\x3cspan style\x3d"color: #999;"\x3e\u6309\u65f6\u590d\u4e60\u6709\u52a9\u4e8e\u52a0\u6df1\u8bb0\u5fc6\uff0c\u4e0d\u5f97\u91d1\u5e01~~~\x3c/span\x3e');
                if (null != f && 0 < f.length) {
                    b = a = f.length;
                    for (var e = 0; e < f.length; e++) if (h == A) if (!f[e].isSpelled && y || !f[e].isRead && !y) {
                        b = f[e].slideSeqNbr;
                        break
                    } else c++;
                    else if (3 == h) if (f[e].isSpelled) c++;
                    else {
                        b = f[e].slideSeqNbr;
                        break
                    }
                }
                b = a - b;
                $("#report_getcoins").html(parseInt(c / 2))
            } else if ($("#reportFiniImage").attr("src", "/content/images/coins.png"), "1" == $("#current_module_unit").attr("isfinished")) {
                if (null != l && 0 < l.length) for (b = a = l.length, e = 0; e < l.length; e++) if (!l[e].isSpelled && y || !l[e].isRead && !y) {
                    b = l[e].slideSeqNbr;
                    break
                } else c++;
                b = a - b
            } else {
                $("#reportFiniImage").attr("src", "/content/images/coins.png");
                a = l.length;
                b = void 0 != $("#current_module_unit").attr("latestVocIndex") ? $("#current_module_unit").attr("latestVocIndex") : 0;
                for (e = 0; e < l.length; e++)(l[e].isRead && l[e].isSpelled && y || l[e].isRead && !y) && c++;
                b = a - b - c
            }
            $("#report_total").html(a);
            $("#report_unFinished").html(b);
            $("#report_finish").html(c);
            $("#report_getcoins").html(c);
            $("#cofirmExitDiv").show()
        } else "off" == a && $("#cofirmExitDiv").hide()
    }
    function gb() {
        var a = null;
        null != g && (a = g.vocCode);
        if (h == A) null != f && 0 < f.length && null != a && "" != a ? f[f.length - 1].vocCode == a && f[f.length - 1].isSpelled ? (null != d && d.pauseClock(), q = !1, a = Ba(f), Ca(a, null)) : null == g || null == f[0].isFstReadSuccess ? null != d && d.pauseClock() : null != d ? (d.saveTime(), a = Ba(f), Ca(a, null), d.pauseClock()) : (a = Ba(f), Ca(a, null)) : null != d && (d.pauseClock(), d = null, q = !1);
        else if (h == D) {
            var b = $("#current_module_unit").val().substr(0, 36),
            c = $("#current_module_unit").val().substr(37);
            if (null != a && "" != a && null != b && "" != b && null != c && "" != c) if (x == Math.ceil(l.length / n) - 1 && f[f.length - 1].vocCode == a && f[f.length - 1].isSpelled) {
                var e = JSON.stringify(ga());
                Wa(b, c, 0, e, TOTAL_READING_TIME, TOTAL_WRITING_TIME);
                null != d && (d.pauseClock(), d = null, q = !1)
            } else {
                for (var k = !1,
                e = 0; e < f.length; e++) if (null != f[e].isFstReadSuccess) {
                    k = !0;
                    break
                }
                null == g || 0 == x && !k ? (0 == $("#" + b + "-" + c).attr("isfinished") && $("#" + b + "-" + c).removeClass("unstudy-gray").removeClass("solid-gray2").addClass("studing-orange").unbind("click").click(function() {
                    Ka(b + "-" + c)
                }), null != d && d.pauseClock()) : (e = JSON.stringify(ga()), null != d ? (d.saveTime(), k = "", g.isRead || 0 != g.vocIndex % n || 0 == x ? Da(b, c, a, e, TOTAL_READING_TIME, TOTAL_WRITING_TIME) : (k = null != l ? l[g.vocIndex - 1].vocCode: a, Da(b, c, k, e, TOTAL_READING_TIME, TOTAL_WRITING_TIME)), d.pauseClock()) : (k = "", null == !g.isRead && 0 == g.vocIndex % n && 0 != x ? (k = null != l ? l[g.vocIndex - 1].vocCode: a, Da(b, c, k, e, TOTAL_READING_TIME, TOTAL_WRITING_TIME)) : Da(b, c, a, e, TOTAL_READING_TIME, TOTAL_WRITING_TIME)))
            } else null != d && (d.pauseClock(), d = null, q = !1);
            pa()
        } else if (3 == h) {
            a = !0;
            for (e = 0; e < f.length; e++) if (!f[e].isSpelled) {
                a = !1;
                break
            }
            a && (q = !1)
        } else if (h == N) {
            b = "00000000-0000-0000-0000-000000000000";
            c = 1;
            if (null != a && "" != a && null != b && "" != b && null != c && "" != c) if (x == Math.ceil(l.length / n) - 1 && f[f.length - 1].vocCode == a && f[f.length - 1].isSpelled) rb(b, c, 0),
            null != d && (d.pauseClock(), d = null, q = !1);
            else {
                k = !1;
                for (e = 0; e < f.length; e++) if (null != f[e].isFstReadSuccess) {
                    k = !0;
                    break
                }
                if (null == g || 0 == x && !k) {
                    if (0 == $("#" + b + "-" + c).attr("isfinished") && ($("#" + b + "-" + c).removeClass("unstudy-gray").removeClass("solid-gray2").addClass("studing-orange").unbind("click").click(function() {
                        Ha()
                    }), null != v && 0 < v.length)) for (e = 0; e < v.length && b != v[e].moduleCode; e++);
                    null != d && d.pauseClock()
                } else null != d ? (d.saveTime(), k = "", g.isRead || 0 != g.vocIndex % n || 0 == x ? Xa(b, c, a) : (k = null != l ? l[g.vocIndex - 1].vocCode: a, Xa(b, c, k)), d.pauseClock()) : (k = "", null == !g.isRead && 0 == g.vocIndex % n && 0 != x ? (k = null != l ? l[g.vocIndex - 1].vocCode: a, Xa(b, c, k)) : Xa(b, c, a))
            } else null != d && (d.pauseClock(), d = null, q = !1);
            pa()
        } else if (h == V) {
            a = !0;
            for (e = 0; e < f.length; e++) if (!f[e].isRead) {
                a = !1;
                break
            }
            a && (q = !1);
            pa()
        } else m("_study_box_state parameter is overflow!");
        null != p && p.stopTimer()
    }
    function Ba(a) {
        var b = $("#UserCode").val(),
        c = [];
        if (null != a) for (var e = 0; e < a.length; e++) if (!a[e].isMemorySaved) {
            if (a[e].isRead) a[e].userVocCurrent.finishReadingTime = 0 != a[e].userVocCurrent.finishReadingTime ? (a[e].finishReadingTime + a[e].userVocCurrent.finishReadingTime) / 2 : a[e].finishReadingTime,
            null == a[e].userVocCurrent.isFstReadSuccess && (a[e].userVocCurrent.isFstReadSuccess = a[e].isFstReadSuccess),
            a[e].userVocCurrent.readFailTimes = a[e].readFailTimes + a[e].userVocCurrent.readFailTimes,
            a[e].userVocCurrent.continueReadFailTimes = a[e].continueReadFailTimes + a[e].userVocCurrent.continueReadFailTimes,
            a[e].userVocCurrent.isHalfReading = a[e].isHalfReading;
            else if (!y) break;
            if (a[e].isSpelled) null == a[e].userVocCurrent.isFstSpellSuccess && (a[e].userVocCurrent.isFstSpellSuccess = a[e].isFstSpellSuccess),
            a[e].userVocCurrent.spellFailTimes = a[e].spellFailTimes + a[e].userVocCurrent.spellFailTimes,
            a[e].userVocCurrent.continueSpellFailTimes = a[e].continueSpellFailTimes + a[e].userVocCurrent.continueSpellFailTimes,
            a[e].userVocCurrent.isHalfSpelling = a[e].isHalfSpelling;
            else if (y) break;
            a[e].userVocCurrent.isRemember = a[e].isReadSuccess && 1 > a[e].continueReadFailTimes && 2 > a[e].readFailTimes && (!y || a[e].isSpellSuccess && 1 > a[e].continueSpellFailTimes && 2 > a[e].spellFailTimes) ? !0 : !1;
            a[e].userVocCurrent.userCode = b;
            a[e].userVocCurrent.vocCode = a[e].vocCode;
            c.push(a[e].userVocCurrent)
        }
        return c
    }
    function sb(a, b) {
        null == a && (a = []);
        if (null != b && 0 < b.length) {
            for (var c = [], e = 0; e < a.length; e++) c.push(a[e].vocCode);
            for (e = 0; e < b.length; e++) - 1 == $.inArray(b[e].vocCode, c) && a.push(b[e])
        }
        return a
    }
    function Ca(a, b) {
        var c = [];
        void 0 != a && null != a && 0 < a.length && (c = sb(c, a));
        if (void 0 != b && null != b && 0 < b.length) c = sb(c, b);
        else if (window.localStorage && window.localStorage.userinfo && isSameUserInLocalStorage()) {
            var e = JSON.parse(window.localStorage.userinfo);
            void 0 != e.reviewVocList && null != e.reviewVocList && "" != e.reviewVocList && (b = JSON.parse(e.reviewVocList), c = sb(c, b))
        }
        if (null != c && 0 < c.length) {
            var d = JSON.stringify(c);
            $.ajax({
                url: "/api/Ajax/AjaxSaveReview",
                data: {
                    vocDataAfterReview: d,
                    studytoken: I,
                    totalReadingTime: TOTAL_READING_TIME,
                    totalWritingTime: TOTAL_WRITING_TIME
                },
                dataType: "json",
                type: "post",
                success: function(e) {
                    q = !1;
                    TOTAL_WRITING_TIME = TOTAL_READING_TIME = 0;
                    setUserReviewVocInfoInLocalStorage(null != a ? a.length: 0, new Date);
                    e.success ? (null != a && tb(a), void 0 != b && null != b && window.localStorage && (e = JSON.parse(window.localStorage.userinfo), e.reviewVocList = "", window.localStorage.userinfo = JSON.stringify(e), $("#handler-content").find(".btnReSaveReview").eq(0).hide()), e = c.length, Ea += parseInt(e * Nc * Oc), e = Q - e, e = e > H.length ? e: H.length, Q = 0 < e ? e: 0, $("#handler-content").find(".reviewNbr").fadeOut(function() {
                        $(this).html(Q).fadeIn()
                    }), 0 == Q && $("#handler-content").find(".btnStartReview").val("\u518d\u8bd5\u8bd5")) : (tb(a), hc(d), m("\u4fdd\u5b58\u5931\u8d25\uff0c\u53ef\u5c1d\u8bd5\u5728\u3010\u8bb0\u5fc6\u66f2\u7ebf\u3011\u4e2d\u518d\u6b21\u4fdd\u5b58\u3002"))
                },
                error: function() {
                    tb(a);
                    hc(d);
                    m("\u4fdd\u5b58\u5931\u8d25\uff0c\u53ef\u5c1d\u8bd5\u5728\u3010\u8bb0\u5fc6\u66f2\u7ebf\u3011\u4e2d\u518d\u6b21\u4fdd\u5b58\u3002")
                }
            })
        } else m("\u6ca1\u6709\u5b8c\u6210\u590d\u4e60\uff0c\u5355\u8bcd\u8981\u53ca\u65f6\u590d\u4e60\u624d\u6709\u6548\u679c\u54e6\u3002")
    }
    function tb(a) {
        if (null != a && 0 < a.length) {
            var b = a.length;
            if (b < H.length) for (var c = 0; c < a.length; c++) for (var e = 0; e < H.length; e++) a[c].vocCode == H[e].vocCode && H.splice(e, 1);
            else H = [];
            for (c = 0; c < b; c++) void 0 != f[c].isMemorySaved && (f[c].isMemorySaved = !0)
        }
    }
    function Kc(a, b) {
        if (null != a && 0 < a.length && null != b && 0 < b.length) for (var c = 0; c < a.length; c++) for (var e = 0; e < b.length; e++) a[c].vocCode == b[e].vocCode && b.splice(e, 1)
    }
    function ic() {
        $("#handler-content").find(".btnReSaveReview").eq(0).fadeIn().unbind("click").click(function() {
            $(this).unbind("click");
            var a;
            a = JSON.parse(window.localStorage.userinfo);
            void 0 != a.reviewVocList && null != a.reviewVocList && "" != a.reviewVocList ? (a = JSON.parse(a.reviewVocList), Ca(null, a)) : m("\u6240\u6709\u5355\u8bcd\u5b66\u4e60\u4fe1\u606f\u5df2\u4fdd\u5b58\uff01", 3E3)
        })
    }
    function hc(a) {
        if (window.localStorage) {
            m("\u4f60\u7684\u7f51\u7edc\u51fa\u73b0\u4e86\u4e9b\u8bb8\u9519\u8bef\uff0c\u53ef\u7a0d\u540e\u5230\u3010\u8bb0\u5fc6\u66f2\u7ebf\u3011\u4e2d\u518d\u6b21\u4e0a\u4f20\u590d\u4e60\u5355\u8bcd\u4fe1\u606f\u3002", 3E3);
            var b = JSON.parse(window.localStorage.userinfo);
            if (void 0 == b.reviewVocList || null == b.reviewVocList) b.reviewVocList = "";
            b.reviewVocList != a && addReviewVocListInLocalStorage(a);
            ic()
        }
    }
    function jc() {
        var a;
        $("#backgroundMusic").get(0);
        a = $("#backgroundMusic").attr("memoryaudio");
        $("#backgroundMusic").get(0).src = a;
        document.getElementById("backgroundMusicEmbed").src = a;
        document.getElementById("backgroundMusic").volume = .1;
        if ($.browser.msie) if (9 <= $.browser.version) $("#backgroundMusic").get(0).play();
        else try {
            document.getElementById("backgroundMusicEmbed").play()
        } catch(b) {
            $("#backgroundMusicEmbed").attr("autostart", !0)
        } else $("#backgroundMusic").get(0).play();
        B.state = !0;
        $("#music_UnitStudy").css({
            "background-position": "0 0px"
        })
    }
    function kc() {
        if ($.browser.msie) if (9 <= $.browser.version) $("#backgroundMusic").get(0).pause();
        else try {
            document.getElementById("backgroundMusicEmbed").pause()
        } catch(a) {
            $("#backgroundMusicEmbed").attr("autostart", !1)
        } else $("#backgroundMusic").get(0).pause();
        B.state = !1;
        $("#music_UnitStudy").css({
            "background-position": "0 -60px"
        })
    }
    function ub() {
        var a = $('\x3cdiv class\x3d"book-unit radius"\x3e\u5b66\u4e60\u62a5\u544a\u5c55\u73b0\u4e86\u60a8\u6700\u8fd1\u4e00\u5468\u5185\u6bcf\u5929\u5b66\u4e60\u7684\x3cfont style\x3d"color:#FF6600;"\x3e\u5355\u8bcd\u6570\u91cf\x3c/font\x3e\u3001\u672c\u6708\x3cfont style\x3d"color:#FF6600;"\x3e\u5b66\u4e60\u65f6\u95f4\x3c/font\x3e\uff1b\u4ee5\u53ca\x3cfont style\x3d"color:#FF6600; "\x3e\u6d4b\u8bd5\u6210\u7ee9\x3c/font\x3e\u7b49\u6570\u636e\u3002\x3c/div\x3e'),
        b = $('\x3cdiv id\x3d"chart_studyReport" style\x3d"padding-right:80px; height: 505px; margin-left:20px; font-size:16px; margin-top:30px; text-align:center;"\x3e\x3c/div\x3e'),
        c = $('\x3cdiv\x3e\x3cdiv class\x3d"report-tabimg"\x3e\x3cspan id\x3d"weekStudyNbrInReport" title\x3d"\u6700\u8fd1\u4e00\u5468\u6240\u5b66\u5355\u8bcd" class\x3d"week"\x3e\u6700\u8fd1\u4e00\u5468\u6240\u5b66\u5355\u8bcd\x3c/span\x3e\x3cspan id\x3d"monthStudyTimeInReport" title\x3d"\u672c\u6708\u5b66\u4e60\u65f6\u95f4\u7edf\u8ba1" class\x3d"months"\x3e\u672c\u6708\u5b66\u4e60\u65f6\u95f4\u7edf\u8ba1\x3c/span\x3e\x3cspan id\x3d"myresultInReport" title\x3d"\u6240\u6709\u6d4b\u8bd5\u6210\u7ee9" class\x3d"all"\x3e\u6240\u6709\u6d4b\u8bd5\u6210\u7ee9\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e');
        $("#handler-content").html($(a));
        $("#handler-content").append($(c));
        $("#handler-content").append($(b))
    }
    function vb(a, b, c, e, d) {
        $.jqplot(a, [b, c], {
            title: "\u3010\u6700\u8fd1\u4e00\u5468\u5185\u5355\u8bcd\u5b66\u4e60\u6570\u91cf\u56fe\u3011",
            fontSize: "12pt",
            grid: {
                drawBorder: !0,
                drawGridlines: !0,
                shadow: !0
            },
            legend: {
                show: !0,
                placement: "inside",
                location: "ne",
                labels: d
            },
            animate: !0,
            animateReplot: !0,
            series: [{
                pointLabels: {
                    show: !0
                },
                renderer: $.jqplot.BarRenderer,
                showHighlight: !1,
                rendererOptions: {
                    animation: {
                        speed: 2500
                    },
                    barWidth: 30,
                    barPadding: 15,
                    barMargin: 10,
                    highlightMouseOver: !1
                }
            },
            {
                rendererOptions: {
                    animation: {
                        speed: 2E3
                    }
                }
            }],
            axesDefaults: {},
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: e,
                    tickOptions: {
                        fontSize: "12pt"
                    }
                },
                yaxis: {
                    tickOptions: {
                        fontSize: "12pt"
                    },
                    rendererOptions: {
                        forceTickAt0: !0
                    }
                }
            },
            highlighter: {
                show: !0,
                showLabel: !0,
                tooltipAxes: "y",
                sizeAdjust: 17,
                tooltipLocation: "ne"
            }
        })
    }
    function Pc() {
        $.ajax({
            type: "get",
            url: "/api/Ajax/AjaxGettestResult",
            data: {},
            dataType: "json",
            cache: !1,
            success: function(a) {
                a.success ? (a = Qc(a.data), $("#chart_studyReport").html(a).hide().fadeIn(), 0 < $("#moreResult").length && $("#moreResult").unbind("click").bind("click",
                function() {
                    window.open("/MyTestResult")
                })) : ($("#chart_studyReport").html('\x3cimg style\x3d"height:150px; padding-top:10px;" src\x3d"/content/images/nothing.png" /\x3e'), $("#chart_studyReport").append('\x3cdiv style\x3d"color:#FF6600; font-size:20px; padding-top:20px"\x3e' + a.msg + "\x3c/div\x3e"))
            },
            error: function() {
                m("\u7f51\u7edc\u9519\u8bef\uff01")
            }
        })
    }
    function Qc(a) {
        for (var b = "",
        c = a.length,
        e = 0; e < c; e++) {
            var d = '\x3cfont color\x3d"red"\x3e\u5426\x3c/font\x3e';
            90 <= a[e].resultScore && 100 > a[e].resultScore && (d = '\x3cfont color\x3d"orange"\x3e\u662f\x3c/font\x3e');
            100 == a[e].resultScore && (d = '\x3cfont color\x3d"green"\x3e\u662f\x3c/font\x3e');
            var f;
            f = parseInt(a[e].realDuration / 60) + "\u5206" + a[e].realDuration % 60 + "\u79d2";
            var g = a[e].createtime,
            h = a[e].unitNbr;
            0 >= h && (h = "-");
            var l = a[e].resultScore;
            100 == l ? l = '\x3cfont color\x3d"red"\x3e' + l + "\x3c/font\x3e": 0 > l && (l = "\u672a\u6d4b\u8bd5");
            var m = a[e].bookName;
            if (5 == a[e].testType || 8 == a[e].testType) m = "-";
            var n = getTestType(a[e].testType),
            b = b + ('\x3ctr title\x3d"\u6d4b\u8bd5\u65e5\u671f:' + g + "; \u6240\u7528\u65f6\u95f4:" + f + '"\x3e\x3ctd\x3e' + (e + 1) + "\x3c/td\x3e\x3ctd\x3e" + m + "\x3c/td\x3e\x3ctd\x3e" + n + "\x3c/td\x3e\x3ctd\x3e" + h + "\x3c/td\x3e\x3ctd\x3e" + l + "\x3c/td\x3e\x3ctd\x3e" + d + "\x3c/td\x3e\x3c/tr\x3e")
        }
        if (10 > c) for (a = 0; a < 10 - c; a++) b += "\x3ctr\x3e\x3ctd\x3e" + (a + 1) + "\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e";
        else b += '\x3c/table\x3e\x3c/div\x3e\x3cdiv id\x3d"moreResult" style\x3d"float:right; margin: 7px -33px 0px 0px;cursor:pointer;"\x3e\x3cspan style\x3d"font-size: 12px; color:green;"\x3e\u66f4\u591a...\x3c/span\x3e\x3c/div\x3e';
        return '\x3cdiv class\x3d"test-result-table" style\x3d"width:606px; margin: 0 auto;"\x3e\x3ctable style\x3d"margin:auto;"\x3e\x3ctr\x3e\x3ctd\x3e\u5e8f\u53f7\x3c/td\x3e\x3ctd\x3e\u8bfe\u672c\x3c/td\x3e\x3ctd\x3e\u6d4b\u8bd5\u7c7b\u578b\x3c/td\x3e\x3ctd\x3e\u5355\u5143\x3c/td\x3e\x3ctd\x3e\u5206\u6570\x3c/td\x3e\x3ctd\x3e\u901a\u8fc7\x3c/td\x3e\x3c/tr\x3e' + b
    }
    function Rc(a) { (new Date).getMonth();
        ha || null == a || null == a[0] ? $.ajax({
            url: "/api/Ajax/AjaxGetMonthVocStudyResult",
            type: "get",
            data: {},
            dataType: "json",
            cache: !1,
            success: function(a) {
                if (a.success) if (0 < a.data.length) {
                    qa[0] = a.data[0].date;
                    qa[1] = a.data[0].totalReadTimes;
                    qa[2] = a.data[0].totalSpellTimes;
                    try {
                        wb(qa)
                    } catch(c) {
                        $.getScript("/content/js/jqplot.js",
                        function() {
                            wb(qa)
                        })
                    }
                    ha = !1
                } else $("#chart_studyReport").html('\x3cimg style\x3d"height:170px; padding-top:10px;" src\x3d"/content/image/children_playing.png" alt\x3d"\u6682\u65f6\u6ca1\u6709\u6700\u8fd1\u7684\u5b66\u4e60\u62a5\u544a" /\x3e'),
                $("#chart_studyReport").append('\x3cdiv style\x3d"color:#FF6600; font-size:20px; padding-top:20px"\x3e\u6682\u65f6\u6ca1\u6709\u6700\u8fd1\u7684\u5b66\u4e60\u62a5\u544a\x3c/div\x3e');
                else $("#chart_studyReport").html('\x3cimg style\x3d"height:150px; padding-top:10px;" src\x3d"/content/image/children_playing.png" /\x3e'),
                $("#chart_studyReport").append('\x3cdiv style\x3d"color:#FF6600; font-size:20px; padding-top:20px"\x3e' + a.msg + "\x3c/div\x3e")
            },
            erorr: function() {
                m("\u7f51\u65ad\u4e86~")
            }
        }) : wb(a)
    }
    function wb(a) {
        var b = a[1];
        a = a[2];
        jQuery.jqplot("chart_studyReport", [[["\u5355\u8bcd\u8bc6\u522b", b], ["\u5355\u8bcd\u62fc\u5199", a]]], {
            title: "\u3010\u672c\u6708\u5b66\u4e60\u65f6\u95f4\u7edf\u8ba1\uff08\u603b\u8ba1\uff1a" + ((b + a) / 60).toFixed(2) + "\u5206\u949f\uff09\u3011",
            grid: {
                drawGridlines: !1,
                shadow: !1
            },
            seriesDefaults: {
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    showDataLabels: !0
                }
            },
            legend: {
                show: !0,
                rendererOptions: {
                    numberRows: 1
                },
                location: "s",
                placement: "outside",
                marginTop: "15px"
            }
        });
        $("#chart_studyReport").hide().fadeIn()
    }
    function lc(a) {
        $("#handle-title").html("\u5b66\u4e60\u62a5\u544a");
        $("#sub-handle-title").html("");
        if ($.browser.msie && 9 >= $.browser.version) return ub(),
        $("#chart_studyReport").html('\x3cimg style\x3d"height:170px; padding-top:10px;" src\x3d"/content/image/children_playing.png" alt\x3d"\u6682\u65f6\u6ca1\u6709\u6700\u8fd1\u7684\u5b66\u4e60\u62a5\u544a" /\x3e'),
        $("#chart_studyReport").append('\x3cdiv style\x3d"color:#FF6600; font-size:19px; line-height:23px; padding-top:20px; margin-left:22px;"\x3e\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301HTML5\u751f\u6210\u7684\u5b66\u4e60\u62a5\u544a\uff0c\u4e3a\u4e86\u60a8\u80fd\u83b7\u5f97\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528Chrome\uff08\u8c37\u6b4c\u6d4f\u89c8\u5668\uff09\uff0c\u6216IE10.0\u53ca\u5176\u4ee5\u4e0a\u7248\u672c\u7684IE\u6d4f\u89c8\u5668\u3002\x3c/div\x3e'),
        !1; ! ia && null != a && null != a[0] && 0 < a[0].length ? (ub(), vb("chart_studyReport", a[0], a[1], a[2], ["\u5355\u8bcd\u6570\u91cf", "\u8d8b\u52bf\u66f2\u7ebf"])) : ($("#handler-content").html($($("#loading0").html()).css({
            "margin-top": "130px"
        })), Sc())
    }
    function Sc() {
        $.ajax({
            url: "/api/Ajax/AjaxGetVocStudyResult",
            type: "get",
            data: {},
            dataType: "json",
            cache: !1,
            success: function(a) {
                ub();
                if (a.success) if (0 < a.data.length) {
                    for (var b = [], c = [], e = [], d = new Date, d = new Date(d.getFullYear(), d.getMonth(), d.getDate()), f = 0; f < a.data.length; f++) {
                        for (; d > new Date(a.data[f][0]);) e.push(d.getMonth() + 1 + "-" + d.getDate()),
                        b.push(0),
                        c.push(0),
                        d.setDate(d.getDate() - 1);
                        e.push(a.data[f].date.substr(5));
                        b.push(a.data[f].voccount);
                        c.push(a.data[f].voccount);
                        d.setDate(d.getDate() - 1)
                    }
                    if (7 > e.length) for (f = e.length; 7 > f; f++) e.push(d.getMonth() + 1 + "-" + d.getDate()),
                    b.push(0),
                    c.push(0),
                    d.setDate(d.getDate() - 1);
                    var g = ["\u5355\u8bcd\u6570\u91cf", "\u8d8b\u52bf\u66f2\u7ebf"];
                    try {
                        vb("chart_studyReport", b, c, e, g)
                    } catch(ja) {
                        $.getScript("/content/js/jqplot.js",
                        function() {
                            vb("chart_studyReport", b, c, e, g)
                        })
                    }
                    Fa[0] = b;
                    Fa[1] = c;
                    Fa[2] = e;
                    ia = !1
                } else $("#chart_studyReport").html('\x3cimg style\x3d"height:170px; padding-top:10px;" src\x3d"/content/image/children_playing.png" alt\x3d"\u6682\u65f6\u6ca1\u6709\u6700\u8fd1\u7684\u5b66\u4e60\u62a5\u544a" /\x3e'),
                $("#chart_studyReport").append('\x3cdiv style\x3d"color:#FF6600; font-size:20px; padding-top:20px"\x3e\u6682\u65f6\u6ca1\u6709\u6700\u8fd1\u7684\u5b66\u4e60\u62a5\u544a\x3c/div\x3e');
                else $("#chart_studyReport").html('\x3cimg style\x3d"height:150px; padding-top:10px;" src\x3d"/content/images/nothing.png" /\x3e'),
                $("#chart_studyReport").append('\x3cdiv style\x3d"color:#FF6600; font-size:20px; padding-top:20px"\x3e' + a.msg + "\x3c/div\x3e")
            },
            erorr: function() {
                console.log("ajaxBuildWeekStudyNbrChart fail!");
                $("#handler-content").find(".loading0").remove();
                $("#handler-content").html($("#handerPromptInfo").html());
                $("#handler-content").find("div [name\x3dhanderPromptInfoDetail]").html("\u7cdf\u7cd5\uff0c\u7f51\u7edc\u51fa\u95ee\u9898\u4e86 ")
            }
        })
    }
    function m(a, b) {
        null != a && "" != a && $("#infoPrompt").children("div").eq(0).html(a);
        "none" == $("#theme-menu").css("display") ? $("#infoPrompt").css("left", "40px") : $("#infoPrompt").css("left", "225px");
        null != b ? $("#infoPrompt").fadeIn(function() {
            setTimeout(function() {
                $("#infoPrompt").fadeOut()
            },
            b)
        }) : $("#infoPrompt").fadeIn(function() {
            setTimeout(function() {
                $("#infoPrompt").fadeOut()
            },
            3E3)
        })
    }
    function Xb() {
        t.lastClickTicket = 0;
        t.timeTicket = (new Date).getTime();
        $("#study").find("span").hasClass("active") || ($("#center-menubar").find("span").removeClass("active"), $(this).find("span").addClass("active"))
    }
    function mb(a) {
        $(a).hover(function() {
            $(this).find(".vocSound").eq(0).show()
        },
        function() {
            $(this).find(".vocSound").eq(0).hide()
        })
    }
    function mc(a) {
        $("#generalVocSound").attr("src", "/soundfile/" + a.substr(0, 1).toUpperCase() + "/" + $.trim(clearSpellingForAudio(a)) + ".mp3");
        $("#generalVocSoundEmbed").attr("src", "/soundfile/" + a.substr(0, 1).toUpperCase() + "/" + $.trim(clearSpellingForAudio(a)) + ".mp3");
        a = $("#generalVocSound");
        void 0 != a && a.load();
        if ($.browser.msie) if (9 <= $.browser.version) $("#generalVocSound").get(0).play();
        else try {
            document.getElementById("generalVocSoundEmbed").play()
        } catch(b) {
            $("#generalVocSoundEmbed").attr("autostart", !0)
        } else $("#generalVocSound").get(0).play()
    }
    function xa(a) {
        var b = $(a).find(".vocSound").eq(0);
        if ($(b).length) {
            var c = $(a).attr("spelling");
            $(a).find(".vocSound").eq(0).unbind("click").bind("click",
            function(a) {
                mc(c);
                a.stopPropagation()
            })
        }
    }
    function lb(a, b, c) {
        var e = "nocolor",
        d = !0;
        null != b && "" != b && (e = b, d = !1);
        b = $.browser.msie && 9 < $.browser.version || $.browser.webkit || $.browser.mozilla ? !0 : !1;
        b ? $(a).click(function(b) {
            var f = $(a).attr("spelling");
            mc(f);
            if (1 == $(this).attr("flip")) $(this).children("div").eq(0).flippyReverse();
            else {
                null != c && 0 < c && nc++;
                nc = 0;
                $(this).attr("flip", 1);
                $(this).find(".vocSound").eq(0).hide();
                var g = $($(this).html()),
                f = $(this).attr("title"),
                k = $(this).attr("mark");
                $(g).find("span").eq(1).html("\x3cfont style\x3d'color:#ff6600'\x3e" + k + "\x3c/font\x3e");
                $(g).find("span").eq(0).html("\x3cfont style\x3d'color:#ff6600'\x3e" + f + "\x3c/font\x3e");
                $(this).children("div").eq(0).flippy({
                    color_target: e,
                    direction: "left",
                    duration: "750",
                    isApplyLight: d,
                    verso: g.html(),
                    onFinish: function() {
                        xa(a)
                    },
                    onReverseFinish: function() {
                        xa(a)
                    }
                })
            }
            b.preventDefault()
        }) : $(a).click(function(a) {
            $(this).slideUp(function() {
                if (0 == $(this).attr("flip")) {
                    $(this).attr("flip", 1);
                    var a = $(this).attr("title");
                    $(this).attr("title", $(this).find("span").eq(0).html());
                    $(this).find("span").eq(1).html(a);
                    $(this).find("span").eq(0).html("");
                    $(this).slideDown()
                } else 1 == $(this).attr("flip") && ($(this).attr("flip", 0), a = $(this).attr("title"), $(this).attr("title", $(this).find("span").eq(1).html()), $(this).find("span").eq(0).html(a), $(this).find("span").eq(1).html($(this).attr("mark")), $(this).slideDown())
            })
        })
    }
    function Tc() {
        $("#handle-title").html("\u81ea\u4e3b\u6d4b\u8bd5");
        $("#sub-handle-title").html("");
        $("#handler-content").html($("#independentTestPrepare").html()).hide().fadeIn();
        $("#handler-content").find(".startTest_independentTest").eq(0).unbind("click").bind("click",
        function() {
            var a = $("#handler-content").find("input[name\x3dtestContent_independentTest]:checked").val(),
            b = $("#handler-content").find("select").eq(0).val(),
            c = [];
            $("#handler-content").find("input[name\x3dtestType_independentTest]:checked").each(function(a, b) {
                c.push($(b).val())
            });
            if (0 < c.length) b = parseInt(b),
            $.browser.msie ? window.showModalDialog("/Test?testArea\x3d" + a + "\x26questionNbr\x3d" + b + "\x26questionTypes\x3d" + c, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight) : window.open("/Test?testArea\x3d" + a + "\x26questionNbr\x3d" + b + "\x26questionTypes\x3d" + c);
            else for (m("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u79cd\u6d4b\u8bd5\u7c7b\u578b\u3002"), a = $("#handler-content").find(".selftest").eq(0).find("tr").eq(1), b = 0; 4 > b; b++) $(a).animate({
                opacity: b % 2 + .2
            })
        })
    }
    function Uc() {
        U = !1;
        $("#handle-title").html("\u6211\u7684\u6536\u85cf");
        $("#sub-handle-title").html("");
        $("#handler-content").html($("#userVocabularyBook").html());
        if (1 == Aa && 0 > Ya) $("#handler-content").html($("#outdateDiv").html());
        else {
            var a = 1,
            b = "",
            c = [];
            $("#handler-content").find("input[name\x3dorderType]:checked").each(function(a, b) {
                c.push($(b).val())
            });
            b = c.join(",");
            if (window.localStorage && isSameUserInLocalStorage()) {
                var e = JSON.parse(window.localStorage.userinfo);
                e.pageNbr && (a = e.pageNbr);
                e.vocPerPage && (F = e.vocPerPage, F != $("#nbrOfPageInUserVocBook").val() && $("#nbrOfPageInUserVocBook").val(F))
            }
            $("#page-content-vocbook").find(".no1").eq(0).html(a);
            $("#handler-content [name\x3dbtnGetVoc]").unbind("click").bind("click",
            function() {
                U = !1;
                var b = "",
                c = [];
                $("#handler-content").find("input[name\x3dorderType]:checked").each(function(a, b) {
                    c.push($(b).val())
                });
                b = c.join(",");
                $("#page-content-vocbook").attr("orderType", b);
                a = 1;
                F = $("#nbrOfPageInUserVocBook").val();
                window.localStorage && (setVocBookOrderTypeInLocalStorage(b), setVocBookPageNbrInLocalStorage(a), setVocBookVocPerPageInLocalStorage(F));
                da(a, F, b);
                U || xb(b)
            });
            $("#page-content-vocbook").attr("orderType", b);
            da(a, F, b);
            U || xb(b)
        }
    }
    function Vc(a, b, c) {
        $("#handle-title").html("\u6211\u7684\u9519\u8bcd\u672c");
        $("#sub-handle-title").html("");
        $("#handler-content").html($("#errorVocabularyBook").html());
        fa(a, b, c);
        $("#btnGoTest").bind("click",
        function() {
            var a = [0, 1, 2, 3];
            0 < a.length && ($.browser.msie ? window.showModalDialog("/Test?testArea\x3d2\x26questionNbr\x3d10\x26questionTypes\x3d" + a, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight) : window.open("/Test?testArea\x3d2\x26questionNbr\x3d10\x26questionTypes\x3d" + a))
        });
        $("#btnGotraining").unbind("click").bind("click",
        function() {
            null != d && (d.pauseClock(), q = !1);
            Ha()
        });
        $("#handler-content [name\x3dbtnGetErrorVoc]").unbind("click").bind("click",
        function() {
            U = !1;
            var c = "",
            d = [];
            $("#handler-content").find("input[name\x3dorderType]:checked").each(function(a, b) {
                d.push($(b).val())
            });
            c = d.join(",");
            $("#page-content-vocbook").attr("orderType", c);
            a = 1;
            window.localStorage && (setVocBookOrderTypeInLocalStorage(c), setVocBookPageNbrInLocalStorage(a), setVocBookVocPerPageInLocalStorage(b));
            fa(a, b, c);
            U || oc(b, c)
        });
        $("#page-content-errorbook").attr("orderType", c)
    }
    function xb(a) {
        $.ajax({
            url: "/api/Ajax/GetVocabularyCount",
            type: "get",
            data: {
                orderType: a
            },
            dataType: "json",
            cache: !1,
            success: function(a) {
                if (a.success) {
                    a = parseInt(a.totalNbr / F + .9);
                    $("#page-content-vocbook").attr("totalPage", a);
                    var b = '\x3ca class\x3d"first"\x3e\u9996\u9875\x3c/a\x3e\x3ca class\x3d"pre"\x3e\x26lt;\u4e0a\u4e00\u9875\x3c/a\x3e',
                    e = 1;
                    if (isSameUserInLocalStorage()) {
                        var d = JSON.parse(window.localStorage.userinfo);
                        d.pageNbr && (e = d.pageNbr)
                    }
                    b += '\x3ca class\x3d"no1" name\x3d"page"\x3e' + e + "\x3c/a\x3e";
                    $("#page-content-vocbook").attr("currentPage", e);
                    b += '\x3ca class\x3d"next"\x3e\u4e0b\u4e00\u9875\x26gt;\x3c/a\x3e\x3ca class\x3d"last"\x3e\u5c3e\u9875\u5171(' + a + ")\u9875\x3c/a\x3e";
                    $("#page-content-vocbook").html(b);
                    var f = $("#page-content-vocbook").attr("orderType");
                    if (null == f || "" == f) f = 0;
                    $("#page-content-vocbook a[name\x3dpage]").unbind("click").bind("click",
                    function() {
                        var a = $(this).html();
                        $("#page-content-vocbook").attr("currentPage", a);
                        da(a, F, f)
                    });
                    $("#page-content-vocbook .first").unbind("click").bind("click",
                    function() {
                        da(1, F, f);
                        $("#page-content-vocbook").attr("currentPage", 1);
                        $("#page-content-vocbook a[name\x3dpage]").html(1)
                    });
                    $("#page-content-vocbook .pre").unbind("click").bind("click",
                    function() {
                        var a = $("#page-content-vocbook").attr("currentPage") - 1;
                        1 >= a && (a = 1);
                        $("#page-content-vocbook .next").show();
                        $("#page-content-vocbook").attr("currentPage", a);
                        $("#page-content-vocbook a[name\x3dpage]").html(a);
                        da(a, F, f)
                    });
                    $("#page-content-vocbook .next").unbind("click").bind("click",
                    function() {
                        var a = $("#page-content-vocbook").attr("currentPage"),
                        a = parseInt(a) + 1;
                        a >= parseInt($("#page-content-vocbook").attr("totalPage")) && (a = $("#page-content-vocbook").attr("totalPage"));
                        $("#page-content-vocbook").attr("currentPage", a);
                        $("#page-content-vocbook a[name\x3dpage]").html(a);
                        da(a, F, f)
                    });
                    $("#page-content-vocbook .last").unbind("click").bind("click",
                    function() {
                        var a = parseInt($("#page-content-vocbook").attr("totalPage"));
                        da(a, F, f);
                        $("#page-content-vocbook").attr("currentPage", a);
                        $("#page-content-vocbook a[name\x3dpage]").html(a)
                    });
                    U = !0
                }
            },
            error: function() {
                m("\u60a8\u7684\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u540e\u518d\u8bd5\u8bd5")
            }
        })
    }
    function oc(a, b) {
        $.ajax({
            url: "/api/Ajax/GetErrorBookCount",
            type: "get",
            data: {
                orderType: b
            },
            dataType: "json",
            cache: !1,
            success: function(c) {
                if (c.success) {
                    c = parseInt(c.totalNbr / a + .9);
                    $("#page-content-errorbook").attr("totalPage", c);
                    var e;
                    e = '\x3ca class\x3d"first"\x3e\u9996\u9875\x3c/a\x3e\x3ca class\x3d"pre"\x3e\x26lt;\u4e0a\u4e00\u9875\x3c/a\x3e\x3ca class\x3d"no1" name\x3d"page"\x3e1\x3c/a\x3e';
                    $("#page-content-errorbook").attr("currentPage", 1);
                    e += '\x3ca class\x3d"next"\x3e\u4e0b\u4e00\u9875\x26gt;\x3c/a\x3e\x3ca class\x3d"last"\x3e\u5c3e\u9875\u5171(' + c + ")\u9875\x3c/a\x3e";
                    $("#page-content-errorbook").html(e);
                    $("#page-content-errorbook a[name\x3dpage]").unbind("click").bind("click",
                    function() {
                        var c = $(this).html();
                        $("#page-content-errorbook").attr("currentPage", c);
                        fa(c, a, b)
                    });
                    $("#page-content-errorbook .first").unbind("click").bind("click",
                    function() {
                        fa(1, a, b);
                        $("#page-content-errorbook").attr("currentPage", 1);
                        $("#page-content-errorbook a[name\x3dpage]").html(1)
                    });
                    $("#page-content-errorbook .pre").unbind("click").bind("click",
                    function() {
                        var c = $("#page-content-errorbook").attr("currentPage") - 1;
                        1 >= c && (c = 1);
                        $("#page-content-errorbook .next").show();
                        $("#page-content-errorbook").attr("currentPage", c);
                        $("#page-content-errorbook a[name\x3dpage]").html(c);
                        fa(c, a, b)
                    });
                    $("#page-content-errorbook .next").unbind("click").bind("click",
                    function() {
                        var c = $("#page-content-errorbook").attr("currentPage"),
                        c = parseInt(c) + 1;
                        c >= parseInt($("#page-content-errorbook").attr("totalPage")) && (c = $("#page-content-errorbook").attr("totalPage"));
                        $("#page-content-errorbook").attr("currentPage", c);
                        $("#page-content-errorbook a[name\x3dpage]").html(c);
                        fa(c, a, b)
                    });
                    $("#page-content-errorbook .last").unbind("click").bind("click",
                    function() {
                        var c = parseInt($("#page-content-errorbook").attr("totalPage"));
                        fa(c, a, b);
                        $("#page-content-errorbook").attr("currentPage", c);
                        $("#page-content-errorbook a[name\x3dpage]").html(c)
                    });
                    U = !0
                }
            },
            error: function() {
                m("\u60a8\u7684\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u540e\u518d\u8bd5\u8bd5")
            }
        })
    }
    function yb(a) {
        U = !1;
        $("#page-content-vocbook").attr("orderType", a);
        F = $("#nbrOfPageInUserVocBook").val();
        window.localStorage && (setVocBookOrderTypeInLocalStorage(a), setVocBookPageNbrInLocalStorage(1), setVocBookVocPerPageInLocalStorage(F));
        da(1, F, a);
        U || xb(a)
    }
    function da(a, b, c) {
        $("#content_userVocabularyBook").html($($("#loading0").html()).css({
            "margin-top": "198px"
        }));
        $.ajax({
            url: "/api/Ajax/GetVocabulary",
            type: "get",
            data: {
                orderType: c,
                start: a - 1,
                limit: b
            },
            dataType: "json",
            cache: !1,
            success: function(a) {
                $("#handler-content").find(".loading0").remove();
                var b = $('\x3cdiv name\x3d"smallVocCard" style\x3d"position:absolute;"  title\x3d"" spelling\x3d""  flip\x3d"0"\x3e\x3cdiv class\x3d"card-shape" mark\x3d"" style\x3d"overflow: hidden;" title\x3d""\x3e\x3ca class\x3d""\x3e\x3cspan class\x3d"f24-w word"\x3e\x3c/span\x3e\x3cspan class\x3d"f14-w yingbiao"\x3e\x3c/span\x3e \x3c/a\x3e\x3cdiv class\x3d"vocSound" style\x3d"display:none;height: 21px;position: absolute;right:8px; bottom:10px;"\x3e\x3cimg src\x3d"/content/image/volume-small-green.png" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
                if (a.success) {
                    $("#content_userVocabularyBook").empty();
                    var c, d, e = a.data.length,
                    f = 25 + (402 - e / 4 * 100) / 2,
                    g = $("#content_userVocabularyBook").width(),
                    h = $("#content_userVocabularyBook").height(),
                    l = [];
                    if (0 < e) for (var m = 0; m < e; m++) {
                        var n;
                        n = $(b).clone();
                        $(n).children("div").eq(0).addClass("cardGray");
                        c = a.data[m].spelling;
                        d = a.data[m].meaning;
                        $(n).attr("title", a.data[m].spelling);
                        $(n).attr("mark", a.data[m].soundMarkUs);
                        $(n).attr("spelling", a.data[m].spelling);
                        13 < c.length ? $(n).find("span").eq(0).css("font-size", "12px").html(d) : $(n).find("span").eq(0).html(a.data[m].meaning);
                        $(n).omDraggable({
                            containment: "#content_userVocabularyBook"
                        });
                        lb(n, null, 4);
                        xa(n);
                        mb(n);
                        $(n).appendTo($("#content_userVocabularyBook"));
                        1 == e ? (c = (g - $(n).children("div").eq(0).width()) / 2, d = h / 2 - .8 * $(n).children("div").eq(0).height()) : (c = 10 + m % 4 * 174, d = f + 100 * parseInt(m / 4));
                        $(n).css({
                            left: c,
                            top: d
                        });
                        l.push($(n))
                    } else $("#content_userVocabularyBook").hide().html('\x3cdiv style\x3d"color:#FF6600; font-weight:bold; font-size:20px;text-align:center;line-height:400px;"\x3e\u6240\u9009\u7c7b\u578b\u6682\u65e0\u5355\u8bcd\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\x3c/div\x3e').fadeIn();
                    $("#content_userVocabularyBook").hide().fadeIn()
                } else $("#content_userVocabularyBook").html('\x3cdiv style\x3d"color:#FF6600; font-weight:bold; font-size:20px;text-align:center;line-height:400px;"\x3e' + a.msg + "\x3c/div\x3e")
            },
            error: function() {
                $("#content_userVocabularyBook").html('\x3cdiv style\x3d"color:#FF6600; font-weight:bold; font-size:20px;text-align:center;line-height:400px;"\x3e\u7cdf\u7cd5\uff0c\u7f51\u7edc\u51fa\u95ee\u9898\u4e86 \x3c/div\x3e')
            }
        })
    }
    function pc() {
        return $("#nocourse_mycourse").length && -16 < Ya ? !1 : !0
    }
    function Fc() {
        $("#greenApplePrompt").css({
            left: 4,
            top: 0
        });
        var a = $("#overlayPage"),
        b = $("#mycourse").offset(),
        c = $("#imgGetCashpoints").offset();
        if (!pc()) {
            $(a).show();
            var d = $("#greenApplePrompt");
            $(d).fadeIn(1E3);
            var f = $("#greenApplePrompt span[name\x3dcloseIt]").eq(0);
            $(f).unbind("click").bind("click",
            function() {
                $(d).fadeOut(function() {
                    $(d).css({
                        left: b.left,
                        top: b.top - 34
                    });
                    $(d).find(".highLightLabel").css({
                        width: "259px",
                        height: "67px"
                    });
                    $(d).find(".promptInfo").html("\u9009\u5b8c\u8bfe\u540e\uff0c\u8bfe\u7a0b\u4f1a\u5728\u8fd9\u91cc\u663e\u793a\uff0c\u70b9\u51fb\u5373\u53ef\u5b66\u4e60\u3002");
                    $(d).find(".promptInfo").parent().parent("div").css("margin-left", "100px");
                    $(f).unbind("click").bind("click",
                    function() {
                        $(d).fadeOut(function() {
                            $(d).css({
                                left: c.left - 2,
                                top: c.top - 2
                            });
                            $(d).find(".highLightLabel").css({
                                width: "20px",
                                height: "20px"
                            });
                            $(d).find(".promptInfo").html("\u70b9\u51fb\u6536\u53d6\u5956\u52b1\u91d1\u5e01\u3002\u4f46\u5982\u679c\u6ca1\u6709\u575a\u6301\u6bcf\u5929\u5b66\u4e60\uff0c\u91d1\u5e01\u4e5f\u662f\u4f1a\u88ab\u6263\u9664\u7684\u54e6\u3002");
                            $(d).find(".promptInfo").parent("div").css("padding-top", 61).parent("div").css("margin-left", 0);
                            $(f).unbind("click").bind("click",
                            function() {
                                $(d).fadeOut(function() {
                                    $(a).fadeOut(function() {
                                        $(d).remove()
                                    })
                                })
                            })
                        }).delay(500).fadeIn()
                    })
                }).delay(500).fadeIn();
                $(d).find(".promptInfo").parent("div").css("padding-top", 74)
            })
        }
    }
    function R() {
        $("#studyBox").html($(Wc));
        $("#singleReadingTime").omDraggable({
            containment: "#studyBox"
        }).dblclick(function() {
            $(this).fadeOut()
        })
    }
    function Xc(a, b) {
        var c = a,
        d = a + b,
        f = setInterval(function() {
            c === d ? clearInterval(f) : (0 < b ? c++:c--, $("#cashPoint").html(c))
        },
        100)
    }
    function qc(a) {
        var b = $("#cardNo_registerBookBoxOnBookShelf").val(),
        c = $("#cardPwd_registerBookBoxInBookShelf").val();
        null != b && "" != b && null != c && "" != c ? ($("#registerBookBoxOnBookShelf").fadeOut("fast"), $("#course-list").html($($("#loading0").html()).css({
            "margin-top": "100px"
        })), $.ajax({
            type: "get",
            url: "data.json",
            data: {
                moduleCode: a,
                cardNo: b,
                cardPwd: c
            },
            dataType: "json",
            cache: !1,
            success: function(a) {
                var b = '\x3cdiv style\x3d"text-align: center; padding-top: 100px;"\x3e\x3cspan style\x3d"font-size: 20px;line-height: 25px;"\x3e' + a.msg + "\x3c/span\x3e\x3c/div\x3e";
                $("#course-list").html(b);
                a.success ? (Aa = 2, $("#UserState").val(2), setTimeout(function() {
                    $("#closeShelf").click()
                },
                700), rc(a)) : m(a.msg)
            },
            error: function() {
                $("#course-list").html("").append(za('\x3cdiv style\x3d"text-align: center; padding-top: 100px;"\x3e\x3cspan style\x3d"cursor: pointer;font-size: 20px;line-height: 25px; color:#FF6600;"\x3e\u2299\ufe4f\u2299\uff0c\u7f51\u6302\u4e86\uff0c\u2192\u70b9\u6211\uff0c\u91cd\u65b0\u5f00\u901a\u4e00\u4e0b\u8bfe\u7a0b~\x3c/span\x3e\x3c/div\x3e', qc))
            }
        })) : (promptForInput("cardNo_registerBookBoxOnBookShelf", "#CCC", "#3eabff"), promptForInput("cardPwd_registerBookBoxInBookShelf", "#CCC", "#3eabff"))
    }
    function rc(a) {
        $("#nocourse_mycourse") && $("#nocourse_mycourse").remove();
        if (1 == a.condition) {
            var b = $("\x3cspan\x3e\x3cspan title\x3d'\u5230\u671f\u65f6\u95f4\uff1a" + renderDateTime(a.book.endDate) + "'\x3e\x3ca class\x3d'bookitem new newBookLink' code\x3d'" + a.book.moduleCode + "'\x3e" + a.book.bookName + "\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e");
            $("#mycourse").prepend(b.html());
            $("#mycourse").find(".newBookLink").unbind("click").bind("click",
            function() {
                ea($(this))
            });
            2 == a.toState && $("#theme-slide").find(".trialOverlay").remove()
        } else if (2 == a.condition) {
            var c = !1;
            $("#mycourse").children("span").each(function(b, d) {
                $(d).find("a").attr("code") == a.book.moduleCode && ($(d).find("a").css("color", "#4D4D4D"), $(d).attr("title", "\u5230\u671f\u65f6\u95f4\uff1a" + renderDateTime(a.book.endDate)), c = !0)
            });
            c || (b = $("\x3cspan\x3e\x3cspan title\x3d'\u5230\u671f\u65f6\u95f4\uff1a" + renderDateTime(a.book.endDate) + "'\x3e\x3ca class\x3d'bookitem newBookLink' code\x3d'" + a.book.moduleCode + "'\x3e" + a.book.bookName + "\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e"), $("#mycourse").prepend(b.html()), $("#mycourse").find(".newBookLink").unbind("click").bind("click",
            function() {
                ea($(this))
            }));
            2 == a.toState && $("#theme-slide").find(".trialOverlay").remove()
        }
    }
    function sc(a) {
        $("#course-list").html($($("#loading0").html()).css({
            "margin-top": "100px"
        }));
        $.ajax({
            type: "get",
            url: "test/data.json",
            data: {
                moduleCode: a
            },
            dataType: "json",
            cache: !1,
            success: function(a) {
                var b = '\x3cdiv style\x3d"text-align: center; padding-top: 100px;"\x3e\x3cspan style\x3d"font-size: 20px;line-height: 25px;"\x3e' + a.msg + "\x3c/span\x3e\x3c/div\x3e";
                $("#course-list").html(b);
                a.success && rc(a)
            },
            error: function() {
                $("#course-list").html("").append(za('\x3cdiv style\x3d"text-align: center; padding-top: 100px;"\x3e\x3cspan style\x3d"cursor: pointer;font-size: 20px;line-height: 25px; color:#FF6600;"\x3e\u2299\ufe4f\u2299\uff0c\u7f51\u6302\u4e86\uff0c\u2192\u70b9\u6211\uff0c\u91cd\u65b0\u8bd5\u7528~\x3c/span\x3e\x3c/div\x3e', sc))
            }
        })
    }
    function Yc(a) {
        switch (a) {
        case - 2 : return "\u6240\u6709\u8bfe\u7a0b";
        case 1:
            return "\u5c0f\u5b66\u82f1\u8bed";
        case 2:
            return "\u521d\u4e2d\u82f1\u8bed";
        case 3:
            return "\u9ad8\u4e2d\u82f1\u8bed";
        case 4:
            return "\u5927\u5b66\u82f1\u8bed";
        case 5:
            return "\u8003\u8bd5\u82f1\u8bed";
        case 6:
            return "\u884c\u4e1a\u82f1\u8bed";
        case 7:
            return "\u5176\u5b83\u82f1\u8bed";
        case "-2":
            return "\u6240\u6709\u8bfe\u7a0b";
        case "1":
            return "\u5c0f\u5b66\u82f1\u8bed";
        case "2":
            return "\u521d\u4e2d\u82f1\u8bed";
        case "3":
            return "\u9ad8\u4e2d\u82f1\u8bed";
        case "4":
            return "\u5927\u5b66\u82f1\u8bed";
        case "5":
            return "\u8003\u8bd5\u82f1\u8bed";
        case "6":
            return "\u884c\u4e1a\u82f1\u8bed";
        case "7":
            return "\u5176\u5b83\u82f1\u8bed";
        default:
            return "\u6240\u6709\u82f1\u8bed"
        }
    }
    function Zc(a) {
        $("#bookGroupName").html(Yc(a));
        void 0 != a && $.ajax({
            url: "./servlet/ajaxgetbookgroup.do?method\x3dgetbookgroupnames",
            type: "post",
            dataType: "json",
            data: {
                type: a
            },
            cache: !1,
            success: function(a) {
                if (a.success) {
                    var b = "";
                    a = a.bookgroups;
                    for (var d = 0; d < a.length; d++) b += '\x3cspan\x3e\x3ca class\x3d"bookgroupitem" type\x3d"' + a[d].bookType + '"\x3e' + a[d].bookGroupName + "\x3c/a\x3e\x3c/span\x3e";
                    $("#bookGroupDetail").html(b);
                    $("#bookGroupDetail").find(".bookgroupitem").unbind("click").bind("click",
                    function() {
                        getBookListByBookGroupName($(this).attr("type"), 1, $(this).html())
                    })
                }
            },
            error: function() {
                m("\u7f51\u7edc\u51fa\u9519\u4e86~~~")
            }
        })
    }
    function Sb() {
        $("#pbarContainer").hide();
        pc() && $("#overlayPage").fadeOut()
    }
    function cb() {
        if (!Na) {
            null == C && (window.craicAudioContext = window.AudioContext || window.webkitAudioContext, navigator.getMedia = navigator.webkitGetUserMedia || navigator.getUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
            try {
                null == C && (C = new craicAudioContext, console.log("create _audio_context")),
                navigator.getMedia ? navigator.getMedia({
                    audio: !0
                },
                $c, ad) : console.log("getUserMedia not supported"),
                Na = !0
            } catch(a) {
                console.log("webkitGetUserMedia threw exception :" + a)
            }
        }
    }
    function pa() {
        O && O.onaudioprocess && (O.onaudioprocess = null);
        ra && ra.stop();
        Za && Za.disconnect();
        Na = !1
    }
    function tc(a) {
        var b = document.getElementById("analyser"),
        c = b.width;
        a = b.height;
        sa = b.getContext("2d");
        var b = Math.round(c / 3) + 100,
        d = new Uint8Array(J.frequencyBinCount);
        J.getByteFrequencyData(d);
        sa.clearRect(0, 0, c, a);
        sa.fillStyle = "#F6D565";
        sa.lineCap = "round";
        for (var c = J.frequencyBinCount / b,
        f = 0; f < b; ++f) {
            for (var g = 0,
            h = Math.floor(f * c), l = 0; l < c; l++) g += d[h + l];
            g /= c;
            sa.fillStyle = "hsl( " + Math.round(360 * f / b) + ", 90%, 50%)";
            sa.fillRect(3 * f, a, 1.5, -g / 3)
        }
        Ga = window.requestAnimationFrame(tc)
    }
    function $c(a) {
        ra = a;
        Za = C.createMediaStreamSource(ra);
        O = C.createScriptProcessor(4096, 1, 1);
        J = C.createAnalyser();
        J.smoothingTimeConstant = 0;
        J.fftSize = 1024;
        Za.connect(J);
        J.connect(O);
        O.connect(C.destination);
        va = new Uint8Array(J.frequencyBinCount)
    }
    function ad(a) {}
    store.clear();
    initialThemeMenu();
    var aa = function(a) {
        var b = a,
        c = null;
        aa.prototype.startTimer = function() {
            if (0 == b) {
                clearTimeout(c);
                if (h == A || h == D || h == N) Mb(),
                pb(),
                hb();
                else if (h == V) if ($("#goNextArea_speakSection").fadeIn(), 1 == Z) {
                    g.isRead = !0;
                    g.isReadSuccess = g.isReadSuccess;
                    g.readFailTimeCount++;
                    for (var a = !1,
                    k = 0; k < w.length; k++) if (w[k] == g.slideSeqNbr) {
                        a = !0;
                        g.readFailTimeCount > uc && w.splice(k, 1);
                        break
                    }
                    a || (w.push(g.slideSeqNbr), d.totalReadingNbr < f.length && d.totalReadingNbr++);
                    d.totalReadingTry++
                } else {
                    g.isSpell = !0;
                    g.isSpellSuccess = !1;
                    g.spellFailTimeCount++;
                    a = !1;
                    for (k = 0; k < u.length; k++) if (u[k] == g.slideSeqNbr) {
                        g.spellFailTimeCount > uc && u.splice(k, 1);
                        a = !0;
                        break
                    }
                    a || (u.push(g.slideSeqNbr), d.correctWritingVocNbr < f.length && d.correctWritingVocNbr++);
                    d.successWritingOfTry++
                }
                ba(na)
            } else b--,
            $("#singleReadingTime").html(b),
            c = setTimeout(arguments.callee, 1E3)
        };
        aa.prototype.stopTimer = function() {
            null != c && clearTimeout(c)
        };
        void 0 == aa._initialized && (aa.prototype.getReadingTime = function() {
            return b
        })
    },
    g = null,
    l = [],
    ab = 5,
    n = ab,
    f = [],
    E = [],
    Q = 0,
    x = 0,
    w = [],
    u = [],
    M = 6,
    d = null,
    p = null,
    Qa = null,
    fb = 0,
    na = 1,
    ka = 2,
    Ac = 4,
    ta = 1E3,
    ya = !1,
    X = new SingletonTimeoutHandler,
    P = parseInt($("#UserSecond4SpellingLetter").val()),
    Ra = 0,
    W = new SingletonTimeoutHandler,
    q = !1,
    Wc = $("#studyBox").html(),
    A = 1,
    D = 2,
    V = 5,
    N = 6,
    h = A,
    v = [],
    B = null,
    H = [],
    vc = !1,
    T = {},
    Fa = [],
    qa = [],
    ia = !1,
    ha = !1,
    t = new ClickHandler,
    Ea = 0,
    oa = !0,
    Aa = $("#UserState").val(),
    bd = $("#UserLoginTimes").val(),
    Ya = $("#leftTryTimes").val(),
    cd = $("#maxTrialTimes").val(),
    y = "true" === $("#UserSpellOn").val(),
    bb = "true" === $("#UserFollowSpeakOn").val() || 1 == getFollowSpeakOnThisInLocalStorage($("#UserId").val()),
    Nc = $("#UserPointDiscount").val(),
    Oc = $("#pointForEachReviewVoc").val(),
    uc = 1,
    C = null,
    Za = null,
    sa = null,
    J = null,
    O = null,
    ra = null,
    va = [],
    S = null,
    db = 10,
    Oa = null,
    Na = !1,
    Ga = null,
    Pa = !1,
    Fb = null,
    wc = !1,
    Sa = !0,
    la = null,
    L = !1,
    ca = !1,
    I = null,
    Z = 1;
    $("#studyBox").delegate("#playRecordInSpeakSection", "click",
    function() {
        Eb()
    });
    var $a = !1;
    $("#studyBox").delegate("#speakMicInSpeakSection", "mousedown",
    function() {
        if (!$a && ($a = !0, $(this).children("div").eq(0).hide().siblings(0).show(), $(this).attr("animated", 1), $("#speakResultInSpeakSection").focus(), S = null, yc(), null != C && null != ra)) {
            var a = C.createGain();
            C.createMediaStreamSource(ra).connect(a);
            J = C.createAnalyser();
            J.fftSize = 2048;
            a.connect(J);
            zeroGain = C.createGain();
            zeroGain.gain.value = 0;
            a.connect(zeroGain);
            zeroGain.connect(C.destination);
            tc()
        }
    });
    $("#studyBox").delegate("#speakMicInSpeakSection", "mouseup",
    function() {
        $a && ($a = !1, $(this).children("div").eq(1).hide().siblings(0).show(), $(this).attr("animated", 0), O.onaudioprocess = null, Eb(), Ga && window.cancelAnimationFrame(Ga))
    });
    $("#wordAudio_symbol").live("click",
    function() {
        eb()
    });
    $(".wordAudio_symbol_big").live("click",
    function() {
        eb()
    });
    $("#wordAudio_symbol_reverse").live("click",
    function() {
        eb()
    });
    $("#startUnitStudy").live("click",
    function() {
        $("#door_exitUnitStudy").css("display", "inline");
        $("#startSection").css("display", "none");
        $("#readingSection").fadeIn();
        $("#singleReadingTime").css("display", "block");
        $("#vocRecTimeCounterOff_setting").is(":checked") && $("#singleReadingTime").css("display", "none");
        $("#readingSectionStatics").css("display", "block");
        null != d && d.startReadingClock(TOTAL_READING_TIME);
        null != p && p.stopTimer();
        p = new aa(M);
        p.startTimer();
        $("#go_next").click();
        $.browser.msie && 9 > $.browser.version || L || (L = L = !0)
    });
    $("#startVocSpeak").live("click",
    function() {
        $("#startSection").css("display", "none");
        $("#speakSection").fadeIn();
        $("#readingSectionStatics").css("display", "none");
        $("#singleReadingTime").css("display", "block");
        $("#vocRecTimeCounterOff_setting").is(":checked") && $("#singleReadingTime").css("display", "none");
        null != d && d.startReadingClock(TOTAL_READING_TIME);
        null != p && p.stopTimer();
        $("#go_next_speakSection").click();
        cb()
    });
    $("#cancelUnitStudy").live("click",
    function() {
        $("#studyBox").omDialog("close")
    });
    $("#saveVocSpeak").live("click",
    function() {
        $("#studyBox").omDialog("close");
        $("#startInfo").find("font").eq(0).html();
        var a = $("#current_module_unit").val();
        if (null != a || "" != a) a.substr(3, 32),
        a.substr(36),
        $("#current_module_unit").val("")
    });
    $("#go_next").live("click",
    function() {
        var a = !1;
        f[f.length - 1].isRead && 0 == w.length && (a = !0);
        if (!a) {
            var b = !1;
            do
            if (0 != Math.floor(10 * Math.random() % 2)) {
                if (0 < f.length && null != g && null != f[f.length - 1] && !f[f.length - 1].isRead) {
                    cc();
                    for (b = g.slideSeqNbr; f[b % n].isRead;) b++;
                    g = f[b % n];
                    Db(g);
                    b = !0
                }
            } else {
                var c = 0;
                if (0 < w.length) {
                    do {
                        var e = w[Math.floor(Math.random() * w.length)];
                        if (8 > f[e % n].readFailTimes) {
                            cc();
                            g = f[e % n];
                            Db(g);
                            b = !0;
                            break
                        }
                        c++
                    } while ( 8 > c );
                    8 <= c && (a = b = !0)
                }
            }
            while (!b)
        }
        a && (pa(), y ? (p.stopTimer(), null != d && d.pauseClock(), dc(), f.length > Ia && h == D ? fc() : ($("#seperateSectionOne").fadeIn(), $("#toNextStep").focus())) : f.length > Ia && h == D ? (null != d && d.pauseClock(), dc(), fc()) : Math.ceil(l.length / n) > x + 1 ? ec() : (d.pauseClock(), Kb(), Va(), ua && h == D ? ac() : gc()))
    });
    $("#go_next_speakSection").live("click",
    function() {
        var a = Z,
        b = !1;
        f[f.length - 1].isRead && (b = !0);
        if (!b) {
            var c;
            c = 1 == a ? f[f.length - 1].isRead: f[f.length - 1].isSpell;
            if (0 < f.length && null != g && null != f[f.length - 1] && !c) if (c = g.slideSeqNbr, 1 == a) {
                for (; f[c % n].isRead;) c++;
                c = g = f[c % n];
                $("#speakResultInSpeakSection").val("");
                30 > c.spelling.length + c.soundMarkUs.length ? ($("#spelling_speakSection").css({
                    "font-size": "46px",
                    "line-height": "50px"
                }).html($.trim(clearNonEnglishSymbolForString(c.spelling))), $("#soundMarkUs_speakSection").css({
                    "font-size": "27px"
                }).html(c.soundMarkUs)) : ($("#spelling_speakSection").css({
                    "font-size": "30px",
                    "line-height": "33px"
                }).html($.trim(clearNonEnglishSymbolForString(c.spelling))), $("#soundMarkUs_speakSection").css({
                    "font-size": "20px"
                }).html(c.soundMarkUs));
                $("#stardardSpeak_speakSection").val($.trim(clearNonEnglishSymbolForString(c.spelling)));
                $("#meaning_speakSection").find("div").eq(0).html(c.meaning);
                Ma(c, $("#wordAudio_content_speakSection"), "speak_word_audio_embed");
                $("#audio_word_or_sen_symbol_speakSection").click();
                $("#goNextArea_speakSection").hide();
                null != p && p.stopTimer();
                p = new aa(7);
                p.startTimer()
            } else {
                for (; f[c % n].isSpell;) c++;
                g = f[c % n]
            }
        }
        b && (p.stopTimer(), d.pauseClock(), d.isForcePause = !0, window.clearInterval(null), 1 == a ? Mc() : ($("#speakSection").css("display", "none"), $("#readingSectionStatics").css("display", "none"), $("#studyProgressDiv").hide(), Va(), $("#finishSection").fadeIn()))
    });
    $("#go_next_reverse").live("click",
    function() {
        0 < f.length && g.slideSeqNbr < f[f.length - 1].slideSeqNbr ? (g = f[(g.slideSeqNbr + 1) % n], Gb(g)) : (d.pauseClock(), y ? ($("#reverseSection").css("display", "none"), $("#readingSectionStatics").hide(), $("#seperateSectionOne").fadeIn()) : Math.ceil(l.length / n) > x + 1 ? ec() : (Kb(), Va(), ua && h == D ? ac() : gc()))
    });
    $("#btnRemember").live("click",
    function() {
        pb();
        $("#wordConfirmArea").fadeIn();
        $("#goNextArea").css("display", "none");
        null != p && p.stopTimer()
    });
    $("#btnForget").live("click",
    function() {
        pb();
        Mb();
        hb();
        ba(na);
        null != p && p.stopTimer()
    });
    $("#btnTooEasy").live("click",
    function() {
        null != p && p.stopTimer();
        Nb();
        ba(na);
        $("#go_next").click()
    });
    $("#confirm_right_unitStudy").live("click",
    function() {
        Nb();
        ba(na);
        $("#go_next").click()
    });
    $("#confirm_wrong_unitStudy").live("click",
    function() {
        hb();
        g.isHalfReading = !0;
        ba(na);
        $("#go_next").click()
    });
    $("#btnStartReverse").live("click",
    function() {
        0 < f.length && (g = f[0], Gb(g), null != d && ($("#readingSectionStatics").show(), d.continueClock()));
        $("#seperateSectionZero").css("display", "none");
        $("#reverseSection").fadeIn()
    });
    $("#btnStartUnitReview").live("click",
    function() {
        Cc()
    });
    $("#toNextStep").live("click",
    function() {
        Rb()
    });
    $("#toNextStep_NonOrder").live("click",
    function() {
        f.sort(function() {
            return.5 < Math.random() ? -1 : 1
        });
        for (var a = 0; a < f.length; a++) f[a].slideSeqNbr = a;
        Rb()
    });
    $("#wsNext").live("click",
    function() {
        wa();
        var a = $("#wsStardardVoc").val(),
        b = compareUserInputAndStandarSpelling(a, $("#wsWriting").val());
        if (ya) 2E3 < (new Date).getTime() - d.timeTicket && ( - 1 == b ? (d.timeTicket = (new Date).getTime(), $("#wsNext").hide(), a = Ob(), Qb(), 0 == a && (ba(ka), jb())) : zb.play());
        else if (2E3 < (new Date).getTime() - d.timeTicket) if (d.timeTicket = (new Date).getTime(), $("#wsNext").hide(), -1 == b) a = Ob(),
        Qb(),
        0 == a && (ba(ka), jb());
        else {
            g.isSpelled = !0;
            g.spellTimes++;
            d.totalWritingTry++;
            d.nextPointOfStartToSpellCorrect = d.totalWritingTry;
            for (var c = !1,
            e = 0; e < u.length; e++) if (u[e] == g.slideSeqNbr) {
                c = !0;
                break
            }
            c || (u.push(g.slideSeqNbr), d.currentTotalWritingNbr < f.length && d.currentTotalWritingNbr++);
            null == g.isFstSpellSuccess && (g.isFstSpellSuccess = !1);
            null != g.isLastSpellSuccess && g.isLastSpellSuccess && (g.isHalfSpelling = !0);
            null == g.isLastSpellSuccess || g.isLastSpellSuccess || (g.continueSpellFailTimes++, 3 > g.spellFailTimeCount && g.spellFailTimeCount++, g.isContinueSpellFail = !0);
            g.spellFailTimes++;
            3 > g.spellFailTimeCount && g.spellFailTimeCount++;
            g.isLastSpellSuccess = !1;
            $("#checkWriting").children("img").eq(1).fadeIn(); - 1 != b && $("#wsStardardVocShowing").html('\x3cfont style\x3d"color:#05ad78;"\x3e' + a.substr(0, b) + "\x3c/font\x3e" + a.substr(b));
            $("#wsStardardVocShowing").fadeIn();
            ba(ka);
            jb()
        }
        h == A && !$("#door_exitUnitStudy").is(":visible") && g.slideSeqNbr > .3 * f.length && $("#door_exitUnitStudy").fadeIn()
    });
    var Ab = !1;
    $("#ssNext").live("click",
    function() {
        Ab || (Ab = !0, $("#ssNext").parent().hide(), Ab = !1)
    });
    var z = [],
    K = 0;
    $("#toFini_unitReview").live("click",
    function() {
        K = z.length;
        $("#unitReview").css("display", "none");
        $("#finishSection").fadeIn()
    });
    $("#studyBox").delegate("#wordAudio_ws_symbol", "click",
    function() {
        var a = $("#wordAudio_ws_content").find("audio").get(0);
        void 0 != a && a.load();
        if ($.browser.msie) if (9 <= $.browser.version) $("#wordAudio_ws_content").find("audio").get(0).play();
        else try {
            document.getElementById("word_audio_ws_embed_v2").play()
        } catch(b) {
            $("#word_audio_ws_embed_v2").attr("autostart", !0)
        } else $("#wordAudio_ws_content").find("audio").get(0).play()
    });
    $("#theme-slide").delegate(".study-change", "mouseover",
    function() {
        $(this).siblings("label").addClass("gray-text").removeClass("study-change-active");
        $(this).removeClass("gray-text").addClass("study-change-active")
    }).delegate(".study-change", "mouseout",
    function() {
        "0" == $(this).attr("on") && ($(this).removeClass("study-change-active").addClass("gray-text"), $(this).siblings("label").each(function(a, b) {
            "1" == $(b).attr("on") && $(this).addClass("study-change-active").removeClass("gray-text")
        }))
    });
    $("#studyBox").omDialog({
        id: "unitStudyDialog",
        autoOpen: !1,
        modal: !0,
        width: 860,
        closeOnEscape: !1,
        onOpen: function() {
            null != d && d.restartClock();
            zc();
            null == B && (B = new AlphaMusic(!1, !1), $("#alphaOn_setting").is(":checked") ? B.autostart = !0 : B.autostart = !1, B.state = !1);
            B.autostart && jc();
            h == A ? ($("#wordDel_symbol").show(), y && ($("#btnTooEasyDiv").show(), $("#btnOfCover").css("margin-left", 42))) : h == N ? ($("#wordDel_symbol").show(), y && ($("#btnTooEasyDiv").show(), $("#btnOfCover").css("margin-left", 42))) : ($("#door_exitUnitStudy").show(), $("#btnTooEasyDiv").hide(), $("#btnOfCover").css("margin-left", 149));
            document.onkeydown = Yb;
            document.onkeyup = Jc;
            document.onmousedown = Yb
        },
        onClose: function() {
            Ga && window.cancelAnimationFrame(Ga);
            L = !1;
            kc();
            null != Qa && ma();
            wa();
            pa()
        }
    });
    $("#confirm_registerBookBox").click(function() {
        registerBook($("#bookcode_registerBookBox").val())
    });
    $("#cancel_registerBookBox").click(function() {
        var a = $("#overlayPage");
        null != a && 0 < a.length && $(a).fadeOut();
        $("#registerBookBox").fadeOut()
    });
    var ua = !0,
    Ia = 10,
    Da = function(a, b, c, d, f, g) {
        var e = $("#report_total").html(),
        k = $("#report_unFinished").html();
        E.length = 0;
        $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxInterruptSaveUnit",
            dataType: "json",
            data: {
                moduleCode: a,
                extra: "dontdelete",
                unitNbr: b,
                vocCode: c,
                studytoken: I,
                totalReadingTime: f,
                totalWritingTime: g,
                vocDataAfterReview: d,
                totalnum: e - k
            },
            success: function(e) {
                if (e.success) {
                    if (store.remove("userdata"), TOTAL_WRITING_TIME = TOTAL_READING_TIME = 0, ha = ia = !0, null != v && 0 < v.length) for (var f = 0; f < v.length; f++) if (a == v[f].moduleCode) {
                        null != e.latestStudyPosition && 2 == e.isFinished && ($("#" + a + "-" + b).removeClass("unstudy-gray").removeClass("solid-gray2").addClass("studing-orange"), $("#s-" + a + "-" + b).removeClass("solid-gray2").addClass("unstudy-gray"));
                        store(a + "-" + b, "studing-orange");
                        store("s-" + a + "-" + b, "unstudy-gray");
                        T = v[f];
                        T.currentPosition = e.latestStudyPosition;
                        break
                    }
                } else 0 == e.success && (store.remove("userdata"), addUnitVocListInLocalStorage(a, b, c, I, TOTAL_READING_TIME, TOTAL_WRITING_TIME, d))
            },
            error: function() {
                store.remove("userdata");
                addUnitVocListInLocalStorage(a, b, c, I, TOTAL_READING_TIME, TOTAL_WRITING_TIME, d)
            }
        })
    },
    Xa = function(a, b, c) {
        var d = JSON.stringify(ga());
        E.length = 0;
        $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxErrorStudySave",
            dataType: "json",
            data: {
                moduleCode: a,
                extra: "dontdelete",
                unitNbr: b,
                vocCode: c,
                studytoken: I,
                totalReadingTime: TOTAL_READING_TIME,
                totalWritingTime: TOTAL_WRITING_TIME,
                vocDataAfterReview: d
            },
            success: function(c) {
                if (c.success) {
                    if (TOTAL_WRITING_TIME = TOTAL_READING_TIME = 0, ha = ia = !0, null != v && 0 < v.length) for (var d = 0; d < v.length; d++) if (a == v[d].moduleCode) {
                        null != c.latestStudyPosition && 2 == c.isFinished && ($("#" + a + "-" + b).removeClass("unstudy-gray").removeClass("solid-gray2").addClass("studing-orange"), $("#s-" + a + "-" + b).removeClass("solid-gray2").addClass("unstudy-gray"), v[d].unitStudyState[b - v[d].startFrom] = c.isFinished);
                        T = v[d];
                        T.currentPosition = c.latestStudyPosition;
                        break
                    }
                } else m(c.msg)
            }
        })
    },
    Wa = function(a, b, c, d, f, g) {
        E.length = 0;
        var e = -1;
        P != parseInt($("#UserSecond4SpellingLetter").val()) && (e = P);
        $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxFinishSaveUnit",
            dataType: "json",
            data: {
                moduleCode: a,
                extra: "finish",
                unitNbr: b,
                studytoken: I,
                isContinue: c,
                seconds4SpellingLetter: e,
                totalReadingTime: f,
                totalWritingTime: g,
                vocDataAfterReview: d,
                totalWordsNbr: l.length
            },
            success: function(c) {
                store.remove("userfinishdata");
                c.success ? (TOTAL_WRITING_TIME = TOTAL_READING_TIME = 0, La(a, b, c.latestStudyPosition), ha = ia = !0) : alert("\u7f51\u7edc\u51fa\u73b0\u95ee\u9898\uff0c\u8bf7\u70b9\u51fb\u5237\u65b0\u8bb0\u5f55\u91cd\u65b0\u63d0\u4ea4\uff01")
            },
            error: function() {
                store.remove("userfinishdata");
                addUnitVocFinishListInLocalStorage(a, b, e, I, TOTAL_READING_TIME, TOTAL_WRITING_TIME, d, c)
            }
        })
    },
    rb = function(a, b, c) {
        var d = JSON.stringify(ga());
        E.length = 0;
        var f = -1;
        P != parseInt($("#UserSecond4SpellingLetter").val()) && (f = P);
        $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxERRORFinishSave",
            dataType: "json",
            data: {
                moduleCode: a,
                extra: "dontdel",
                unitNbr: b,
                studytoken: I,
                isContinue: c,
                seconds4SpellingLetter: f,
                totalReadingTime: TOTAL_READING_TIME,
                totalWritingTime: TOTAL_WRITING_TIME,
                vocDataAfterReview: d
            },
            success: function(a) {
                a.success ? (TOTAL_WRITING_TIME = TOTAL_READING_TIME = 0, ha = ia = !0) : m(a.msg)
            }
        })
    },
    dd = function(a, b, c) {
        var d = JSON.stringify(ga());
        E.length = 0;
        R();
        $("#unit_study_slide").append($($("#loading0").html()).css({
            position: "absolute",
            width: "100%",
            "margin-top": "10px"
        }));
        var f = -1;
        P != parseInt($("#UserSecond4SpellingLetter").val()) && (f = P);
        $.ajax({
            type: "post",
            url: "/api/Ajax/AjaxFinishSaveUnit",
            dataType: "json",
            data: {
                moduleCode: a,
                extra: "dontdel",
                unitNbr: b,
                studytoken: I,
                isContinue: c,
                seconds4SpellingLetter: f,
                totalReadingTime: TOTAL_READING_TIME,
                totalWritingTime: TOTAL_WRITING_TIME,
                vocAfterUnitStudyString: d
            },
            success: function(c) {
                c.success ? (TOTAL_WRITING_TIME = TOTAL_READING_TIME = 0, La(a, b, c.latestStudyPosition), ha = ia = !0, Ea += c.cashPoint, c = a + "-" + (parseInt(b) + 1), Ka(c, !0)) : m(c.msg)
            }
        })
    };
    $("#toNextUnit").live("click",
    function() {
        if (h == A) m("\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879");
        else if (h == D) {
            var a = $("#current_module_unit").val();
            if (null != a || "" != a) {
                var b = a.substr(0, 36),
                a = a.substr(37);
                dd(b, a, 0)
            }
        } else 3 == h ? m("\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879") : m("_study_box_state is overflow in [toNextUnit.click]")
    });
    $("#exitUnitStudy").live("click",
    function() {
        if (h == A) m("\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879");
        else if (h == D) {
            var a = $("#current_module_unit").val();
            if (null != a || "" != a) {
                var b = a.substr(0, 36),
                a = a.substr(37),
                c = JSON.stringify(ga());
                Wa(b, a, 0, c, TOTAL_READING_TIME, TOTAL_WRITING_TIME);
                $("#current_module_unit").val("")
            } else m("no action 3")
        } else h == N ? (R(), a = $("#current_module_unit").val(), null != a || "" != a ? (b = a.substr(0, 36), a = a.substr(37), rb(b, a, 0), $("#current_module_unit").val("")) : m("no action 4")) : m("no action");
        $("#studyBox").omDialog("close")
    });
    $("#toUnitTest").live("click",
    function() {
        if (h == A) alert("\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879");
        else if (h == N) {
            R();
            rb("00000000-0000-0000-0000-000000000000", 1, 0);
            null != d && (d.pauseClock(), q = !1);
            for (var a = (new Date).getTime(); ! (200 < (new Date).getTime() - a););
            Ha()
        } else if (h == D) {
            var b = $("#current_module_unit").val(),
            c = a = null;
            if (null != b || "" != b) a = b.substr(0, 36),
            c = b.substr(37),
            b = JSON.stringify(ga()),
            Wa(a, c, 0, b, TOTAL_READING_TIME, TOTAL_WRITING_TIME),
            $("#current_module_unit").val("");
            null != a && null != c ? ($("#studyBox").omDialog("close"), $.browser.msie ? (a = encodeURI("/UnitTest?bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a + "\x26unit\x3d" + c), window.showModalDialog(a, "test", "dialogWidth\x3d" + pageWidth + ";dialogHeight\x3d" + pageHeight)) : window.open("/UnitTest?bookname\x3d" + $("#handle-title").html() + "\x26moduleCode\x3d" + a + "\x26unit\x3d" + c)) : m("\u6d4b\u8bd5\u51fa\u9519\u4e86\uff0c\u5237\u4e2a\u526f\u672c\u8bd5\u8bd5~")
        }
    });
    $("#btnConfirmExit").live("click",
    function() {
        gb();
        $("#studyBox").omDialog("close");
        qb("off")
    });
    $("#btnCancelExit").live("click",
    function() {
        Jb();
        qb("off");
        null != d && d.continueClock()
    });
    $("#retryPost").live("click",
    function() {
        if (window.localStorage && window.localStorage.userfinishdata) {
            var a = JSON.parse(window.localStorage.userfinishdata);
            if (void 0 != a.UnitVocList && null != a.UnitVocList && "" != a.UnitVocList) {
                var b = a.UnitVocList,
                c = a.totalReadingTime,
                d = a.totalWritingTime;
                Wa(a.moduleCode, a.unit, a.isContinue, b, c, d)
            }
        }
        if (window.localStorage && window.localStorage.userdata && (d = JSON.parse(window.localStorage.userdata), void 0 != d.UnitVocList && null != d.UnitVocList && "" != d.UnitVocList)) {
            var b = d.UnitVocList,
            a = d.moduleCode,
            f = d.unit,
            g = d.vocCode,
            c = d.totalReadingTime,
            d = d.totalWritingTime;
            Da(a, f, g, b, c, d)
        }
    });
    $("#door_exitUnitStudy").live("click",
    function() {
        null != d && d.pauseClock();
        wa();
        $("#door_exitUnitStudy").is(":visible") ? $("#btnConfirmExit").show() : $("#btnConfirmExit").hide();
        Hb() || Ib() ? ($("#autoSaveDiv").fadeIn(), setTimeout(function() {
            $("#autoSaveImageInfo").html("\u4fdd\u5b58\u5b8c\u6210......").delay(1E3).fadeOut(function() {
                $("#autoSaveImage").hide().css("margin-top", 0).attr("src", "/content/image/clock.png").fadeIn()
            })
        },
        3E3)) : (3 == h ? ($("#reportDiv").css("visibility", "visible"), $("#reportDiv2").css("visibility", "hidden"), $("#reportDiv3").css("visibility", "hidden"), $("#btnConfirmExit").val("\u9000\u51fa")) : h == V ? ($("#reportDiv").css("visibility", "visible"), $("#report_total_text").html("\u2022 Let's speak!").siblings("td").hide().parent().siblings("tr").hide(), $("#reportDiv2").css("visibility", "visible"), $("#reportDiv3").css("visibility", "visible").html("\u2022 \u52a0\u6cb9\uff01"), $("#report_reward_text").html("\u2022 \u6682\u65e0\u91d1\u5e01\u5956\u52b1").siblings().hide(), $("#report_getcoins").html("").next("td").hide(), $("#btnConfirmExit").val("\u76f4\u63a5\u9000\u51fa")) : ($("#reportDiv").css("visibility", "visible"), $("#reportDiv2").css("visibility", "visible"), $("#reportDiv3").css("visibility", "visible"), $("#btnConfirmExit").val("\u4fdd\u5b58\u9000\u51fa")), qb("on"))
    });
    var zb = document.getElementById("errorAudio");
    $("#studyBox").delegate("#wsWriting", "keypress",
    function(a) {
        var b = a.keyCode;
        if (q) if (ya) {
            var c = $("#wsWriting").val(),
            d = $("#wsStardardVoc").val(),
            f = String.fromCharCode(b);
            13 == a.keyCode ? c == d ? $("#wsNext").click() : zb.play() : 0 == c.length && 32 == b || f == d.substr(c.length, 1) || (zb.play(), $.browser.msie ? a.returnValue = !1 : a.preventDefault())
        } else 13 == a.keyCode && $("#wsNext").click()
    });
    $("#studyBox").delegate("#wsWriting", "keyup",
    function(a) {
        17 == a.keyCode ? ($("#wordAudio_ws_symbol").click(), 0 == ++g.pronounceTimesByCtrlKey % 2 && oa && $("#wsMeaning").fadeIn().delay(1600).fadeOut()) : a.ctrlKey && 77 == window.event.keyCode && $("#showWsMeaning").click()
    });
    $("#studyBox").delegate("#music_UnitStudy", "click",
    function() {
        null == B && (B = new AlphaMusic(!1, !1));
        B.state ? (kc(), B.autostart = !1) : (jc(), B.autostart = !0)
    });
    $("#music_UnitStudy").live({
        mouseenter: function() {
            null == B && (B = new AlphaMusic(!1, !1));
            B.state ? $("#music_UnitStudy").css({
                "background-position": "0  0"
            }) : $("#music_UnitStudy").css({
                "background-position": "0  -60px"
            })
        },
        mouseleave: function() {
            null == B && (B = new AlphaMusic(!1, !1));
            B.state ? $("#music_UnitStudy").css({
                "background-position": "0  0"
            }) : $("#music_UnitStudy").css({
                "background-position": "0 -60px"
            })
        }
    });
    $("#monthStudyTimeInReport").live("click",
    function() {
        $("#chart_studyReport").html("");
        Rc(qa)
    });
    $("#weekStudyNbrInReport").live("click",
    function() {
        $("#chart_studyReport").html("");
        lc(Fa)
    });
    $("#myresultInReport").live("click",
    function() {
        $("#chart_studyReport").html("");
        Pc()
    });
    $("#center-menubar li").hover(function() {
        $(".logo_ban .center-menubar ul \x3e li:gt(0)").mouseover(function() {
            $(this).children("a").css({
                background: "#d31920",
                color: "#FFF",
                "border-radius": "3px 3px 0 0"
            });
            $(this).children(".nav_bot").show(200)
        });
        $(".logo_ban .center-menubar ul \x3e li:gt(0)").mouseout(function() {
            $(this).children(".nav_bot").hide(200);
            $(this).children("a").css({
                background: "#fff",
                color: "#d31920",
                "border-radius": "0"
            })
        })
    },
    function() {
        $("#center-menubar li").find("span.sticker").each(function(a, b) {
            $(b).stop(!0, !0)
        });
        $(this).css("cursor", "pointer");
        $(this).siblings().find("span.sticker").delay(100).animate({
            width: "6px"
        },
        "fast");
        $(this).find("span.sticker").delay(100).animate({
            width: "30px"
        },
        "fast")
    },
    function() {
        $("span.sticker-actived").parent().parent().siblings().find("span.sticker").delay(100).animate({
            width: "6px"
        },
        "fast");
        $("span.sticker-actived").delay(100).animate({
            width: "30px"
        },
        "fast")
    });
    $("#center-menubar li").click(function() {
        $(".logo_ban .center-menubar ul \x3e li:gt(0)").mousedown(function() {
            $(this).children(".nav_bot").show(200);
            $(this).children("a").css({
                background: "#d31920",
                color: "#FFF",
                "border-radius": "3px 3px 0 0"
            })
        })
    });
    $("#study").click(function() {
        0 != t.lastClickTicket && 500 < (new Date).getTime() - t.timeTicket && (t.lastClickTicket = 0, t.timeTicket = (new Date).getTime(), "\u5355\u8bcd\u57fa\u7840" == $("#center-menubar li").find("span").siblings(".active").eq(0).html() ? Ta(T) : null != T && Ta(T), $("#center-menubar").find("span").removeClass("active"), $(this).find("span").addClass("active"))
    });
    $("#reports").click(function() {
        3 != t.lastClickTicket && 500 < (new Date).getTime() - t.timeTicket && (t.lastClickTicket = 3, t.timeTicket = (new Date).getTime(), lc(Fa), $("#center-menubar").find("span").removeClass("active"), $(this).find("span").addClass("active"))
    });
    $("#menu_voc_review").click(function() {
        if (1 != t.lastClickTicket && 500 < (new Date).getTime() - t.timeTicket) {
            t.lastClickTicket = 1;
            t.timeTicket = (new Date).getTime();
            $("#center-menubar").find("span").removeClass("active");
            $(this).find("span").addClass("active");
            $("#handle-title").html("\u8bb0\u5fc6\u66f2\u7ebf");
            $("#sub-handle-title").html("");
            $("#handler-content").html($("#ebbingIntroduce").html()).hide().fadeIn();
            0 == H.length && ($("#reviewOn_setting").is(":checked") ? $("#handler-content").find(".btnStartReview").val("\u590d\u4e60\u4e00\u4e0b") : $("#handler-content").find(".btnStartReview").val("\u518d\u8bd5\u8bd5"));
            $("#handler-content").find(".btnStartReview").unbind("click").bind("click",
            function() {
                0 < H.length ? $b() : Ua(!1)
            });
            if (window.localStorage) {
                var a = JSON.parse(window.localStorage.userinfo);
                void 0 != a.reviewVocList && null != a.reviewVocList && "" != a.reviewVocList && ic()
            }
            0 >= Q ? $.ajax({
                url: "/api/Ajax/AjaxGetReviewCount",
                dataType: "json",
                type: "get",
                data: {},
                success: function(a) {
                    a.success && (a = a.totalNbr, a = a > H.length ? a: H.length, Q = 0 < a ? a: 0, $("#handler-content").find(".reviewNbr").fadeOut(function() {
                        $(this).html(Q).fadeIn()
                    }), 0 == Q && $("#handler-content").find(".btnStartReview").val("\u518d\u8bd5\u8bd5"))
                },
                error: function() {
                    $("#handler-content").html($("#handerPromptInfo").html());
                    $("#handler-content").find("div [name\x3dhanderPromptInfoDetail]").html("\u7cdf\u7cd5\uff0c\u7f51\u7edc\u51fa\u95ee\u9898\u4e86 ")
                }
            }) : $("#handler-content").find(".reviewNbr").html(Q)
        } else 500 > (new Date).getTime() - t.timeTicket && m("\u64cd\u4f5c\u592a\u5feb\u6216\u592a\u9891\u7e41\u4e86~")
    });
    $("#independentTest").click(function() {
        if (2 != t.lastClickTicket || 500 < (new Date).getTime() - t.timeTicket) t.lastClickTicket = 2,
        t.timeTicket = (new Date).getTime(),
        Tc(),
        $("#center-menubar").find("span").removeClass("active"),
        $(this).find("span").addClass("active")
    });
    var nc = 0;
    $("#vocabularyBook").click(function() {
        if (4 != t.lastClickTicket || 500 < (new Date).getTime() - t.timeTicket) t.lastClickTicket = 4,
        t.timeTicket = (new Date).getTime(),
        Uc(),
        $("#center-menubar").find("span").removeClass("active"),
        $(this).find("span").addClass("active"),
        ca || $.getScript("/content/js/jquery.flippy.js",
        function() {
            ca = !0
        })
    });
    $("#btnGoRWrong").click(function() {
        $("#page-content-errorbook").find(".no1").eq(0).html(1);
        Vc(1, 16, "1,2,3");
        oc(16, "1,2,3");
        ca || $.getScript("/content/js/jquery.flippy.js",
        function() {
            ca = !0
        })
    });
    var F = $("#nbrOfPageInUserVocBook").val(),
    U = !1;
    $("#unRememberWord").live("click",
    function() {
        yb(3)
    });
    $("#generalWord").live("click",
    function() {
        yb(4)
    });
    $("#familiarWord").live("click",
    function() {
        yb(5)
    });
    $("#btnGoReview").click(function() {
        0 < H.length ? $b() : Ua(!1)
    });
    $("#handler-content").delegate("span[name\x3ddisplayItem]", "click",
    function() {
        if ("1" == $(this).attr("on")) switch ($(this).attr("seq")) {
        case "0":
            $("#handler-content table tbody tr").each(function() {
                $(this).children("td").eq(0).find("span").css("visibility", "hidden")
            });
            $(this).attr("on", 0);
            $(this).html("\u9690\u85cf");
            break;
        case "1":
            $("#handler-content table tbody tr").each(function() {
                $(this).children("td").eq(1).find("span").css("visibility", "hidden")
            });
            $(this).attr("on", 0);
            $(this).html("\u9690\u85cf");
            break;
        case "2":
            $("#handler-content table tbody tr").each(function() {
                $(this).children("td").eq(2).find("span").css("visibility", "hidden")
            }),
            $(this).attr("on", 0),
            $(this).html("\u9690\u85cf")
        } else switch ($(this).attr("seq")) {
        case "0":
            $("#handler-content table tbody tr").each(function() {
                $(this).children("td").eq(0).find("span").css("visibility", "visible")
            });
            $(this).attr("on", 1);
            $(this).html("\u663e\u793a");
            break;
        case "1":
            $("#handler-content table tbody tr").each(function() {
                $(this).children("td").eq(1).find("span").css("visibility", "visible")
            });
            $(this).attr("on", 1);
            $(this).html("\u663e\u793a");
            break;
        case "2":
            $("#handler-content table tbody tr").each(function() {
                $(this).children("td").eq(2).find("span").css("visibility", "visible")
            }),
            $(this).attr("on", 1),
            $(this).html("\u663e\u793a")
        }
    });
    $("#hideMenu").click(function() {
        "none" == $("#theme-menu").css("display") ? (showThemeMenu(), window.localStorage && setHideMenuInLocalStorage(0)) : (hideThemeMenu(), window.localStorage && setHideMenuInLocalStorage(1))
    });
    $("#line").live("click",
    function() {
        "none" == $("#theme-menu").css("display") ? (showThemeMenu(), window.localStorage && setHideMenuInLocalStorage(0)) : (hideThemeMenu(), window.localStorage && mycourse, setHideMenuInLocalStorage(1))
    });
    0 < Ya && 1 == Aa && (m("\u60a8\u8fd8\u6709" + Ya + "\u6b21\u8bd5\u7528\u673a\u4f1a\u3002"), $("#showLeftTimes").show());
    $("#cancel_setting").click(function() {
        $("#btnPrivateSetting").click()
    });
    $("#studyBox").delegate("#btnExitAutoSave", "click",
    function() {
        $("#studyBox").omDialog("close");
        $("#autoSaveDiv").hide();
        $("#autoSaveImageInfo").html("\u6570\u636e\u4fdd\u5b58\u4e2d...").show();
        $("#autoSaveImage").css("margin-top", 60).attr("src", "source/images/loading_green.gif");
        q = !1
    });
    $("#handler-content").omScrollbar();
    $("#mycourse").omScrollbar();
    $("#allcourses").omScrollbar();
    $("#imgGetCashpoints").click(function() {
        if (0 < Ea) {
            var a = parseInt($("#cashPoint").html());
            Xc(a, Ea);
            Ea = 0
        }
    });
    $("#bookGroupDetail").omScrollbar({
        zIndex: 1002
    });
    $("#courseIntroduceLink").click(function() {
        var a = $("#bookShelf").css("left", (pageWidth - $("#bookShelf").outerWidth()) / 2);
        $("#overlayPage").fadeIn();
        $(a).slideDown(1E3);
        "" == $("#course-list").html() && (getAndBuildAllBookListFromRemote("all", 1), Zc( - 2))
    });
    $("#closeShelf").click(function() {
        $("#bookShelf").slideUp(function() {
            $("#overlayPage").fadeOut()
        })
    });
    $("#closeShelf1").click(function() {
        $("#bookShelf").slideUp(function() {
            $("#overlayPage").fadeOut()
        })
    });
    $("#confirm_registerBookBoxOnBookShelf").live("click",
    function() {
        qc($("#bookcode_registerBookBoxOnBookShelf").val())
    });
    var Bb = null;
    $("#course-list").delegate("input[name\x3dbtnRegisterBook]", "click",
    function() {
        if ("undefined" != typeof $(this).attr("moduleCode")) if ($("#bookcode_registerBookBoxOnBookShelf").val($(this).attr("moduleCode")), 1 == Aa && bd <= cd) sc($(this).attr("moduleCode"));
        else {
            $("#bookName_registerBookBoxOnBookShelf").html("\u4f7f\u7528\u5b66\u4e60\u5361\u5f00\u901a\u8bfe\u7a0b(" + $(this).parent().siblings(".ebook-title").eq(0).html() + ")");
            var a = $("#registerBookBoxOnBookShelf");
            $(a).hide();
            $(a).css({
                left: (pageWidth - $(a).outerWidth()) / 2,
                top: 0
            }).slideDown("slow",
            function() {
                null != Bb && window.clearTimeout(Bb);
                Bb = setTimeout(autoCloseRegisterBookBox, 3E3)
            })
        }
    });
    $("#pbar").omProgressbar({
        text: function(a) {
            return 10 > a ? "\u6570\u636e\u52a0\u8f7d\u4e2d......": 10 < a && 100 > a ? "\u5df2\u5b8c\u6210" + a + "%": "\u52a0\u8f7d\u5b8c\u6210"
        }
    }).find(".om-widget-header").removeClass("om-widget-header").css({
        "background-color": "greenYellow"
    }); (function() {
        var a = $("#pbar").omProgressbar("value");
        100 > a && (a = Math.floor(10 * Math.random()) + a, $("#pbar").omProgressbar("value", a), setTimeout(arguments.callee, 300), wc || (wc = !0, null != d && (d.pauseClock(), q = !1), Ha()), vc || (nb(), vc = !0))
    })();
    $("#studyBox").delegate("#showVocabulary_reverse", "click",
    function() {
        $("#voc_mark_reverse").fadeIn()
    });
    $("#studyBox").delegate("#showWsMeaning", "click",
    function() {
        1 == $("#showWsMeaning").attr("on") ? ($("#wsMeaning").fadeIn(), $("#showWsMeaning").html("\u8bcd\u4e49\u9690\u85cf"), $("#showWsMeaning").attr("on", 0), oa = !1) : ($("#wsMeaning").fadeOut(), $("#showWsMeaning").html("\u8bcd\u4e49\u63d0\u793a"), $("#showWsMeaning").attr("on", 1), oa = !0)
    });
    $("#feedbackLine").click(function() {
        "0" == $(this).attr("on") && ($(this).attr("on", 1), $(this).css({
            width: 306
        }), $(this).find("#feedbackTitle").css({
            "margin-top": 0
        }), $(this).find("#feedbackMain").show())
    });
    $("#cancelFeedback").click(function(a) {
        "1" == $("#feedbackLine").attr("on") && ($("#feedbackLine").css({
            width: 15
        }), $("#feedbackMain").hide(), $("#feedbackLine").find("#feedbackTitle").css({
            "margin-top": 26
        }), $("#feedbackLine").attr("on", 0), 0 < $("#feedbackLine div[name\x3dinfo]").length && $("#feedbackLine div[name\x3dinfo]").eq(0).remove());
        a.stopPropagation()
    });
    $("#submitFeedback").click(function(a) {
        var b = $('\x3cdiv name\x3d"info" style\x3d"color:red;text-align: center;margin-top: -100px;"\x3e\u8c22\u8c22\u60a8\u7684\u610f\u89c1\uff01\u60a8\u53cd\u9988\u7684\u610f\u89c1\u6211\u4eec\u4f1a\u4ee5\u77ed\u6d88\u606f\u7684\u65b9\u5f0f\u56de\u590d\u60a8\uff08\u6216\u5176\u4ed6\u65b9\u5f0f\uff09\uff0c\u8bf7\u6ce8\u610f\u67e5\u770b\u60a8\u7684\u77ed\u6d88\u606f\u3002\x3c/div\x3e'),
        c = $.trim($("#feedbackContent").val());
        "" != c && ($.ajax({
            url: "./servlet/ajaxsendfeedback.do?method\x3dsendFB",
            type: "post",
            dataType: "json",
            data: {
                msg: c
            },
            cache: !1,
            success: function() {},
            error: function() {}
        }), $("#feedbackContent").val(""), $(b).appendTo($("#feedbackLine")).fadeOut(3E3));
        a.stopPropagation()
    });
    $("#wordCorrect_symbol").live("click",
    function() {
        $("#wordCorrectZone").omDraggable();
        var a = $("#wordCorrect_symbol").position();
        $("#wordCorrectZone").css({
            left: a.left + 175,
            top: a.top + 155
        }).fadeIn()
    });
    $("#cancelWordCorrectZone").live("click",
    function() {
        $("#wordCorrectZone").hide()
    });
    $("#submitWordCorrectZone").live("click",
    function(a) {
        $("#wordCorrectZone").hide();
        var b = "";
        $("#spell_wordCorrectZone").is(":checked") && (b += "\u62fc\u5199\u9519\u8bef; ");
        $("#mark_wordCorrectZone").is(":checked") && (b += "\u97f3\u6807\u9519\u8bef; ");
        $("#pronun_wordCorrectZone").is(":checked") && (b += "\u53d1\u97f3\u9519\u8bef; ");
        $("#meaning_wordCorrectZone").is(":checked") && (b += "\u89e3\u91ca\u9519\u8bef; ");
        $("#other_wordCorrectZone").is(":checked") && (b += "\u5176\u5b83\u9519\u8bef; ");
        b += $("#detail_wordCorrectZone").val();
        "" != b && (null != g && (b = "\u52d8\u8bef\u5355\u8bcd\uff1a" + g.spelling + "(" + g.vocCode + ") \x3d\x3e " + b), $("#spell_wordCorrectZone").attr("checked", !1), $("#mark_wordCorrectZone").attr("checked", !1), $("#pronun_wordCorrectZone").attr("checked", !1), $("#meaning_wordCorrectZone").attr("checked", !1), $("#other_wordCorrectZone").attr("checked", !1), $("#detail_wordCorrectZone").val(""), $.ajax({
            url: "./servlet/ajaxsendfeedback.do?method\x3dsendFB",
            type: "post",
            dataType: "json",
            data: {
                msg: b
            },
            cache: !1,
            success: function() {},
            error: function() {}
        }));
        a.stopPropagation()
    });
    $("#wordDel_symbol").live("click",
    function() {
        $.ajax({
            url: "/api/Ajax/AjaxPostCollect",
            data: {
                vocCode: g.vocCode
            },
            dataType: "json",
            type: "post",
            success: function(a) {
                a.success && $("#wordDel_symbol").attr("src", "/content/image/study_collect_over.png")
            },
            error: function() {}
        })
    });
    $("#cancelDeleteWord").live("click",
    function() {
        $("#wordDeleteZone").hide()
    });
    $("#confirmDeleteWord").live("click",
    function() {
        h == A && (g.userVocCurrent.isCancelReview = !0);
        $("#wordDeleteZone").hide()
    });
    $("#UserTag").click(function() {
        var a = $("#UserId").val(),
        b = $("#UserName").val();
        $(this).html() == a ? ($(this).fadeOut(function() {
            $(this).html(b);
            $(this).fadeIn()
        }), window.localStorage && setUserTagInLocalStorage(b)) : ($(this).fadeOut(function() {
            $(this).html(a);
            $(this).fadeIn()
        }), window.localStorage && setUserTagInLocalStorage(a))
    });
    $("#top-bar ul li").hover(function() {
        $(this).find("img").show()
    },
    function() {
        $(this).find("img").hide()
    });
    $("#closeBtnOfShaddowCover").live("click",
    function() {
        $("#btnOfShaddowCover").fadeOut()
    });
    $("#studyBox").delegate("#btnOfShaddowCover", "click",
    function(a) {
        $("#btnOfShaddowCover").fadeOut();
        a.stopPropagation()
    });
    $(function() {
        $("#imgGetCashpoints").click(function() {
            $.ajax({
                url: "/api/Ajax/GetCashPointByType",
                type: "post",
                dataType: "json",
                data: {},
                cache: !1,
                success: function(a) {
                    if (a.success) $.each(a.data,
                    function(a, c) {
                        1 == c.CashPointType && $("#SignAll").html(c.CashPoint);
                        2 == c.CashPointType && $("#UnitStudyAll").html(c.CashPoint);
                        3 == c.CashPointType && $("#StudyTimeAll").html(c.CashPoint);
                        4 == c.CashPointType && $("#UnitTestAll").html(c.CashPoint);
                        5 == c.CashPointType && $("#MultiTestAll").html(c.CashPoint);
                        6 == c.CashPointType && $("#SelTestAll").html(c.CashPoint);
                        7 == c.CashPointType && $("#ReviewAll").html(c.CashPoint)
                    });
                    else return m(a.msg),
                    null
                },
                error: function() {
                    m("\u7f51\u7edc\u51fa\u9519\u4e86~~~")
                }
            });
            $.ajax({
                url: "/api/Ajax/GetTodyCashPointByType",
                type: "post",
                dataType: "json",
                data: {},
                cache: !1,
                success: function(a) {
                    if (a.success) $.each(a.data,
                    function(a, c) {
                        1 == c.CashPointType && $("#SignToday").html(c.CashPoint);
                        2 == c.CashPointType && $("#UnitStudyToday").html(c.CashPoint);
                        3 == c.CashPointType && $("#StudyTimeToday").html(c.CashPoint);
                        4 == c.CashPointType && $("#UnitTestToday").html(c.CashPoint);
                        5 == c.CashPointType && $("#MultiTestToday").html(c.CashPoint);
                        6 == c.CashPointType && $("#SelTestToday").html(c.CashPoint);
                        7 == c.CashPointType && $("#ReviewToday").html(c.CashPoint)
                    });
                    else return m(a.msg),
                    null
                },
                error: function() {
                    m("\u7f51\u7edc\u51fa\u9519\u4e86~~~")
                }
            });
            $(".bgPop,#div1").show()
        });
        $(".close").click(function() {
            $(".bgPop,#div1").hide()
        })
    })
});